{"version":3,"file":"main.bundle.js","mappings":"6JAGA,SACEA,OAAO,EACPC,gBAAgB,EAChBC,UAAU,EACVC,YAAY,EACZC,YAAY,EACZC,eAAe,EACfC,aAAa,EACbC,cAAe,EACfC,IAAK,EACLC,OAAQC,EAAAA,GAAAA,OAAAA,UAAAA,MACRC,SAAU,IACVC,MAAO,CACLC,SAAU,EACVC,aAAc,CAAC,OAAQ,UACvBC,KAAM,QAERC,OAAQ,CACN,CACEC,KAAM,4BACNC,MAAO,GACPH,KAAM,QAER,CACEE,KAAM,8BACNC,MAAO,GACPH,KAAM,WAGVI,QAAS,CACPF,KAAM,qBACNG,WAAY,CACV,CAAEC,KAAM,KAAMC,MAAO,oBAGzBC,KAAM,CACJC,cAAc,EACdC,WAAW,EACXC,aAAa,EACbC,SAAU,CACRC,MAAO,SACPC,SAAU,WAGdC,IAAK,CACHF,MAAO,SACPG,KAAM,MAERC,OAAQ,CACNC,IAAK,GACLF,KAAM,EACNG,IAAK,IACLC,OAAQ,EACRC,KAAM,EACNC,KAAM,GACNC,KAAM,IAERC,SAAU,CACRC,YAAY,EACZC,iBAAkB,GAClBC,YAAa,GACbC,UAAW,GACXC,YAAa,IACbC,YAAa,IACbC,cAAeC,KAAKC,GAAK,EACzBC,cAAeF,KAAKC,GAAK,EACzBE,iBAAkBC,IAClBC,gBAAiBD,IACjBE,eAAe,EACfC,cAAe,GACfC,YAAY,EACZC,OAAQ,CACNC,EAAG,EACHC,EAAG,EACHC,EAAG,IAGPC,aAAc,CACZC,SAAS,EACTjC,MAAO,SAETkC,iBAAkB,CAChBD,SAAS,EACTjC,MAAO,SACPmC,UAAW,GACXN,GAAI,GACJC,EAAG,IACHC,EAAG,KAELK,OAAQ,CACNH,SAAS,EACTI,eAAe,EACfC,KAAM,EACNC,SAAU,KACVC,UAAW,KACXrC,KAAM,IACNG,IAAK,IACLmC,IAAK,IACLC,MAAO,IACPC,QAAS,IACTC,MAAO,KAETC,WAAY,CACVZ,SAAS,EACTjC,MAAO,SACPmC,UAAW,IACXW,SAAU,IACVjB,EAAG,EACHC,EAAG,EACHC,EAAG,GAELgB,UAAW,CACTd,SAAS,EACTjC,MAAO,SACPgD,YAAa,SACbb,UAAW,IACXN,EAAG,EACHC,EAAG,EACHC,EAAG,ICpHP,GACEkB,SAAUC,OAAOC,yBACjBC,MAAQ,WACN,IACE,IAAIH,EAASI,SAASC,cAAc,UAEpC,SAAUJ,OAAOK,wBAA0BN,EAAOO,WAAW,WAAYP,EAAOO,WAAW,sBAG5F,CAFC,MAAMC,GACN,OAAO,CACR,CACF,CARO,GAURC,UAAWR,OAAOS,OAClBC,QAASV,OAAOW,MAAQX,OAAOY,YAAcZ,OAAOa,UAAYb,OAAOc,KAEvEC,qBAAsB,WACpB,IAAIC,EAAUb,SAASC,cAAc,OAsBrC,OArBAY,EAAQC,GAAK,sBACbD,EAAQE,MAAMC,WAAa,YAC3BH,EAAQE,MAAME,SAAW,OACzBJ,EAAQE,MAAMG,WAAa,SAC3BL,EAAQE,MAAMI,UAAY,SAC1BN,EAAQE,MAAMK,WAAa,OAC3BP,EAAQE,MAAMpE,MAAQ,OACtBkE,EAAQE,MAAMM,QAAU,QACxBR,EAAQE,MAAMO,MAAQ,QACtBT,EAAQE,MAAMQ,OAAS,aAEnBC,KAAKzB,QACPc,EAAQY,UAAY5B,OAAOK,sBAAwB,CACjD,4JACA,0FACAwB,KAAK,MAAQ,CACb,qJACA,0FACAA,KAAK,OAGFb,CACR,EAEDc,mBAAoB,SAASC,GAC3B,IAAIC,EAAQf,EAAID,EAIhBgB,OAA+BC,KAF/BF,EAAaA,GAAc,CAAC,GAERC,OAAuBD,EAAWC,OAAS7B,SAAS+B,KACxEjB,OAAuBgB,IAAlBF,EAAWd,GAAmBc,EAAWd,GAAK,SAEnDD,EAAUW,KAAKZ,wBACPE,GAAKA,EAEbe,EAAOG,YAAYnB,EACpB,G,uLCrDkBoB,EAAAA,WACnB,WAAYC,EAAOC,GAAW,Y,4FAAA,SAE5BX,KAAKU,MAAQA,EACbV,KAAKW,UAAYA,EAGjBX,KAAKY,cAAgB,IAAIC,EAAAA,cAAoB,CAACC,WAAW,IAGzDd,KAAKY,cAAcG,cAAcL,EAAMrF,IAAIF,OAC3C6E,KAAKY,cAAcI,cAAc3C,OAAO4C,kBAGxCN,EAAUH,YAAYR,KAAKY,cAAcM,YAGzClB,KAAKY,cAAcO,UAAU/D,SAAU,EACvC4C,KAAKY,cAAcO,UAAU7G,KAAOuG,EAAAA,iBAGpCO,EAAAA,cAAuBpB,KAAKY,cAAcS,aAAaC,mBAGvDtB,KAAKuB,aAGL/C,SAASgD,iBAAiB,oBAAoB,kBAAM,EAAKD,YAAX,IAAyB,GACvElD,OAAOmD,iBAAiB,UAAU,kBAAM,EAAKD,YAAX,IAAyB,EAC5D,C,iDAED,WACEvB,KAAKY,cAAca,QAAQzB,KAAKW,UAAUe,YAAa1B,KAAKW,UAAUgB,aACvE,G,oBAED,SAAOjB,EAAOnF,GAEZyE,KAAKY,cAAcgB,OAAOlB,EAAOnF,EAClC,M,gFAtCkBkF,G,0KCAAoB,EAAAA,WACnB,WAAYC,GAAU,Y,4FAAA,SACpB,IAAMhC,EAAQgC,EAASZ,WAAWpB,MAC5BiC,EAASD,EAASZ,WAAWa,OAGnC/B,KAAKgC,YAAc,IAAInB,EAAAA,kBAAwBO,EAAAA,OAAAA,IAAmBtB,EAAQiC,EAAQX,EAAAA,OAAAA,KAAoBA,EAAAA,OAAAA,KACtGpB,KAAKgC,YAAYC,SAASC,IAAId,EAAAA,OAAAA,KAAoBA,EAAAA,OAAAA,KAAoBA,EAAAA,OAAAA,MAGtEpB,KAAKuB,WAAWO,GAGhBzD,OAAOmD,iBAAiB,UAAU,kBAAM,EAAKD,WAAWO,EAAtB,IAAiC,EACpE,C,iDAED,SAAWA,GAET9B,KAAKgC,YAAYtG,OAASoG,EAASZ,WAAWpB,MAAQgC,EAASZ,WAAWa,OAG1E/B,KAAKgC,YAAYG,wBAClB,M,gFAtBkBN,G,0KCAAO,EAAAA,WACnB,WAAY1B,I,4FAAO,SACjBV,KAAKU,MAAQA,EAEbV,KAAKqC,MACN,C,2CAED,WAEErC,KAAK7C,aAAe,IAAI0D,EAAAA,aAAmBO,EAAAA,aAAAA,OAC3CpB,KAAK7C,aAAamF,QAAUlB,EAAAA,aAAAA,QAG5BpB,KAAKhC,WAAa,IAAI6C,EAAAA,WAAiBO,EAAAA,WAAAA,MAAyBA,EAAAA,WAAAA,UAA6BA,EAAAA,WAAAA,UAC7FpB,KAAKhC,WAAWiE,SAASC,IAAId,EAAAA,WAAAA,EAAqBA,EAAAA,WAAAA,EAAqBA,EAAAA,WAAAA,GACvEpB,KAAKhC,WAAWsE,QAAUlB,EAAAA,WAAAA,QAG1BpB,KAAK3C,iBAAmB,IAAIwD,EAAAA,iBAAuBO,EAAAA,iBAAAA,MAA+BA,EAAAA,iBAAAA,WAClFpB,KAAK3C,iBAAiB4E,SAASC,IAAId,EAAAA,iBAAAA,EAA2BA,EAAAA,iBAAAA,EAA2BA,EAAAA,iBAAAA,GACzFpB,KAAK3C,iBAAiBiF,QAAUlB,EAAAA,iBAAAA,QAGhCpB,KAAK3C,iBAAiBkF,WAAanB,EAAAA,OAAAA,QACnCpB,KAAK3C,iBAAiBE,OAAOE,KAAO2D,EAAAA,OAAAA,KACpCpB,KAAK3C,iBAAiBE,OAAOhC,OAAOD,KAAO8F,EAAAA,OAAAA,KAC3CpB,KAAK3C,iBAAiBE,OAAOhC,OAAOE,IAAM2F,EAAAA,OAAAA,IAC1CpB,KAAK3C,iBAAiBE,OAAOhC,OAAOwC,KAAOqD,EAAAA,OAAAA,KAC3CpB,KAAK3C,iBAAiBE,OAAOhC,OAAOsC,MAAQuD,EAAAA,OAAAA,MAC5CpB,KAAK3C,iBAAiBE,OAAOhC,OAAOqC,IAAMwD,EAAAA,OAAAA,IAC1CpB,KAAK3C,iBAAiBE,OAAOhC,OAAOuC,OAASsD,EAAAA,OAAAA,OAC7CpB,KAAK3C,iBAAiBE,OAAOiF,QAAQ1C,MAAQsB,EAAAA,OAAAA,SAC7CpB,KAAK3C,iBAAiBE,OAAOiF,QAAQT,OAASX,EAAAA,OAAAA,UAG3CA,EAAAA,QACDpB,KAAKyC,uBAAyB,IAAI5B,EAAAA,aAAmBb,KAAK3C,iBAAiBE,OAAOhC,QAClFyE,KAAKyC,uBAAuBH,QAAUlB,EAAAA,OAAAA,eAGxCpB,KAAK9B,UAAY,IAAI2C,EAAAA,gBAAsBO,EAAAA,UAAAA,MAAwBA,EAAAA,UAAAA,YAA8BA,EAAAA,UAAAA,WACjGpB,KAAK9B,UAAU+D,SAASC,IAAId,EAAAA,UAAAA,EAAoBA,EAAAA,UAAAA,EAAoBA,EAAAA,UAAAA,GACpEpB,KAAK9B,UAAUoE,QAAUlB,EAAAA,UAAAA,OAC1B,G,mBAED,SAAMsB,GACJ,OAAOA,GACL,IAAK,UACH1C,KAAKU,MAAMiC,IAAI3C,KAAK7C,cACpB,MAEF,IAAK,cACH6C,KAAKU,MAAMiC,IAAI3C,KAAK3C,kBACjB+D,EAAAA,OACDpB,KAAKU,MAAMiC,IAAI3C,KAAKyC,wBAEtB,MAEF,IAAK,QACHzC,KAAKU,MAAMiC,IAAI3C,KAAKhC,YACpB,MAEF,IAAK,OACHgC,KAAKU,MAAMiC,IAAI3C,KAAK9B,WAGzB,M,gFAlEkBkE,G,4LCCAQ,EAAAA,WACnB,WAAYrH,EAAQoF,I,4FAAW,SAE7B,IAAMkC,EAAgB,IAAIC,IAAJ,CAAkBjC,GACxCb,KAAK+C,cAAgB,IAAIF,EAActH,EAAQoF,GAE/CX,KAAKqC,MACN,C,2CAED,WACErC,KAAK+C,cAAchG,OAAOmF,IAAId,EAAAA,SAAAA,OAAAA,EAA0BA,EAAAA,SAAAA,OAAAA,EAA0BA,EAAAA,SAAAA,OAAAA,GAClFpB,KAAK+C,cAAchH,WAAaqF,EAAAA,SAAAA,WAChCpB,KAAK+C,cAAc/G,gBAAkBoF,EAAAA,SAAAA,gBACrCpB,KAAK+C,cAAc9G,YAAcmF,EAAAA,SAAAA,YACjCpB,KAAK+C,cAAc7G,UAAYkF,EAAAA,SAAAA,UAC/BpB,KAAK+C,cAAc5G,YAAciF,EAAAA,SAAAA,YACjCpB,KAAK+C,cAAc3G,YAAcgF,EAAAA,SAAAA,YACjCpB,KAAK+C,cAAc1G,cAAgB+E,EAAAA,SAAAA,cACnCpB,KAAK+C,cAAcvG,cAAgB4E,EAAAA,SAAAA,cACnCpB,KAAK+C,cAAcnG,cAAgBwE,EAAAA,SAAAA,cACnCpB,KAAK+C,cAAcjG,WAAasE,EAAAA,SAAAA,WAChCpB,KAAK+C,cAAclG,cAAgBuE,EAAAA,SAAAA,aACpC,M,gFAtBkBwB,G,sRCHAI,EAAAA,GACnB,WAAY7H,I,4FAAO,SACjB6E,KAAKiD,MAAQ,IAAIpC,EAAAA,kBAAwB,CACvC1F,MAAAA,EACA+H,KAAMrC,EAAAA,aAGRb,KAAKmD,SAAW,IAAItC,EAAAA,qBAA2B,CAC7C1F,MAAAA,EACAiI,QAASvC,EAAAA,YACTwC,UAAW,EACXC,UAAW,EACXJ,KAAMrC,EAAAA,aAGRb,KAAKuD,KAAO,IAAI1C,EAAAA,kBAAwB,CAAC7F,WAAW,GACrD,I,u6BClBCwI,EAAIC,EAAIC,EAAKC,ECKIC,EAAAA,WACnB,WAAYlD,I,4FAAO,SACjBV,KAAKU,MAAQA,EACbV,KAAK6D,IAAM,IACZ,C,0CAED,SAAKvJ,GAAM,WACT,MAAY,UAATA,EACM,SAACwF,EAAOiC,GAAkD,IAA1C+B,EAA0C,uDAA1B,EAAGC,EAAuB,uDAAN,EACzD,EAAKF,IAAM,IAAIhD,EAAAA,cAAoBf,EAAOiC,EAAQ+B,EAAeC,EAClE,EAGS,WAATzJ,EACM,SAAC0J,GAAoD,IAA5CF,EAA4C,uDAA5B,GAAIC,EAAwB,uDAAP,GACnD,EAAKF,IAAM,IAAIhD,EAAAA,eAAqBmD,EAAQF,EAAeC,EAC5D,OAHH,CAKD,G,mBAED,SAAM9B,EAAUgC,GAAU,QAClB/I,EAAW,IAAI8H,EAAS,UAAUG,SAClCrI,EAAO,IAAI+F,EAAAA,KAAWb,KAAK6D,IAAK3I,IAGtC,EAAAJ,EAAKmH,UAASC,IAAd,UAAqBD,KACrB,EAAAnH,EAAKmJ,UAAS/B,IAAd,UAAqB+B,IAElB7C,EAAAA,OAAAA,UACDtG,EAAKoJ,eAAgB,GAGvBlE,KAAKU,MAAMiC,IAAI7H,EAChB,I,mFAjCkB8I,G,0KDHAO,EAAAA,WACnB,WAAYrC,I,4FAAU,SACpB9B,KAAK8B,SAAWA,CACjB,C,2CA6BD,WACE0B,EAAG,SAASY,QACZV,EAAIU,QAEJZ,EAAG,OAAOa,OACVb,EAAG,OAAOc,QAEVd,EAAG,UAAUY,OACd,G,iBAED,WACEZ,EAAG,UAAUe,MACbf,EAAG,SAASe,MAGZf,EAAG,UAAUY,QACbZ,IAAKgB,SACLhB,EAAG,UAAUe,KACd,K,sBA7CD,WACEd,EAAK,IAAIgB,aACTf,EAAM,IAAIgB,QACVf,EAAK,IAAIgB,WAAW3E,KAAK8B,SAASlB,eAElC4C,EAAK,IAAIoB,OAAO,CACdC,QAAS,SACTC,eAAe,EACfC,OAAQ,CACNT,MAAO,CAAEU,QAAS,wBAAyBC,KAAM,GAAIC,SAAS,EAAMC,MAAO,KAC3EC,IAAK,CAAEJ,QAAS,kBAAmBK,MAAO,IAC1CC,MAAO,CAAEN,QAAS,mBAAoBC,KAAM,KAC5CM,IAAK,CAAEP,QAAS,2BAA4BE,SAAS,EAAMC,MAAO,KAClEK,OAAQ,CAAER,QAAS,qBAAsBE,SAAS,EAAMC,MAAO,KAC/DzK,QAAS,CAAEsK,QAAS,SAAUE,SAAS,EAAMC,MAAO,MAEtDM,OAAQ,CACN,CAAET,QAAS,YAAaD,OAAQ,CAAC,MAAO,QACxC,CAAEC,QAAS,eAAgBD,OAAQ,CAAC,QAAS,UAAW,QAAS,YAEnEW,UAAW,CACT,CAAEC,KAAM,QAASC,MAAO,CAAC,UAAW,QAAS,YAE/CC,QAAS,CAACpC,EAAIE,IAEjB,M,gFA9BkBQ,GEWf2B,EAAM,IAAIC,EAAAA,QACVC,EAAM,IAAID,EAAAA,QACVE,EAAgB,IAAIC,EAAAA,QACpBC,EAAQ,CAAC,IAAK,IAAK,KAEzB,SAASC,EAAoBC,EAAQC,EAAMC,GACzCvG,KAAKqG,OAASA,EACdrG,KAAKsG,UAAgBhG,IAATgG,EAAqBA,EAAO,GAExC,IAAMnL,OAAgBmF,IAARiG,EAAoBA,EAAM,SAIpCC,EAAW,EAETC,EAAczG,KAAKqG,OAAOK,SAE5BD,GAAeA,EAAYE,WAC7BH,EAAsC,EAA3BC,EAAYG,MAAMC,OACpBJ,GAAeA,EAAYK,mBACpCN,EAAWC,EAAYM,WAAWC,OAAOC,OAK3C,IAAMP,EAAW,IAAIQ,EAAAA,eACfC,EAAY,IAAIC,EAAAA,uBAAkC,EAAXZ,EAAe,EAAG,GAE/DE,EAASW,aAAa,WAAYF,GAElCG,EAAAA,aAAAA,KAAkBtH,KAAM0G,EAAU,IAAIa,EAAAA,kBAAkB,CAAEpM,MAAOA,EAAOqM,YAAY,KAEpFxH,KAAK1F,KAAO,sBAIZ0F,KAAKyH,kBAAmB,EAExBzH,KAAKwE,QACN,C,sKAED4B,EAAoBsB,UAAYC,OAAOC,OAAON,EAAAA,aAAAA,WAC9ClB,EAAoBsB,UAAUG,YAAczB,EAE5CA,EAAoBsB,UAAUlD,OAAS,WACrC,IAAIsD,EACJ9H,KAAKqG,OAAO0B,mBAAkB,GAE9B9B,EAAc+B,gBAAgBhI,KAAKqG,OAAO4B,aAE1C,IAAMA,EAAcjI,KAAKqG,OAAO4B,YAC1BhG,EAAWjC,KAAK0G,SAASK,WAAW9E,SAIpCwE,EAAczG,KAAKqG,OAAOK,SAEhC,GAAID,GAAeA,EAAYE,WAAY,CACzC,IAAMuB,EAAWzB,EAAYyB,SAEvBtB,EAAQH,EAAYG,MAE1BkB,EAAM,EAEN,IAAK,IAAIK,EAAI,EAAGC,EAAIxB,EAAMC,OAAQsB,EAAIC,EAAGD,IAGvC,IAFA,IAAME,EAAOzB,EAAMuB,GAEVG,EAAI,EAAGC,EAAKF,EAAKG,cAAc3B,OAAQyB,EAAIC,EAAID,IAAK,CAC3D,IAAMG,EAASP,EAASG,EAAKlC,EAAMmC,KAC7BtB,EAASqB,EAAKG,cAAcF,GAElCxC,EAAI4C,KAAKD,GAAQE,aAAaV,GAC9BjC,EAAI0C,KAAK1B,GAAQ4B,aAAa3C,GAAe4C,YAAYC,eAAe9I,KAAKsG,MAAM3D,IAAImD,GAEvF7D,EAAS8G,OAAOjB,EAAKhC,EAAI9I,EAAG8I,EAAI7I,EAAG6I,EAAI5I,GAEvC4K,GAAY,EAEZ7F,EAAS8G,OAAOjB,EAAK9B,EAAIhJ,EAAGgJ,EAAI/I,EAAG+I,EAAI9I,GAEvC4K,GAAY,CACb,CAEJ,MAAM,GAAIrB,GAAeA,EAAYK,iBAAkB,CACtD,IAAMkC,EAASvC,EAAYM,WAAW9E,SAChCgH,EAAUxC,EAAYM,WAAWC,OAEvCc,EAAM,EAIN,IAAK,IAAIQ,EAAI,EAAGC,EAAKS,EAAO/B,MAAOqB,EAAIC,EAAID,IACzCxC,EAAI5D,IAAI8G,EAAOE,KAAKZ,GAAIU,EAAOG,KAAKb,GAAIU,EAAOI,KAAKd,IAAIK,aAAaV,GACrEjC,EAAI9D,IAAI+G,EAAQC,KAAKZ,GAAIW,EAAQE,KAAKb,GAAIW,EAAQG,KAAKd,IACvDtC,EAAI4C,aAAa3C,GAAe4C,YAAYC,eAAe9I,KAAKsG,MAAM3D,IAAImD,GAE1E7D,EAAS8G,OAAOjB,EAAKhC,EAAI9I,EAAG8I,EAAI7I,EAAG6I,EAAI5I,GAEvC4K,GAAY,EAEZ7F,EAAS8G,OAAOjB,EAAK9B,EAAIhJ,EAAGgJ,EAAI/I,EAAG+I,EAAI9I,GAEvC4K,GAAY,CAEf,CAED7F,EAASoH,aAAc,CACxB,E,ICrHoBC,EAAAA,WACnB,WAAY5I,EAAO5F,I,4FAAM,SACvBkF,KAAKlF,KAAOA,EACZkF,KAAKU,MAAQA,EAEb,IAAM1F,EAAY,IAAI6F,EAAAA,kBAAwBb,KAAKlF,KAAK4L,UACxD1G,KAAKuJ,SAAW,IAAI1I,EAAAA,aAAmB7F,GACvCgF,KAAKuJ,SAASrO,SAASsO,WAAY,EACnCxJ,KAAKuJ,SAASrO,SAASuO,QAAU,IACjCzJ,KAAKuJ,SAASrO,SAASwO,aAAc,EAErC,IAAMC,EAAQ,IAAI9I,EAAAA,cAAoBb,KAAKlF,KAAK4L,UAChD1G,KAAK4J,UAAY,IAAI/I,EAAAA,aAAmB8I,GACxC3J,KAAK4J,UAAU1O,SAASsO,WAAY,EACpCxJ,KAAK4J,UAAU1O,SAASuO,QAAU,IAClCzJ,KAAK4J,UAAU1O,SAASwO,aAAc,EAEtC1J,KAAK6J,aAAe,IAAIzD,EAAoBpG,KAAKlF,KAAM,GACvDkF,KAAK8J,UAAY,IAAIjJ,EAAAA,UAAgBb,KAAKlF,KAC3C,C,6CAED,WACEkF,KAAKlF,KAAK6H,IAAI3C,KAAKuJ,UACnBvJ,KAAKlF,KAAK6H,IAAI3C,KAAK4J,WAEnB5J,KAAKU,MAAMiC,IAAI3C,KAAK6J,cACpB7J,KAAKU,MAAMiC,IAAI3C,KAAK8J,UACrB,G,qBAED,WACE9J,KAAKlF,KAAKiP,OAAO/J,KAAKuJ,UACtBvJ,KAAKlF,KAAKiP,OAAO/J,KAAK4J,WAEtB5J,KAAKU,MAAMqJ,OAAO/J,KAAK6J,cACvB7J,KAAKU,MAAMqJ,OAAO/J,KAAK8J,UACxB,M,gFAnCkBR,G,mLCHAU,EAAAA,W,iKACnB,SAAgBC,EAAIC,EAAYC,GAE9B,IAAIC,EAAMC,EAEV,OAHAH,IAAeA,EAAa,KAGrB,WACL,IAAMI,EAAUH,GAASnK,KAEnBuK,GAAQ,IAAIC,KAChBC,EAAOC,UAENN,GAAQG,EAAMH,EAAOF,GACtBS,aAAaN,GACbA,EAAaO,YAAW,WACtBR,EAAOG,EACPN,EAAGY,MAAMP,EAASG,EACnB,GAAEP,KAGHE,EAAOG,EACPN,EAAGY,MAAMP,EAASG,GAErB,CACF,G,yBAED,WACE,OAAO,SAASK,GACd,GAAGA,EAAIC,iBAAkB,CACvB,IAAMC,EAAkBF,EAAIG,OAASH,EAAII,MAAQ,IAEjDC,QAAQC,IAAI9O,KAAK+O,MAAML,EAAiB,GAAK,eAC9C,CACF,CACF,G,sBAED,WACE,OAAO,SAASF,GACdK,QAAQG,MAAMR,EACf,CACF,G,+BAED,SAAyB3P,GACvB,OAAO,SAACoQ,GACc,iBAAVA,IACRA,EAAQA,EAAMC,QAAQ,IAAK,OAG7BrQ,EAAMsQ,OAAOF,EACd,CACF,G,oBAED,SAAczQ,GACZkF,KAAKqJ,YAAYvO,EAAKI,SAAUJ,EAAK4L,SACtC,G,yBAED,SAAmBxL,EAAUwL,GAC3B,OAAO,WACLxL,EAASkI,SAAWlI,EAASkI,QAC7BlI,EAASwQ,cAAgBxQ,EAASwQ,aAClCxQ,EAASgI,MAAQhI,EAASgI,KAC1BhI,EAASmO,aAAc,EACvB3C,EAASiF,oBAAqB,EAC9BjF,EAASkF,mBAAoB,EAC7BlF,EAASmF,kBAAmB,CAC7B,CACF,G,2BAED,SAAqB3Q,EAAU4Q,EAAaC,GAC1C,OAAO,SAASC,GACd9Q,EAAS4Q,GAAeC,EAASC,GACjC9Q,EAASmO,aAAc,CACxB,CACF,K,yFAxEkBW,G,0KCUAiC,EAAAA,WACnB,c,4FAAc,SAEZjM,KAAK+L,SAAW,CAAC,CAClB,C,2CAED,WAAO,WACCG,EAAS,IAAIrL,EAAAA,cACb/G,EAAgBsH,EAAAA,cAChBzG,EAAayG,EAAAA,QAAAA,WACb+K,EAAe,GA0BrB,OAxBAD,EAAOE,QAAQhL,EAAAA,QAAAA,MAEfzG,EAAW0R,SAAQ,SAAAC,GAEjBH,EAAaI,KAAK,IAAIC,EAAAA,SAAQ,SAACC,EAASC,GAEtCR,EAAOS,KAAKL,EAAUzR,OAEpB,SAAAH,GACEA,EAAQkS,WAAa9S,EAGrB,IAAM+S,EAAW,CAAC,EAClBA,EAASP,EAAU1R,MAAQF,EACxBmS,EAASP,EAAU1R,gBAAiBiG,EAAAA,SACrC4L,EAAQI,EACX,GACD7C,EAAQ8C,eACR,SAAAhC,GAAG,OAAI4B,EAAO,IAAIK,MAAMjC,EAAM,2CAA6CwB,EAAUzR,OAAlF,GAEN,IACF,IAGM2R,EAAAA,QAAAA,IAAYL,GAAca,MAAK,SAAAjB,GAEpC,IAAI,IAAI5D,EAAI,EAAGA,EAAI4D,EAASlF,OAAQsB,IAClC,EAAK4D,SAASpE,OAAOsF,KAAKlB,EAAS5D,IAAI,IAAM4D,EAAS5D,GAAGR,OAAOsF,KAAKlB,EAAS5D,IAAI,GAErF,IAAE,SAAA+E,GAAM,OAAI/B,QAAQC,IAAI8B,EAAhB,GACV,M,gFA1CkBjB,G,kBCKjBkB,EAAsB,CACxBC,gBAAiB,SAAU1G,GACzB,IAAI2G,EAAQ3G,EAAS2G,MACjBtG,EAAaL,EAASK,WAK1B,GACY,OAAVsG,QACwB/M,IAAxByG,EAAW9E,eACW3B,IAAtByG,EAAWC,aACO1G,IAAlByG,EAAWuG,GAJb,CAYA,IAAIC,EAAUF,EAAMG,MAChBrG,EAAYJ,EAAW9E,SAASuL,MAChCC,EAAU1G,EAAWC,OAAOwG,MAC5BE,EAAM3G,EAAWuG,GAAGE,MAEpBG,EAAYxG,EAAUN,OAAS,OAERvG,IAAvByG,EAAW6G,SACblH,EAASW,aAAa,UAAW,IAAIwG,EAAAA,gBAAgB,IAAIC,aAAa,EAAIH,GAAY,IAQxF,IALA,IAAII,EAAWhH,EAAW6G,QAAQJ,MAE9BQ,EAAO,GACPC,EAAO,GAEF9F,EAAI,EAAGA,EAAIwF,EAAWxF,IAC7B6F,EAAK7F,GAAK,IAAIpC,EAAAA,QACdkI,EAAK9F,GAAK,IAAIpC,EAAAA,QAGhB,IAAImI,EAAK,IAAInI,EAAAA,QACToI,EAAK,IAAIpI,EAAAA,QACTqI,EAAK,IAAIrI,EAAAA,QACTsI,EAAM,IAAIC,EAAAA,QACVC,EAAM,IAAID,EAAAA,QACVE,EAAM,IAAIF,EAAAA,QACVG,EAAO,IAAI1I,EAAAA,QACX2I,EAAO,IAAI3I,EAAAA,QAmCXN,EAASiB,EAASjB,OAEA,IAAlBA,EAAOoB,SACTpB,EAAS,CACP,CACErB,MAAO,EACP6C,MAAOsG,EAAQ1G,UAKZsB,EAAI,EAAb,IAAK,IAAWwG,EAAKlJ,EAAOoB,OAAQsB,EAAIwG,IAAMxG,EAM5C,IALA,IAKSG,EAHLlE,GAFAwK,EAAQnJ,EAAO0C,IAED/D,MAGEmE,EAAKnE,EAFbwK,EAAM3H,MAEsBqB,EAAIC,EAAID,GAAK,EACnDuG,EAAetB,EAAQjF,EAAI,GAAIiF,EAAQjF,EAAI,GAAIiF,EAAQjF,EAAI,IAI/D,IAIIwG,EAAGC,EAAGC,EAJNC,EAAM,IAAIlJ,EAAAA,QACVmJ,EAAO,IAAInJ,EAAAA,QACXoJ,EAAI,IAAIpJ,EAAAA,QACRqJ,EAAK,IAAIrJ,EAAAA,QA0Bb,IAASoC,EAAI,EAAGwG,EAAKlJ,EAAOoB,OAAQsB,EAAIwG,IAAMxG,EAC5C,KAAIyG,EAEAxK,EAGJ,IAASkE,EAHLlE,GAFAwK,EAAQnJ,EAAO0C,IAED/D,MAGEmE,EAAKnE,EAFbwK,EAAM3H,MAEsBqB,EAAIC,EAAID,GAAK,EACnD+G,EAAa9B,EAAQjF,EAAI,IACzB+G,EAAa9B,EAAQjF,EAAI,IACzB+G,EAAa9B,EAAQjF,EAAI,GAR3B,CArHD,MAJC6C,QAAQG,MACN,qHAmCJ,SAASuD,EAAeS,EAAGC,EAAGC,GAC5BtB,EAAGuB,UAAUtI,EAAe,EAAJmI,GACxBnB,EAAGsB,UAAUtI,EAAe,EAAJoI,GACxBnB,EAAGqB,UAAUtI,EAAe,EAAJqI,GAExBnB,EAAIoB,UAAU/B,EAAS,EAAJ4B,GACnBf,EAAIkB,UAAU/B,EAAS,EAAJ6B,GACnBf,EAAIiB,UAAU/B,EAAS,EAAJ8B,GAEnBrB,EAAGuB,IAAIxB,GACPE,EAAGsB,IAAIxB,GAEPK,EAAImB,IAAIrB,GACRG,EAAIkB,IAAIrB,GAER,IAAIsB,EAAI,GAAOpB,EAAIvR,EAAIwR,EAAIvR,EAAIuR,EAAIxR,EAAIuR,EAAItR,GAItC2S,SAASD,KAEdlB,EAAK/F,KAAKyF,GAAIrF,eAAe0F,EAAIvR,GAAG4S,gBAAgBzB,GAAKG,EAAItR,GAAG6L,eAAe6G,GAC/EjB,EAAKhG,KAAK0F,GAAItF,eAAeyF,EAAIvR,GAAG6S,gBAAgB1B,GAAKK,EAAIxR,GAAG8L,eAAe6G,GAE/E3B,EAAKsB,GAAG3M,IAAI8L,GACZT,EAAKuB,GAAG5M,IAAI8L,GACZT,EAAKwB,GAAG7M,IAAI8L,GAEZR,EAAKqB,GAAG3M,IAAI+L,GACZT,EAAKsB,GAAG5M,IAAI+L,GACZT,EAAKuB,GAAG7M,IAAI+L,GACb,CA8BD,SAASW,EAAaS,GACpBX,EAAEM,UAAUhC,EAAa,EAAJqC,GACrBV,EAAG1G,KAAKyG,GAERJ,EAAIf,EAAK8B,GAITb,EAAIvG,KAAKqG,GACTE,EAAIS,IAAIP,EAAErG,eAAeqG,EAAEY,IAAIhB,KAAKlG,YAIpCqG,EAAKc,aAAaZ,EAAIL,GACtBC,EAAOE,EAAKa,IAAI9B,EAAK6B,IACrBhB,EAAIE,EAAO,GAAO,EAAM,EAExBjB,EAAa,EAAJ+B,GAASb,EAAIjS,EACtB+Q,EAAa,EAAJ+B,EAAQ,GAAKb,EAAIhS,EAC1B8Q,EAAa,EAAJ+B,EAAQ,GAAKb,EAAI/R,EAC1B6Q,EAAa,EAAJ+B,EAAQ,GAAKhB,CACvB,CAcF,EAODmB,sBAAuB,SAAUC,EAAYC,GAe3C,IAdA,IAAIC,EAAoC,OAAxBF,EAAW,GAAG7C,MAE1BgD,EAAiB,IAAIC,IAAI3I,OAAOsF,KAAKiD,EAAW,GAAGnJ,aACnDwJ,EAAsB,IAAID,IAAI3I,OAAOsF,KAAKiD,EAAW,GAAGM,kBAExDzJ,EAAa,CAAC,EACdyJ,EAAkB,CAAC,EAEnBC,EAAuBP,EAAW,GAAGO,qBAErCC,EAAiB,IAAIxJ,EAAAA,eAErByJ,EAAS,EAEJxI,EAAI,EAAGA,EAAI+H,EAAWrJ,SAAUsB,EAAG,CAC1C,IAAIzB,EAAWwJ,EAAW/H,GACtByI,EAAkB,EAItB,GAAIR,KAAkC,OAAnB1J,EAAS2G,OAM1B,OALAlC,QAAQG,MACN,qFACAnD,EACA,gIAEK,KAKT,IAAK,IAAIvN,KAAQ8L,EAASK,WAAY,CACpC,IAAKsJ,EAAeQ,IAAIjW,GAQtB,OAPAuQ,QAAQG,MACN,qFACAnD,EACA,gEACAvN,EACA,gEAEK,UAGgB0F,IAArByG,EAAWnM,KAAqBmM,EAAWnM,GAAQ,IAEvDmM,EAAWnM,GAAM2R,KAAK7F,EAASK,WAAWnM,IAE1CgW,GACD,CAID,GAAIA,IAAoBP,EAAe/J,KAMrC,OALA6E,QAAQG,MACN,qFACAnD,EACA,kEAEK,KAKT,GAAIsI,IAAyB/J,EAAS+J,qBAMpC,OALAtF,QAAQG,MACN,qFACAnD,EACA,yEAEK,KAGT,IAAK,IAAIvN,KAAQ8L,EAAS8J,gBAAiB,CACzC,IAAKD,EAAoBM,IAAIjW,GAM3B,OALAuQ,QAAQG,MACN,qFACAnD,EACA,qEAEK,UAGqB7H,IAA1BkQ,EAAgB5V,KAAqB4V,EAAgB5V,GAAQ,IAEjE4V,EAAgB5V,GAAM2R,KAAK7F,EAAS8J,gBAAgB5V,GACrD,CAOD,GAHA8V,EAAeI,SAASC,eAAiBL,EAAeI,SAASC,gBAAkB,GACnFL,EAAeI,SAASC,eAAexE,KAAK7F,EAASoK,UAEjDX,EAAW,CACb,IAAIlJ,EAEJ,GAAImJ,EACFnJ,EAAQP,EAAS2G,MAAMpG,UAClB,SAAqC3G,IAAjCoG,EAASK,WAAW9E,SAQ7B,OALAkJ,QAAQG,MACN,qFACAnD,EACA,oEAEK,KAPPlB,EAAQP,EAASK,WAAW9E,SAASgF,KAQtC,CAEDyJ,EAAeM,SAASL,EAAQ1J,EAAOkB,GAEvCwI,GAAU1J,CACX,CACF,CAID,GAAImJ,EAAW,CACb,IAAIa,EAAc,EACdC,EAAc,GAElB,IAAS/I,EAAI,EAAGA,EAAI+H,EAAWrJ,SAAUsB,EAAG,CAG1C,IAFA,IAAIkF,EAAQ6C,EAAW/H,GAAGkF,MAEjB/E,EAAI,EAAGA,EAAI+E,EAAMpG,QAASqB,EACjC4I,EAAY3E,KAAKc,EAAMnE,KAAKZ,GAAK2I,GAGnCA,GAAef,EAAW/H,GAAGpB,WAAW9E,SAASgF,KAClD,CAEDyJ,EAAeS,SAASD,EACzB,CAID,IAAK,IAAItW,KAAQmM,EAAY,CAC3B,IAAIqK,EAAkBpR,KAAKqR,sBAAsBtK,EAAWnM,IAE5D,IAAKwW,EAMH,OALAjG,QAAQG,MACN,wFACA1Q,EACA,eAEK,KAGT8V,EAAerJ,aAAazM,EAAMwW,EACnC,CAID,IAAK,IAAIxW,KAAQ4V,EAAiB,CAChC,IAAIc,EAAkBd,EAAgB5V,GAAM,GAAGiM,OAE/C,GAAwB,IAApByK,EAAuB,MAE3BZ,EAAeF,gBAAkBE,EAAeF,iBAAmB,CAAC,EACpEE,EAAeF,gBAAgB5V,GAAQ,GAEvC,IAASuN,EAAI,EAAGA,EAAImJ,IAAmBnJ,EAAG,CACxC,IAAIoJ,EAAyB,GAE7B,IAASjJ,EAAI,EAAGA,EAAIkI,EAAgB5V,GAAMiM,SAAUyB,EAClDiJ,EAAuBhF,KAAKiE,EAAgB5V,GAAM0N,GAAGH,IAGvD,IAAIqJ,EAAuBxR,KAAKqR,sBAAsBE,GAEtD,IAAKC,EAMH,OALArG,QAAQG,MACN,wFACA1Q,EACA,oBAEK,KAGT8V,EAAeF,gBAAgB5V,GAAM2R,KAAKiF,EAC3C,CACF,CAED,OAAOd,CACR,EAMDW,sBAAuB,SAAUtK,GAM/B,IALA,IAAI0K,EACAC,EACAC,EACAC,EAAc,EAETzJ,EAAI,EAAGA,EAAIpB,EAAWF,SAAUsB,EAAG,CAC1C,IAAI0J,EAAY9K,EAAWoB,GAE3B,GAAI0J,EAAUC,6BAIZ,OAHA3G,QAAQG,MACN,8GAEK,KAIT,QADmBhL,IAAfmR,IAA0BA,EAAaI,EAAUrE,MAAM3F,aACvD4J,IAAeI,EAAUrE,MAAM3F,YAIjC,OAHAsD,QAAQG,MACN,mJAEK,KAIT,QADiBhL,IAAboR,IAAwBA,EAAWG,EAAUH,UAC7CA,IAAaG,EAAUH,SAIzB,OAHAvG,QAAQG,MACN,uIAEK,KAIT,QADmBhL,IAAfqR,IAA0BA,EAAaE,EAAUF,YACjDA,IAAeE,EAAUF,WAI3B,OAHAxG,QAAQG,MACN,yIAEK,KAGTsG,GAAeC,EAAUrE,MAAM3G,MAChC,CAED,IAAI2G,EAAQ,IAAIiE,EAAWG,GACvBjB,EAAS,EAEb,IAASxI,EAAI,EAAGA,EAAIpB,EAAWF,SAAUsB,EACvCqF,EAAMtL,IAAI6E,EAAWoB,GAAGqF,MAAOmD,GAE/BA,GAAU5J,EAAWoB,GAAGqF,MAAM3G,OAGhC,OAAO,IAAIgH,EAAAA,gBAAgBL,EAAOkE,EAAUC,EAC7C,EAMDI,qBAAsB,SAAUhL,GAQ9B,IALA,IAAI0K,EACAG,EAAc,EACdI,EAAS,EAGJ7J,EAAI,EAAGC,EAAIrB,EAAWF,OAAQsB,EAAIC,IAAKD,EAAG,CACjD,IAAI0J,EAAY9K,EAAWoB,GAG3B,QADmB7H,IAAfmR,IAA0BA,EAAaI,EAAUrE,MAAM3F,aACvD4J,IAAeI,EAAUrE,MAAM3F,YAEjC,OADAsD,QAAQG,MAAM,6DACP,KAGTsG,GAAeC,EAAUrE,MAAM3G,OAC/BmL,GAAUH,EAAUH,QACrB,CAGD,IAAIO,EAAoB,IAAIC,EAAAA,kBAAkB,IAAIT,EAAWG,GAAcI,GACvErB,EAAS,EACTwB,EAAM,GACNC,EAAU,CAAC,OAAQ,OAAQ,OAAQ,QACnCC,EAAU,CAAC,OAAQ,OAAQ,OAAQ,QAE9B/J,EAAI,EAAb,IAAgBF,EAAIrB,EAAWF,OAAQyB,EAAIF,EAAGE,IAAK,CACjD,IACIoJ,GADAG,EAAY9K,EAAWuB,IACFoJ,SACrBzK,EAAQ4K,EAAU5K,MAClBqL,EAAM,IAAIC,EAAAA,2BACZN,EACAP,EACAf,EACAkB,EAAUF,YAEZQ,EAAI5F,KAAK+F,GAET3B,GAAUe,EAIV,IAAK,IAAIlC,EAAI,EAAGA,EAAIvI,EAAOuI,IACzB,IAAK,IAAIgD,EAAI,EAAGA,EAAId,EAAUc,IAC5BF,EAAID,EAAQG,IAAIhD,EAAGqC,EAAUO,EAAQI,IAAIhD,GAG9C,CAED,OAAO2C,CACR,EAMDM,kBAAmB,SAAU/L,GAI3B,IAAIgM,EAAM,EACV,IAAK,IAAI9X,KAAQ8L,EAASK,WAAY,CACpC,IAAI4L,EAAOjM,EAASkM,aAAahY,GACjC8X,GAAOC,EAAK1L,MAAQ0L,EAAKjB,SAAWiB,EAAKnF,MAAMqF,iBAChD,CAED,IAAItF,EAAU7G,EAASoM,WAEvB,OADAJ,GAAOnF,EAAUA,EAAQtG,MAAQsG,EAAQmE,SAAWnE,EAAQC,MAAMqF,kBAAoB,CAEvF,EAODE,cAAe,SAAUrM,GAA4B,IAAlBsM,EAAkB,uDAAN,KAC7CA,EAAY1W,KAAK2W,IAAID,EAAWE,OAAOC,SAoBvC,IAhBA,IAAIC,EAAc,CAAC,EACf7F,EAAU7G,EAASoM,WACnB3L,EAAYT,EAASkM,aAAa,YAClCS,EAAc9F,EAAUA,EAAQtG,MAAQE,EAAUF,MAGlDqM,EAAY,EAGZC,EAAiB5L,OAAOsF,KAAKvG,EAASK,YACtCyM,EAAa,CAAC,EACdC,EAAmB,CAAC,EACpBC,EAAa,GACbtB,EAAU,CAAC,OAAQ,OAAQ,OAAQ,QAG9BjK,EAAI,EAAGC,EAAImL,EAAe1M,OAAQsB,EAAIC,EAAGD,IAAK,CAGrDqL,EAFI5Y,EAAO2Y,EAAepL,IAEP,IAEfwL,EAAYjN,EAAS8J,gBAAgB5V,MAEvC6Y,EAAiB7Y,GAAQ,IAAIgZ,MAAMD,EAAU9M,QAAQgN,OAAOC,KAAI,iBAAM,EAAN,IAEnE,CAGD,IAAIC,EAAezX,KAAK0X,MAAM,EAAIhB,GAC9BiB,EAAkB3X,KAAK4X,IAAI,GAAIH,GACnC,IAAS5L,EAAI,EAAGA,EAAIkL,EAAalL,IAAK,CACpC,IAAIkF,EAAQE,EAAUA,EAAQrE,KAAKf,GAAKA,EAGpCgM,EAAO,GACF7L,EAAI,EAAb,IAAgBF,EAAImL,EAAe1M,OAAQyB,EAAIF,EAAGE,IAKhD,IAJA,IAAI1N,EAAO2Y,EAAejL,GAEtBoJ,GADAG,EAAYnL,EAASkM,aAAahY,IACb8W,SAEhBc,EAAI,EAAGA,EAAId,EAAUc,IAE5B2B,GAAQ,GAAJ,UAAUtC,EAAUO,EAAQI,IAAInF,GAAS4G,GAAzC,KAMR,GAAIE,KAAQf,EACVM,EAAWnH,KAAK6G,EAAYe,QACvB,CAEL,IAAS7L,EAAI,EAAGF,EAAImL,EAAe1M,OAAQyB,EAAIF,EAAGE,IAChD,CAAI1N,EAAO2Y,EAAejL,GAA1B,IACIuJ,EAAYnL,EAASkM,aAAahY,GAClC+Y,EAAYjN,EAAS8J,gBAAgB5V,GAErCwZ,GADA1C,EAAWG,EAAUH,SACV8B,EAAW5Y,IACtByZ,EAAiBZ,EAAiB7Y,GAEtC,IAAS4X,EAAI,EAAGA,EAAId,EAAUc,IAAK,CACjC,IAAI8B,EAAalC,EAAQI,GAGzB,GAFA4B,EAAS7H,KAAKsF,EAAUyC,GAAYjH,IAEhCsG,EACF,IAAK,IAAIY,EAAI,EAAGC,EAAKb,EAAU9M,OAAQ0N,EAAIC,EAAID,IAC7CF,EAAeE,GAAGhI,KAAKoH,EAAUY,GAAGD,GAAYjH,GAGrD,CAhBD,CAmBF+F,EAAYe,GAAQb,EACpBI,EAAWnH,KAAK+G,GAChBA,GACD,CACF,CAID,IAAMmB,EAAS/N,EAASgO,QACxB,IAASvM,EAAI,EAAGC,EAAImL,EAAe1M,OAAQsB,EAAIC,EAAGD,IAAK,CACjDvN,EAAO2Y,EAAepL,GAA1B,IACIwM,EAAejO,EAASkM,aAAahY,GAErCga,EAAS,IAAID,EAAanH,MAAM3F,YAAY2L,EAAW5Y,IACvDiX,EAAY,IAAIhE,EAAAA,gBAAgB+G,EAAQD,EAAajD,SAAUiD,EAAahD,YAKhF,GAHA8C,EAAOpN,aAAazM,EAAMiX,GAGtBjX,KAAQ6Y,EACV,IAASnL,EAAI,EAAGA,EAAImL,EAAiB7Y,GAAMiM,OAAQyB,IAAK,CACtD,IAAIuM,EAAoBnO,EAAS8J,gBAAgB5V,GAAM0N,GAGnDwM,GADAF,EAAS,IAAIC,EAAkBrH,MAAM3F,YAAY4L,EAAiB7Y,GAAM0N,IACvD,IAAIuF,EAAAA,gBACvB+G,EACAC,EAAkBnD,SAClBmD,EAAkBlD,aAEpB8C,EAAOjE,gBAAgB5V,GAAM0N,GAAKwM,CACnC,CAEJ,CAMD,OAFAL,EAAOtD,SAASuC,GAETe,CACR,EAODM,oBAAqB,SAAUrO,EAAUsO,GACvC,GAAIA,IAAaC,EAAAA,kBAIf,OAHA9J,QAAQ+J,KACN,2FAEKxO,EAGT,GAAIsO,IAAaG,EAAAA,qBAAuBH,IAAaI,EAAAA,sBAAuB,CAC1E,IAAI/H,EAAQ3G,EAASoM,WAIrB,GAAc,OAAVzF,EAAgB,CAClB,IAAIE,EAAU,GAEVtL,EAAWyE,EAASkM,aAAa,YAErC,QAAiBtS,IAAb2B,EAWF,OAHAkJ,QAAQG,MACN,2GAEK5E,EAVP,IAAK,IAAIyB,EAAI,EAAGA,EAAIlG,EAASgF,MAAOkB,IAClCoF,EAAQhB,KAAKpE,GAGfzB,EAASyK,SAAS5D,GAClBF,EAAQ3G,EAASoM,UAOpB,CAID,IAAIuC,EAAoBhI,EAAMpG,MAAQ,EAClCyM,EAAa,GAEjB,GAAIsB,IAAaG,EAAAA,oBAGf,IAAShN,EAAI,EAAGA,GAAKkN,EAAmBlN,IACtCuL,EAAWnH,KAAKc,EAAMnE,KAAK,IAC3BwK,EAAWnH,KAAKc,EAAMnE,KAAKf,IAC3BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,SAKjC,IAASA,EAAI,EAAGA,EAAIkN,EAAmBlN,IACjCA,EAAI,GAAM,GACZuL,EAAWnH,KAAKc,EAAMnE,KAAKf,IAC3BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,MAE/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,KAK7BuL,EAAW7M,OAAS,IAAMwO,GAC5BlK,QAAQG,MACN,oGAMJ,IAAIgK,EAAc5O,EAASgO,QAI3B,OAHAY,EAAYnE,SAASuC,GACrB4B,EAAYC,cAELD,CACR,CAGD,OADAnK,QAAQG,MAAM,sEAAuE0J,GAC9EtO,CACR,G,uOClnBiB,WAClB,SAAS8O,EAAWC,GAClBC,EAAAA,OAAAA,KAAY1V,KAAMyV,GAElBzV,KAAK2V,YAAc,KACnB3V,KAAK4V,UAAY,IAClB,CA0KD,SAASC,IACP,IAAIC,EAAU,CAAC,EAEf,MAAO,CACLC,IAAK,SAAU/J,GACb,OAAO8J,EAAQ9J,EAChB,EAEDrJ,IAAK,SAAUqJ,EAAK3F,GAClByP,EAAQ9J,GAAO3F,CAChB,EAED0D,OAAQ,SAAUiC,UACT8J,EAAQ9J,EAChB,EAEDgK,UAAW,WACTF,EAAU,CAAC,CACZ,EAEJ,CA5LDN,EAAW9N,UAAYC,OAAOsO,OAAOtO,OAAOC,OAAO8N,EAAAA,OAAAA,WAAmB,CACpE7N,YAAa2N,EAEb7I,KAAM,SAAUuJ,EAAKC,EAAQC,EAAYC,GACvC,IAEIC,EAFAnM,EAAQnK,KAKVsW,EADwB,KAAtBtW,KAAKsW,aACQtW,KAAKsW,aACG,KAAdtW,KAAKxF,KACCwF,KAAKxF,KAEL+b,EAAAA,YAAAA,eAA2BL,GAM5C/L,EAAMsL,QAAQe,UAAUN,GAExB,IAAIO,EAAW,SAAU7X,GACnByX,EACFA,EAAQzX,GAERuM,QAAQG,MAAM1M,GAGhBuL,EAAMsL,QAAQiB,UAAUR,GACxB/L,EAAMsL,QAAQkB,QAAQT,EACvB,EAEGhK,EAAS,IAAI0K,EAAAA,WAAWzM,EAAMsL,SAElCvJ,EAAOE,QAAQpM,KAAKxF,MACpB0R,EAAO2K,gBAAgB,eAEG,oBAAtB1M,EAAM2M,aACR5K,EAAO6K,oBAAmB,GAG5B7K,EAAOS,KACLuJ,GACA,SAAUc,GACR,IACE7M,EAAM8M,MACJD,EACAV,GACA,SAAUY,GACRf,EAAOe,GAEP/M,EAAMsL,QAAQkB,QAAQT,EACvB,GACDO,EAIH,CAFC,MAAO7X,GACP6X,EAAS7X,EACV,CACF,GACDwX,EACAK,EAEH,EAEDU,eAAgB,SAAUxB,GAExB,OADA3V,KAAK2V,YAAcA,EACZ3V,IACR,EAEDoX,aAAc,SAAUxB,GAEtB,OADA5V,KAAK4V,UAAYA,EACV5V,IACR,EAEDiX,MAAO,SAAUD,EAAMxc,EAAM2b,EAAQE,GACnC,IAAIgB,EACAC,EAAa,CAAC,EAElB,GAAoB,iBAATN,EACTK,EAAUL,OAIV,GAFYT,EAAAA,YAAAA,WAAuB,IAAIgB,WAAWP,EAAM,EAAG,MAE7CQ,EAA+B,CAC3C,IACEF,EAAWG,EAAWC,iBAAmB,IAAIC,EAAoBX,EAIlE,CAHC,MAAO1L,GAEP,YADI+K,GAASA,EAAQ/K,GAEtB,CAED+L,EAAUC,EAAWG,EAAWC,iBAAiBL,OAClD,MACCA,EAAUd,EAAAA,YAAAA,WAAuB,IAAIgB,WAAWP,IAIpD,IAAIY,EAAOC,KAAKZ,MAAMI,GAEtB,QAAmB/W,IAAfsX,EAAKE,OAAuBF,EAAKE,MAAMC,QAAQ,GAAK,EAClD1B,GACFA,EACE,IAAItJ,MAAM,gFAHhB,CAQA,GAAI6K,EAAKI,eACP,IAAK,IAAI7P,EAAI,EAAGA,EAAIyP,EAAKI,eAAenR,SAAUsB,EAAG,CACnD,IAAI8P,EAAgBL,EAAKI,eAAe7P,GACpC+P,EAAqBN,EAAKM,oBAAsB,GAEpD,OAAQD,GACN,KAAKR,EAAWU,oBACdb,EAAWW,GAAiB,IAAIG,EAAoBR,GACpD,MAEF,KAAKH,EAAWY,wBACdf,EAAWW,GAAiB,IAAIK,EAChC,MAEF,KAAKb,EAAWc,oBACdjB,EAAWW,GAAiB,IAAIO,EAChC,MAEF,KAAKf,EAAWgB,sCACdnB,EAAWW,GAAiB,IAAIS,EAChC,MAEF,KAAKjB,EAAWkB,2BACdrB,EAAWW,GAAiB,IAAIW,EAC9BhB,EACA5X,KAAK2V,aAEP,MAEF,KAAK8B,EAAWoB,iBACdvB,EAAWW,GAAiB,IAAIa,EAAwB9Y,KAAK4V,WAC7D,MAEF,KAAK6B,EAAWsB,sBACdzB,EAAWW,GAAiB,IAAIe,EAChC,MAEF,KAAKvB,EAAWwB,sBACd3B,EAAWW,GAAiB,IAAIiB,EAChC,MAEF,QACMhB,EAAmBiB,QAAQlB,IAAkB,GAC/C9M,QAAQ+J,KAAK,wCAA0C+C,EAAgB,MAG9E,CAGU,IAAImB,EAAWxB,EAAMN,EAAY,CAC5C9c,KAAMA,GAAQwF,KAAKsW,cAAgB,GACnCQ,YAAa9W,KAAK8W,YAClBrB,QAASzV,KAAKyV,UAGTwB,MAAMd,EAAQE,EAzDpB,CA0DF,IA+BH,IAAIoB,EAAa,CACfC,gBAAiB,kBACjBiB,2BAA4B,6BAC5BR,oBAAqB,sBACrBE,wBAAyB,0BACzBI,sCAAuC,sCACvCF,oBAAqB,sBACrBQ,sBAAuB,wBACvBE,sBAAuB,wBACvBJ,iBAAkB,oBASpB,SAASC,EAAwBlD,GAC/B,IAAKA,EACH,MAAM,IAAI7I,MACR,iFAIJ/M,KAAKpF,KAAO6c,EAAWoB,iBACvB7Y,KAAK4V,UAAYA,CAClB,CAOD,SAASwC,EAAoBR,GAC3B5X,KAAKpF,KAAO6c,EAAWU,oBAEvB,IAAIkB,EAAazB,EAAKN,YAAcM,EAAKN,WAAWG,EAAWU,sBAAyB,CAAC,EACzFnY,KAAKsZ,UAAYD,EAAUE,QAAU,EACtC,CA4DD,SAASf,IACPxY,KAAKpF,KAAO6c,EAAWc,mBACxB,CAyCD,SAASD,IACPtY,KAAKpF,KAAO6c,EAAWY,uBACxB,CAvGDD,EAAoB1Q,UAAU8R,UAAY,SAAUC,GAClD,IACIC,EADAC,EAAW3Z,KAAKsZ,UAAUG,GAG1Bte,EAAQ,IAAIye,EAAAA,MAAM,eACCtZ,IAAnBqZ,EAASxe,OAAqBA,EAAMsU,UAAUkK,EAASxe,OAE3D,IAAI0e,OAA2BvZ,IAAnBqZ,EAASE,MAAsBF,EAASE,MAAQ,EAE5D,OAAQF,EAASrf,MACf,IAAK,eACHof,EAAY,IAAII,EAAAA,iBAAiB3e,IACvB4B,OAAOkF,SAASC,IAAI,EAAG,GAAI,GACrCwX,EAAU/W,IAAI+W,EAAU3c,QACxB,MAEF,IAAK,SACH2c,EAAY,IAAIK,EAAAA,WAAW5e,IACjB8C,SAAW4b,EACrB,MAEF,IAAK,QACHH,EAAY,IAAIM,EAAAA,UAAU7e,IAChB8C,SAAW4b,EAErBF,EAASM,KAAON,EAASM,MAAQ,CAAC,EAClCN,EAASM,KAAKC,oBACqB5Z,IAAjCqZ,EAASM,KAAKC,eAA+BP,EAASM,KAAKC,eAAiB,EAC9EP,EAASM,KAAKE,oBACqB7Z,IAAjCqZ,EAASM,KAAKE,eAA+BR,EAASM,KAAKE,eAAiB7d,KAAKC,GAAK,EACxFmd,EAAUU,MAAQT,EAASM,KAAKE,eAChCT,EAAUW,SAAW,EAAMV,EAASM,KAAKC,eAAiBP,EAASM,KAAKE,eACxET,EAAU3c,OAAOkF,SAASC,IAAI,EAAG,GAAI,GACrCwX,EAAU/W,IAAI+W,EAAU3c,QACxB,MAEF,QACE,MAAM,IAAIgQ,MAAM,6CAA+C4M,EAASrf,KAAO,MAanF,OARAof,EAAUzX,SAASC,IAAI,EAAG,EAAG,GAE7BwX,EAAUY,MAAQ,OAESha,IAAvBqZ,EAASrc,YAAyBoc,EAAUpc,UAAYqc,EAASrc,WAErEoc,EAAU9e,KAAO+e,EAAS/e,MAAQ,SAAW6e,EAEtCjN,QAAQC,QAAQiN,EACxB,EAWDlB,EAA4B9Q,UAAU6S,gBAAkB,WACtD,OAAOC,EAAAA,iBACR,EAEDhC,EAA4B9Q,UAAU+S,aAAe,SACnDC,EACAC,EACAC,GAEA,IAAIC,EAAU,GAEdH,EAAevf,MAAQ,IAAIye,EAAAA,MAAM,EAAK,EAAK,GAC3Cc,EAAejR,QAAU,EAEzB,IAAIqR,EAAoBH,EAAYI,qBAEpC,GAAID,EAAmB,CACrB,GAAIlH,MAAMoH,QAAQF,EAAkBG,iBAAkB,CACpD,IAAIzN,EAAQsN,EAAkBG,gBAE9BP,EAAevf,MAAMsU,UAAUjC,GAC/BkN,EAAejR,QAAU+D,EAAM,EAChC,MAE0ClN,IAAvCwa,EAAkBI,kBACpBL,EAAQtO,KACNqO,EAAOO,cAAcT,EAAgB,MAAOI,EAAkBI,kBAGnE,CAED,OAAO1O,QAAQ4O,IAAIP,EACpB,EAWDvC,EAAgC5Q,UAAU6S,gBAAkB,WAC1D,OAAOc,EAAAA,oBACR,EAED/C,EAAgC5Q,UAAU+S,aAAe,SACvDC,EACAC,EACAC,GAEA,IAAIC,EAAU,GAEVxB,EAAYsB,EAAYrD,WAAWtX,KAAKpF,MA0B5C,QAxBkC0F,IAA9B+Y,EAAUiC,kBACZZ,EAAea,UAAYlC,EAAUiC,sBAGJhb,IAA/B+Y,EAAUmC,kBACZX,EAAQtO,KACNqO,EAAOO,cAAcT,EAAgB,eAAgBrB,EAAUmC,wBAIxBlb,IAAvC+Y,EAAUoC,2BACZf,EAAegB,mBAAqBrC,EAAUoC,+BAGJnb,IAAxC+Y,EAAUsC,2BACZd,EAAQtO,KACNqO,EAAOO,cACLT,EACA,wBACArB,EAAUsC,iCAKyBrb,IAArC+Y,EAAUuC,yBACZf,EAAQtO,KACNqO,EAAOO,cACLT,EACA,qBACArB,EAAUuC,8BAIiCtb,IAA3C+Y,EAAUuC,uBAAuBnhB,OAAqB,CACxD,IAAIA,EAAQ4e,EAAUuC,uBAAuBnhB,MAE7CigB,EAAemB,qBAAuB,IAAIvN,EAAAA,QAAQ7T,EAAOA,EAC1D,CAGH,OAAO+R,QAAQ4O,IAAIP,EACpB,EAGD,IAAIrD,EAAgC,OAEhCsE,EAAuC,WAAvCA,EAAwD,QAE5D,SAASnE,EAAoBX,GAC3BhX,KAAKpF,KAAO6c,EAAWC,gBACvB1X,KAAKqX,QAAU,KACfrX,KAAKO,KAAO,KAEZ,IAAIwb,EAAa,IAAIC,SAAShF,EAAM,EARD,IAgBnC,GANAhX,KAAKic,OAAS,CACZC,MAAO3F,EAAAA,YAAAA,WAAuB,IAAIgB,WAAWP,EAAKmF,MAAM,EAAG,KAC3DpE,QAASgE,EAAWK,UAAU,GAAG,GACjCvV,OAAQkV,EAAWK,UAAU,GAAG,IAG9Bpc,KAAKic,OAAOC,QAAU1E,EACxB,MAAM,IAAIzK,MAAM,qDACX,GAAI/M,KAAKic,OAAOlE,QAAU,EAC/B,MAAM,IAAIhL,MAAM,kDAMlB,IAHA,IAAIsP,EAAY,IAAIL,SAAShF,EAtBM,IAuB/BsF,EAAa,EAEVA,EAAaD,EAAUE,YAAY,CACxC,IAAIC,EAAcH,EAAUD,UAAUE,GAAY,GAClDA,GAAc,EAEd,IAAIG,EAAYJ,EAAUD,UAAUE,GAAY,GAGhD,GAFAA,GAAc,EAEVG,IAAcX,EAAmC,CACnD,IAAIY,EAAe,IAAInF,WACrBP,EAlC6B,GAmCIsF,EACjCE,GAEFxc,KAAKqX,QAAUd,EAAAA,YAAAA,WAAuBmG,EACvC,MAAM,GAAID,IAAcX,EAAkC,CACzD,IAAIa,EAxC2B,GAwCmBL,EAClDtc,KAAKO,KAAOyW,EAAKmF,MAAMQ,EAAYA,EAAaH,EACjD,CAIDF,GAAcE,CACf,CAED,GAAqB,OAAjBxc,KAAKqX,QACP,MAAM,IAAItK,MAAM,4CAEnB,CAOD,SAAS6L,EAAkChB,EAAMjC,GAC/C,IAAKA,EACH,MAAM,IAAI5I,MAAM,uDAGlB/M,KAAKpF,KAAO6c,EAAWkB,2BACvB3Y,KAAK4X,KAAOA,EACZ5X,KAAK2V,YAAcA,EACnB3V,KAAK2V,YAAYiH,SAClB,CAuDD,SAAS5D,IACPhZ,KAAKpF,KAAO6c,EAAWsB,qBACxB,CAwCD,SAAS8D,EAA2BC,GAClCC,EAAAA,qBAAAA,KAA0B/c,MAE1BA,KAAKgd,kCAAmC,EAGxC,IAAIC,EAA+B,CACjC,yBACA,mCACA,UACA/c,KAAK,MAEHgd,EAAiC,CACnC,2BACA,qCACA,UACAhd,KAAK,MAEHid,EAA2B,CAC7B,kCACA,yBACA,wDACA,mDACA,oFACA,yCACA,UACAjd,KAAK,MAEHkd,EAA6B,CAC/B,uCACA,2BACA,4DACA,kFACA,2CACA,UACAld,KAAK,MAEHmd,EAA6B,CAC/B,6BACA,4CACA,kFACA,+DACA,6HACA,mDACA,uEACA,gDACAnd,KAAK,MAEHod,EAAW,CACbC,SAAU,CAAEhS,OAAO,IAAIqO,EAAAA,OAAQnO,OAAO,WACtC+R,WAAY,CAAEjS,MAAO,GACrBkS,YAAa,CAAElS,MAAO,MACtBmS,cAAe,CAAEnS,MAAO,OAG1BvL,KAAK2d,eAAiBL,EAGtBtd,KAAK4d,gBAAkB,SAAUC,GAC/B,IAAK,IAAIC,KAAeR,EACtBO,EAAOP,SAASQ,GAAeR,EAASQ,GAG1CD,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,2BACA,0BAEFqS,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,2BACA,6BAEFqS,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,wCACAyR,GAEFY,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,wCACA0R,GAEFW,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,mCACA2R,GAEFU,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,mCACA4R,GAEFS,EAAOE,eAAiBF,EAAOE,eAAevS,QAC5C,sCACA6R,EAEH,EAGD1V,OAAOqW,iBAAiBhe,KAAM,CAC5Bud,SAAU,CACRxH,IAAK,WACH,OAAOuH,EAASC,SAAShS,KAC1B,EACDrJ,IAAK,SAAU4N,GACbwN,EAASC,SAAShS,MAAQuE,CAC3B,GAEH2N,YAAa,CACX1H,IAAK,WACH,OAAOuH,EAASG,YAAYlS,KAC7B,EACDrJ,IAAK,SAAU4N,GACbwN,EAASG,YAAYlS,MAAQuE,CAC9B,GAEH0N,WAAY,CACVzH,IAAK,WACH,OAAOuH,EAASE,WAAWjS,KAC5B,EACDrJ,IAAK,SAAU4N,GACbwN,EAASE,WAAWjS,MAAQuE,CAC7B,GAEH4N,cAAe,CACb3H,IAAK,WACH,OAAOuH,EAASI,cAAcnS,KAC/B,EACDrJ,IAAK,SAAU4N,GACbwN,EAASI,cAAcnS,MAAQuE,EAE3BA,GACF9P,KAAKie,QAAQC,kBAAoB,GAEjCle,KAAKie,QAAQE,iBAAmB,YAEzBne,KAAKie,QAAQE,wBACbne,KAAKie,QAAQC,kBAEvB,YAKEle,KAAKsD,iBACLtD,KAAKqD,iBACLrD,KAAKoe,oBACLpe,KAAKqe,aAEZre,KAAKse,UAAUxB,EAChB,CAkBD,SAASpE,IACP,MAAO,CACL9d,KAAM6c,EAAWgB,sCAEjB8F,yBAA0B,CACxB,QACA,MACA,WACA,oBACA,QACA,iBACA,WACA,oBACA,cACA,UACA,YACA,YACA,gBACA,kBACA,oBACA,mBACA,cACA,WACA,gBACA,aACA,WACA,SACA,kBACA,mBAGFhE,gBAAiB,WACf,OAAOsC,CACR,EAEDpC,aAAc,SAAUC,EAAgBC,EAAaC,GACnD,IAAI4D,EAAwB7D,EAAYrD,WAAWtX,KAAKpF,MAExD8f,EAAevf,MAAQ,IAAIye,EAAAA,MAAM,EAAK,EAAK,GAC3Cc,EAAejR,QAAU,EAEzB,IAAIoR,EAAU,GAEd,GAAIjH,MAAMoH,QAAQwD,EAAsBC,eAAgB,CACtD,IAAIjR,EAAQgR,EAAsBC,cAElC/D,EAAevf,MAAMsU,UAAUjC,GAC/BkN,EAAejR,QAAU+D,EAAM,EAChC,CAmBD,QAjB6ClN,IAAzCke,EAAsBE,gBACxB7D,EAAQtO,KACNqO,EAAOO,cAAcT,EAAgB,MAAO8D,EAAsBE,iBAItEhE,EAAetf,SAAW,IAAIwe,EAAAA,MAAM,EAAK,EAAK,GAC9Cc,EAAe8C,gBAC8Bld,IAA3Cke,EAAsBG,iBAClBH,EAAsBG,iBACtB,EACNjE,EAAe6C,SAAW,IAAI3D,EAAAA,MAAM,EAAK,EAAK,GAE1ChG,MAAMoH,QAAQwD,EAAsBI,iBACtClE,EAAe6C,SAAS9N,UAAU+O,EAAsBI,qBAGFte,IAApDke,EAAsBK,0BAAyC,CACjE,IAAIC,EAAkBN,EAAsBK,0BAC5ChE,EAAQtO,KAAKqO,EAAOO,cAAcT,EAAgB,gBAAiBoE,IACnEjE,EAAQtO,KAAKqO,EAAOO,cAAcT,EAAgB,cAAeoE,GAClE,CAED,OAAOtS,QAAQ4O,IAAIP,EACpB,EAEDkE,eAAgB,SAAUrE,GACxB,IAAIxf,EAAW,IAAI2hB,EAA2BnC,GA8C9C,OA7CAxf,EAASG,KAAM,EAEfH,EAASC,MAAQuf,EAAevf,MAEhCD,EAAS4Y,SAA6BxT,IAAvBoa,EAAe5G,IAAoB,KAAO4G,EAAe5G,IAExE5Y,EAAS8jB,SAAW,KACpB9jB,EAAS+jB,kBAAoB,EAE7B/jB,EAASgkB,WAAiC5e,IAAzBoa,EAAewE,MAAsB,KAAOxE,EAAewE,MAC5EhkB,EAASikB,eAAiB,EAE1BjkB,EAASE,SAAWsf,EAAetf,SACnCF,EAASkkB,kBAAoB,EAC7BlkB,EAASmkB,iBACwB/e,IAA/Boa,EAAe2E,YAA4B,KAAO3E,EAAe2E,YAEnEnkB,EAASokB,aAAqChf,IAA3Boa,EAAe4E,QAAwB,KAAO5E,EAAe4E,QAChFpkB,EAASqkB,UAAY,EAErBrkB,EAASskB,eACsBlf,IAA7Boa,EAAe8E,UAA0B,KAAO9E,EAAe8E,UACjEtkB,EAASukB,cAAgBC,EAAAA,sBAErBhF,EAAeiF,cAAazkB,EAASykB,YAAcjF,EAAeiF,aAEtEzkB,EAAS0kB,gBAAkB,KAC3B1kB,EAAS2kB,kBAAoB,EAC7B3kB,EAAS4kB,iBAAmB,EAE5B5kB,EAASuiB,iBACwBnd,IAA/Boa,EAAe+C,YAA4B,KAAO/C,EAAe+C,YACnEviB,EAASqiB,SAAW7C,EAAe6C,SAEnCriB,EAASwiB,mBAC0Bpd,IAAjCoa,EAAegD,cAA8B,KAAOhD,EAAegD,cACrExiB,EAASsiB,WAAa9C,EAAe8C,WAErCtiB,EAAS6kB,SAAW,KAEpB7kB,EAAS8kB,YAAmC1f,IAA1Boa,EAAesF,OAAuB,KAAOtF,EAAesF,OAC9E9kB,EAAS+kB,gBAAkB,EAE3B/kB,EAASglB,gBAAkB,IAEpBhlB,CACR,EAEJ,CAOD,SAASge,IACPlZ,KAAKpF,KAAO6c,EAAWwB,qBACxB,CAQD,SAASkH,EAA2BC,EAAoBC,EAAcC,EAAYC,GAChFC,EAAAA,YAAAA,KAAiBxgB,KAAMogB,EAAoBC,EAAcC,EAAYC,EACtE,CAnZD3H,EAAkClR,UAAU+Y,gBAAkB,SAAUC,EAAW9F,GACjF,IAAIhD,EAAO5X,KAAK4X,KACZjC,EAAc3V,KAAK2V,YACnBgL,EAAkBD,EAAUpJ,WAAWtX,KAAKpF,MAAMgmB,WAClDC,EAAmBH,EAAUpJ,WAAWtX,KAAKpF,MAAMmM,WACnD+Z,EAAoB,CAAC,EACrBC,EAAyB,CAAC,EAC1BC,EAAmB,CAAC,EAExB,IAAK,IAAIC,KAAiBJ,EAAkB,CAC1C,IAAIK,EAAqBC,EAAWF,IAAkBA,EAAcG,cAEpEN,EAAkBI,GAAsBL,EAAiBI,EAC1D,CAED,IAAKA,KAAiBP,EAAU3Z,WAAY,CACtCma,EAAqBC,EAAWF,IAAkBA,EAAcG,cAEpE,QAAwC9gB,IAApCugB,EAAiBI,GAA8B,CACjD,IAAII,EAAczJ,EAAK0J,UAAUZ,EAAU3Z,WAAWka,IAClDM,EAAgBC,EAAsBH,EAAYE,eAEtDP,EAAiBE,GAAsBK,EACvCR,EAAuBG,IAAiD,IAA3BG,EAAY1P,UAC1D,CACF,CAED,OAAOiJ,EAAO6G,cAAc,aAAcd,GAAiB3T,MAAK,SAAU4T,GACxE,OAAO,IAAIpU,SAAQ,SAAUC,GAC3BkJ,EAAY+L,gBACVd,GACA,SAAUla,GACR,IAAK,IAAIua,KAAiBva,EAASK,WAAY,CAC7C,IAAI8K,EAAYnL,EAASK,WAAWka,GAChCtP,EAAaoP,EAAuBE,QAErB3gB,IAAfqR,IAA0BE,EAAUF,WAAaA,EACtD,CAEDlF,EAAQ/F,EACT,GACDoa,EACAE,EAEH,GACF,GACF,EAWDhI,EAA8BtR,UAAUia,cAAgB,SAAUjnB,EAASknB,GAuBzE,OAtBAlnB,EAAUA,EAAQga,aAEOpU,IAArBshB,EAAUjR,QACZjW,EAAQiW,OAAOlB,UAAUmS,EAAUjR,aAGVrQ,IAAvBshB,EAAU3d,WACZvJ,EAAQuJ,SAAW2d,EAAU3d,eAGP3D,IAApBshB,EAAUnnB,OACZC,EAAQmnB,OAAOpS,UAAUmS,EAAUnnB,YAGV6F,IAAvBshB,EAAUE,UACZ3W,QAAQ+J,KACN,wCAA0ClV,KAAKpF,KAAO,kCAI1DF,EAAQ2O,aAAc,EAEf3O,CACR,EAiKDmiB,EAA2BnV,UAAYC,OAAOC,OAAOmV,EAAAA,qBAAAA,WACrDF,EAA2BnV,UAAUG,YAAcgV,EAEnDA,EAA2BnV,UAAUgB,KAAO,SAAUqZ,GAUpD,OATAhF,EAAAA,qBAAAA,UAAAA,KAAAA,KAAyC/c,KAAM+hB,GAC/C/hB,KAAKyd,YAAcsE,EAAOtE,YAC1Bzd,KAAKud,SAAS7U,KAAKqZ,EAAOxE,UAC1Bvd,KAAK0d,cAAgBqE,EAAOrE,cAC5B1d,KAAKwd,WAAauE,EAAOvE,kBAClBxd,KAAKsD,iBACLtD,KAAKqD,iBACLrD,KAAKoe,oBACLpe,KAAKqe,aACLre,IACR,EAqJDmgB,EAA2BzY,UAAYC,OAAOC,OAAO4Y,EAAAA,YAAAA,WACrDL,EAA2BzY,UAAUG,YAAcsY,EAEnDA,EAA2BzY,UAAUsa,iBAAmB,SAAU3U,GAShE,IALA,IAAIoH,EAASzU,KAAKugB,aACdxb,EAAS/E,KAAKqgB,aACd4B,EAAYjiB,KAAKiiB,UACjBtR,EAAStD,EAAQ4U,EAAY,EAAIA,EAE5B9Z,EAAI,EAAGA,IAAM8Z,EAAW9Z,IAC/BsM,EAAOtM,GAAKpD,EAAO4L,EAASxI,GAG9B,OAAOsM,CACR,EAED0L,EAA2BzY,UAAUwa,aACnC/B,EAA2BzY,UAAUsa,iBAEvC7B,EAA2BzY,UAAUya,UACnChC,EAA2BzY,UAAUsa,iBAEvC7B,EAA2BzY,UAAU0a,aAAe,SAAUC,EAAIC,EAAIvT,EAAGwT,GAwBvE,IAvBA,IAAI9N,EAASzU,KAAKugB,aACdxb,EAAS/E,KAAKqgB,aACdrO,EAAShS,KAAKiiB,UAEdO,EAAmB,EAATxQ,EACVyQ,EAAmB,EAATzQ,EAEV0Q,EAAKH,EAAKD,EAEVK,GAAK5T,EAAIuT,GAAMI,EACfE,EAAKD,EAAIA,EACTE,EAAMD,EAAKD,EAEXG,EAAUT,EAAKI,EACfM,EAAUD,EAAUL,EAEpBO,GAAM,EAAIH,EAAM,EAAID,EACpBK,EAAKJ,EAAMD,EACXM,EAAK,EAAIF,EACTG,EAAKF,EAAKL,EAAKD,EAIVxa,EAAI,EAAGA,IAAM6J,EAAQ7J,IAAK,CACjC,IAAIib,EAAKre,EAAOge,EAAU5a,EAAI6J,GAC1BqR,EAAKte,EAAOge,EAAU5a,EAAIqa,GAAWE,EACrCY,EAAKve,EAAO+d,EAAU3a,EAAI6J,GAC1BuR,EAAKxe,EAAO+d,EAAU3a,GAAKua,EAE/BjO,EAAOtM,GAAK+a,EAAKE,EAAKD,EAAKE,EAAKL,EAAKM,EAAKL,EAAKM,CAChD,CAED,OAAO9O,CACR,EAQD,IAAI+O,EAWM,EAXNA,EAYK,EAZLA,EAaS,EAbTA,EAcU,EAdVA,EAeS,EAfTA,EAgBc,EAhBdA,EAiBY,EAKZhC,EAAwB,CAC1B,KAAMiC,UACN,KAAMlM,WACN,KAAMmM,WACN,KAAMC,YACN,KAAMC,YACN,KAAM9V,cAGJ+V,EAAgB,CAClB,KAAMC,EAAAA,cACN,KAAMC,EAAAA,aACN,KAAMC,EAAAA,2BACN,KAAMC,EAAAA,0BACN,KAAMC,EAAAA,0BACN,KAAMC,EAAAA,0BAGJC,EAAkB,CACpB,MAAOC,EAAAA,oBACP,MAAOC,EAAAA,uBACP,MAAOC,EAAAA,gBAGLC,EAAmB,CACrBC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,IAGJ5D,EAAa,CACf6D,SAAU,WACVC,OAAQ,SACRC,QAAS,UACTC,WAAY,KACZC,WAAY,MACZC,QAAS,QACTC,UAAW,aACXC,SAAU,aAGRC,EAAkB,CACpB/qB,MAAO,QACPgrB,YAAa,WACbxhB,SAAU,aACVyhB,QAAS,yBAGPC,EAAgB,CAClBC,iBAAatlB,EAEbulB,OAAQC,EAAAA,kBACRC,KAAMC,EAAAA,qBAGJC,EACM,SADNA,EAEI,OAFJA,EAGK,QAGLC,EAAoB,CACtB,YAAaC,EAAAA,WACb,aAAcC,EAAAA,WAKhB,SAASC,EAAWnQ,EAAK1b,GAEvB,MAAmB,iBAAR0b,GAA4B,KAARA,EAAmB,IAG9C,gBAAgBlH,KAAKxU,IAAS,MAAMwU,KAAKkH,KAE3C1b,EAAOA,EAAKgR,QAAQ,0BAA2B,OAI7C,mBAAmBwD,KAAKkH,IAGxB,gBAAgBlH,KAAKkH,IAGrB,aAAalH,KAAKkH,GANmBA,EASlC1b,EAAO0b,EACf,CAqBD,SAASoQ,EAA+BC,EAAiBlgB,EAAQmgB,GAG/D,IAAK,IAAI5rB,KAAQ4rB,EAAUlP,gBACKhX,IAA1BimB,EAAgB3rB,KAClByL,EAAOyK,SAAS2V,eAAiBpgB,EAAOyK,SAAS2V,gBAAkB,CAAC,EACpEpgB,EAAOyK,SAAS2V,eAAe7rB,GAAQ4rB,EAAUlP,WAAW1c,GAGjE,CAMD,SAAS8rB,EAAuBrgB,EAAQsgB,QACfrmB,IAAnBqmB,EAAQC,SACoB,WAA1B,EAAOD,EAAQC,QACjBjf,OAAOsO,OAAO5P,EAAOyK,SAAU6V,EAAQC,QAEvCzb,QAAQ+J,KAAK,sDAAwDyR,EAAQC,QAGlF,CAqED,SAASC,EAAmB/rB,EAAMgsB,GAGhC,GAFAhsB,EAAK+rB,0BAEmBvmB,IAApBwmB,EAAQpB,QACV,IAAK,IAAIvd,EAAI,EAAGwG,EAAKmY,EAAQpB,QAAQ7e,OAAQsB,EAAIwG,EAAIxG,IACnDrN,EAAKisB,sBAAsB5e,GAAK2e,EAAQpB,QAAQvd,GAKpD,GAAI2e,EAAQF,QAAUhT,MAAMoH,QAAQ8L,EAAQF,OAAOI,aAAc,CAC/D,IAAIA,EAAcF,EAAQF,OAAOI,YAEjC,GAAIlsB,EAAKisB,sBAAsBlgB,SAAWmgB,EAAYngB,OAAQ,CAC5D/L,EAAKmsB,sBAAwB,CAAC,EAE9B,IAAS9e,EAAI,EAAGwG,EAAKqY,EAAYngB,OAAQsB,EAAIwG,EAAIxG,IAC/CrN,EAAKmsB,sBAAsBD,EAAY7e,IAAMA,CAEhD,MACCgD,QAAQ+J,KAAK,uEAEhB,CACF,CA2BD,SAASgS,EAAoBngB,GAK3B,IAJA,IAAIogB,EAAgB,GAEhBla,EAAOtF,OAAOsF,KAAKlG,GAAYqgB,OAE1Bjf,EAAI,EAAGwG,EAAK1B,EAAKpG,OAAQsB,EAAIwG,EAAIxG,IACxCgf,GAAiBla,EAAK9E,GAAK,IAAMpB,EAAWkG,EAAK9E,IAAM,IAGzD,OAAOgf,CACR,CAID,SAAS/N,EAAWxB,EAAMN,EAAY+P,GACpCrnB,KAAK4X,KAAOA,GAAQ,CAAC,EACrB5X,KAAKsX,WAAaA,GAAc,CAAC,EACjCtX,KAAKqnB,QAAUA,GAAW,CAAC,EAG3BrnB,KAAKsnB,MAAQ,IAAIzR,EAGjB7V,KAAKunB,eAAiB,CAAC,EAEvBvnB,KAAKwnB,cAAgB,IAAIC,EAAAA,cAAcznB,KAAKqnB,QAAQ5R,SACpDzV,KAAKwnB,cAAcE,eAAe1nB,KAAKqnB,QAAQvQ,aAE/C9W,KAAK2nB,WAAa,IAAI/Q,EAAAA,WAAW5W,KAAKqnB,QAAQ5R,SAC9CzV,KAAK2nB,WAAW9Q,gBAAgB,eAEC,oBAA7B7W,KAAKqnB,QAAQvQ,aACf9W,KAAK2nB,WAAW5Q,oBAAmB,EAEtC,CA60BD,SAAS6Q,EAAuBlhB,EAAUmhB,EAAcjN,GACtD,IAAI7T,EAAa8gB,EAAa9gB,WAE1B8T,EAAU,GAEd,SAASiN,EAAwBC,EAAe9G,GAC9C,OAAOrG,EAAO6G,cAAc,WAAYsG,GAAe/a,MAAK,SAAUgb,GACpEthB,EAASW,aAAa4Z,EAAe+G,EACtC,GACF,CAED,IAAK,IAAIC,KAAqBlhB,EAAY,CACxC,IAAIma,EAAqBC,EAAW8G,IAAsBA,EAAkB7G,cAGxEF,KAAsBxa,EAASK,YAEnC8T,EAAQtO,KAAKub,EAAwB/gB,EAAWkhB,GAAoB/G,GACrE,CAED,QAA6B5gB,IAAzBunB,EAAata,UAA0B7G,EAAS2G,MAAO,CACzD,IAAI2a,EAAWpN,EACZ6G,cAAc,WAAYoG,EAAata,SACvCP,MAAK,SAAUgb,GACdthB,EAASyK,SAAS6W,EACnB,IAEHnN,EAAQtO,KAAKyb,EACd,CAMD,OAJAtB,EAAuBhgB,EAAUmhB,GA3GnC,SAAuBnhB,EAAUmhB,EAAcjN,GAC7C,IAAI7T,EAAa8gB,EAAa9gB,WAE1BmhB,EAAM,IAAIC,EAAAA,KAEd,QAA4B7nB,IAAxByG,EAAWie,SAAf,CACE,IAEIoD,GAFAJ,EAAWpN,EAAOhD,KAAK0J,UAAUva,EAAWie,WAE7BoD,IACfnV,EAAM+U,EAAS/U,IAInB,QAAY3S,IAAR8nB,QAA6B9nB,IAAR2S,EAAzB,CACEiV,EAAIhmB,IAAI,IAAI6D,EAAAA,QAAQqiB,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAAK,IAAIriB,EAAAA,QAAQkN,EAAI,GAAIA,EAAI,GAAIA,EAAI,KAUjF,IAAIoV,EAAUR,EAAaQ,QAE3B,QAAgB/nB,IAAZ+nB,EAAuB,CAIzB,IAHA,IAAIC,EAAkB,IAAIviB,EAAAA,QACtBwiB,EAAS,IAAIxiB,EAAAA,QAERoC,EAAI,EAAGwG,EAAK0Z,EAAQxhB,OAAQsB,EAAIwG,EAAIxG,IAAK,CAChD,IAGM6f,EAHFjrB,EAASsrB,EAAQlgB,GAErB,QAAwB7H,IAApBvD,EAAOioB,SAELoD,GADAJ,EAAWpN,EAAOhD,KAAK0J,UAAUvkB,EAAOioB,WACzBoD,IACfnV,EAAM+U,EAAS/U,SAIP3S,IAAR8nB,QAA6B9nB,IAAR2S,GAEvBsV,EAAOC,KAAKlsB,KAAK2W,IAAI3W,KAAKmsB,IAAIL,EAAI,IAAK9rB,KAAKmsB,IAAIxV,EAAI,MACpDsV,EAAOG,KAAKpsB,KAAK2W,IAAI3W,KAAKmsB,IAAIL,EAAI,IAAK9rB,KAAKmsB,IAAIxV,EAAI,MACpDsV,EAAOI,KAAKrsB,KAAK2W,IAAI3W,KAAKmsB,IAAIL,EAAI,IAAK9rB,KAAKmsB,IAAIxV,EAAI,MAMpDqV,EAAgBrV,IAAIsV,IAEpBpd,QAAQ+J,KAAK,sEAGlB,CAGDgT,EAAIU,eAAeN,EACpB,CAED5hB,EAASmiB,YAAcX,EAEvB,IAAIY,EAAS,IAAIC,EAAAA,OAEjBb,EAAIc,UAAUF,EAAOG,QACrBH,EAAO9kB,OAASkkB,EAAIE,IAAIc,WAAWhB,EAAIjV,KAAO,EAE9CvM,EAASyiB,eAAiBL,CAjDvB,MAHC3d,QAAQ+J,KAAK,sEAMhB,CA+CF,CAwCCkU,CAAc1iB,EAAUmhB,EAAcjN,GAE/BpO,QAAQ4O,IAAIP,GAAS7N,MAAK,WAC/B,YAAgC1M,IAAzBunB,EAAaQ,QA//BxB,SAAyB3hB,EAAU2hB,EAASzN,GAI1C,IAHA,IAAIyO,GAAmB,EACnBC,GAAiB,EAEZnhB,EAAI,EAAGwG,EAAK0Z,EAAQxhB,OAAQsB,EAAIwG,SAGfrO,KAFpBvD,EAASsrB,EAAQlgB,IAEV6c,WAAwBqE,GAAmB,QAChC/oB,IAAlBvD,EAAOkoB,SAAsBqE,GAAiB,IAE9CD,IAAoBC,GANmBnhB,KAS7C,IAAKkhB,IAAqBC,EAAgB,OAAO9c,QAAQC,QAAQ/F,GAEjE,IAAI6iB,EAA2B,GAC3BC,EAAyB,GAE7B,IAASrhB,EAAI,EAAGwG,EAAK0Z,EAAQxhB,OAAQsB,EAAIwG,EAAIxG,IAAK,CAChD,IAAIpL,EAASsrB,EAAQlgB,GAErB,GAAIkhB,EAAkB,CACpB,IAAII,OACsBnpB,IAApBvD,EAAOioB,SACHpK,EAAO6G,cAAc,WAAY1kB,EAAOioB,UACxCte,EAASK,WAAW9E,SAE9BsnB,EAAyBhd,KAAKkd,EAC/B,CAEGH,IACEG,OACoBnpB,IAAlBvD,EAAOkoB,OACHrK,EAAO6G,cAAc,WAAY1kB,EAAOkoB,QACxCve,EAASK,WAAWC,OAE9BwiB,EAAuBjd,KAAKkd,GAE/B,CAED,OAAOjd,QAAQ4O,IAAI,CACjB5O,QAAQ4O,IAAImO,GACZ/c,QAAQ4O,IAAIoO,KACXxc,MAAK,SAAUsU,GAChB,IAAIoI,EAAiBpI,EAAU,GAC3BqI,EAAerI,EAAU,GAM7B,OAJI+H,IAAkB3iB,EAAS8J,gBAAgBvO,SAAWynB,GACtDJ,IAAgB5iB,EAAS8J,gBAAgBxJ,OAAS2iB,GACtDjjB,EAAS+J,sBAAuB,EAEzB/J,CACR,GACF,CA28BOkjB,CAAgBljB,EAAUmhB,EAAaQ,QAASzN,GAChDlU,CACL,GACF,CAOD,SAASqO,EAAoBrO,EAAUsO,GACrC,IAAI3H,EAAQ3G,EAASoM,WAIrB,GAAc,OAAVzF,EAAgB,CAClB,IAAIE,EAAU,GAEVtL,EAAWyE,EAASkM,aAAa,YAErC,QAAiBtS,IAAb2B,EAWF,OAHAkJ,QAAQG,MACN,kGAEK5E,EAVP,IAAK,IAAIyB,EAAI,EAAGA,EAAIlG,EAASgF,MAAOkB,IAClCoF,EAAQhB,KAAKpE,GAGfzB,EAASyK,SAAS5D,GAClBF,EAAQ3G,EAASoM,UAOpB,CAID,IAAIuC,EAAoBhI,EAAMpG,MAAQ,EAClCyM,EAAa,GAEjB,GAAIsB,IAAaG,EAAAA,oBAGf,IAAShN,EAAI,EAAGA,GAAKkN,EAAmBlN,IACtCuL,EAAWnH,KAAKc,EAAMnE,KAAK,IAC3BwK,EAAWnH,KAAKc,EAAMnE,KAAKf,IAC3BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,SAKjC,IAASA,EAAI,EAAGA,EAAIkN,EAAmBlN,IACjCA,EAAI,GAAM,GACZuL,EAAWnH,KAAKc,EAAMnE,KAAKf,IAC3BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,MAE/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,EAAI,IAC/BuL,EAAWnH,KAAKc,EAAMnE,KAAKf,KAK7BuL,EAAW7M,OAAS,IAAMwO,GAC5BlK,QAAQG,MACN,2FAMJ,IAAIgK,EAAc5O,EAASgO,QAG3B,OAFAY,EAAYnE,SAASuC,GAEd4B,CACR,CA37BD8D,EAAW1R,UAAUuP,MAAQ,SAAUd,EAAQE,GAC7C,IAAIuE,EAAS5a,KACT4X,EAAO5X,KAAK4X,KACZN,EAAatX,KAAKsX,WAGtBtX,KAAKsnB,MAAMtR,YAGXhW,KAAK6pB,WAELrd,QAAQ4O,IAAI,CACVpb,KAAK8pB,gBAAgB,SACrB9pB,KAAK8pB,gBAAgB,aACrB9pB,KAAK8pB,gBAAgB,YAEpB9c,MAAK,SAAU+c,GACd,IAAItV,EAAS,CACX/T,MAAOqpB,EAAa,GAAGnS,EAAKlX,OAAS,GACrCspB,OAAQD,EAAa,GACrBE,WAAYF,EAAa,GACzBG,QAASH,EAAa,GACtBjS,MAAOF,EAAKE,MACZ8C,OAAQA,EACR9J,SAAU,CAAC,GAGbwV,EAA+BhP,EAAY7C,EAAQmD,GAEnD8O,EAAuBjS,EAAQmD,GAE/BzB,EAAO1B,EACR,IArBH,MAsBS4B,EACV,EAKD+C,EAAW1R,UAAUmiB,SAAW,WAU9B,IATA,IAAIM,EAAWnqB,KAAK4X,KAAKwS,OAAS,GAC9BC,EAAWrqB,KAAK4X,KAAK0S,OAAS,GAC9BC,EAAWvqB,KAAK4X,KAAK4S,QAAU,GAE/BC,EAAiB,CAAC,EAClBC,EAAW,CAAC,EAIPC,EAAY,EAAGC,EAAaP,EAASxjB,OAAQ8jB,EAAYC,EAAYD,IAG5E,IAFA,IAAIE,EAASR,EAASM,GAAWE,OAExB1iB,EAAI,EAAGwG,EAAKkc,EAAOhkB,OAAQsB,EAAIwG,EAAIxG,IAC1CgiB,EAASU,EAAO1iB,IAAI2iB,QAAS,EASjC,IAAK,IAAIC,EAAY,EAAGC,EAAab,EAAStjB,OAAQkkB,EAAYC,EAAYD,IAAa,CACzF,IAAIE,EAAUd,EAASY,QAEFzqB,IAAjB2qB,EAAQnwB,YAC2BwF,IAAjCmqB,EAAeQ,EAAQnwB,QACzB2vB,EAAeQ,EAAQnwB,MAAQ4vB,EAASO,EAAQnwB,MAAQ,GAG1D2vB,EAAeQ,EAAQnwB,aAKFwF,IAAjB2qB,EAAQC,OACVX,EAASU,EAAQnwB,MAAMqwB,eAAgB,GAG5C,CAEDnrB,KAAK4X,KAAK6S,eAAiBA,EAC3BzqB,KAAK4X,KAAK8S,SAAWA,CACtB,EAQDtR,EAAW1R,UAAU+Z,cAAgB,SAAUnnB,EAAM+S,GACnD,IAAI+d,EAAW9wB,EAAO,IAAM+S,EACxBge,EAAarrB,KAAKsnB,MAAMvR,IAAIqV,GAEhC,IAAKC,EAAY,CACf,OAAQ/wB,GACN,IAAK,QACH+wB,EAAarrB,KAAKsrB,UAAUje,GAC5B,MAEF,IAAK,OACHge,EAAarrB,KAAKurB,SAASle,GAC3B,MAEF,IAAK,OACHge,EAAarrB,KAAKwrB,SAASne,GAC3B,MAEF,IAAK,WACHge,EAAarrB,KAAKyrB,aAAape,GAC/B,MAEF,IAAK,aACHge,EAAarrB,KAAK0rB,eAAere,GACjC,MAEF,IAAK,SACHge,EAAarrB,KAAK2rB,WAAWte,GAC7B,MAEF,IAAK,WACHge,EAAarrB,KAAK4rB,aAAave,GAC/B,MAEF,IAAK,UACHge,EAAarrB,KAAK6rB,YAAYxe,GAC9B,MAEF,IAAK,OACHge,EAAarrB,KAAK8rB,SAASze,GAC3B,MAEF,IAAK,YACHge,EAAarrB,KAAK+rB,cAAc1e,GAChC,MAEF,IAAK,SACHge,EAAarrB,KAAKgsB,WAAW3e,GAC7B,MAEF,IAAK,QACHge,EAAarrB,KAAKsX,WAAWG,EAAWU,qBAAqBqB,UAAUnM,GACvE,MAEF,QACE,MAAM,IAAIN,MAAM,iBAAmBzS,GAGvC0F,KAAKsnB,MAAM3kB,IAAIyoB,EAAUC,EAC1B,CAED,OAAOA,CACR,EAODjS,EAAW1R,UAAUoiB,gBAAkB,SAAUxvB,GAC/C,IAAIyvB,EAAe/pB,KAAKsnB,MAAMvR,IAAIzb,GAElC,IAAKyvB,EAAc,CACjB,IAAInP,EAAS5a,KACTisB,EAAOjsB,KAAK4X,KAAKtd,GAAiB,SAATA,EAAkB,KAAO,OAAS,GAE/DyvB,EAAevd,QAAQ4O,IACrB6Q,EAAKnY,KAAI,SAAUoY,EAAK7e,GACtB,OAAOuN,EAAO6G,cAAcnnB,EAAM+S,EACnC,KAGHrN,KAAKsnB,MAAM3kB,IAAIrI,EAAMyvB,EACtB,CAED,OAAOA,CACR,EAOD3Q,EAAW1R,UAAUikB,WAAa,SAAUQ,GAC1C,IAAIC,EAAYpsB,KAAK4X,KAAKyU,QAAQF,GAC9BjgB,EAASlM,KAAK2nB,WAElB,GAAIyE,EAAU9xB,MAA2B,gBAAnB8xB,EAAU9xB,KAC9B,MAAM,IAAIyS,MAAM,qBAAuBqf,EAAU9xB,KAAO,kCAI1D,QAAsBgG,IAAlB8rB,EAAUE,KAAqC,IAAhBH,EACjC,OAAO3f,QAAQC,QAAQzM,KAAKsX,WAAWG,EAAWC,iBAAiBnX,MAGrE,IAAI8mB,EAAUrnB,KAAKqnB,QAEnB,OAAO,IAAI7a,SAAQ,SAAUC,EAASC,GACpCR,EAAOS,KAAK0Z,EAAW+F,EAAUE,IAAKjF,EAAQ7sB,MAAOiS,OAASnM,GAAW,WACvEoM,EAAO,IAAIK,MAAM,4CAA8Cqf,EAAUE,IAAM,MAChF,GACF,GACF,EAODlT,EAAW1R,UAAUgkB,eAAiB,SAAU/K,GAC9C,IAAI4L,EAAgBvsB,KAAK4X,KAAK4U,YAAY7L,GAE1C,OAAO3gB,KAAKyhB,cAAc,SAAU8K,EAAc3X,QAAQ5H,MAAK,SAAU4H,GACvE,IAAI2H,EAAagQ,EAAchQ,YAAc,EACzCI,EAAa4P,EAAc5P,YAAc,EAC7C,OAAO/H,EAAOuH,MAAMQ,EAAYA,EAAaJ,EAC9C,GACF,EAODnD,EAAW1R,UAAU+jB,aAAe,SAAU1D,GAC5C,IAAInN,EAAS5a,KACT4X,EAAO5X,KAAK4X,KAEZyJ,EAAcrhB,KAAK4X,KAAK0J,UAAUyG,GAEtC,QAA+BznB,IAA3B+gB,EAAYT,iBAAmDtgB,IAAvB+gB,EAAYoL,OAItD,OAAOjgB,QAAQC,QAAQ,MAGzB,IAAIigB,EAAqB,GAiBzB,YAf+BpsB,IAA3B+gB,EAAYT,WACd8L,EAAmBngB,KAAKvM,KAAKyhB,cAAc,aAAcJ,EAAYT,aAErE8L,EAAmBngB,KAAK,WAGCjM,IAAvB+gB,EAAYoL,SACdC,EAAmBngB,KACjBvM,KAAKyhB,cAAc,aAAcJ,EAAYoL,OAAOlf,QAAQqT,aAE9D8L,EAAmBngB,KACjBvM,KAAKyhB,cAAc,aAAcJ,EAAYoL,OAAO1nB,OAAO6b,cAIxDpU,QAAQ4O,IAAIsR,GAAoB1f,MAAK,SAAUwf,GACpD,IAcIhf,EAAOmf,EAdP/L,EAAa4L,EAAY,GAEzB9a,EAAW8S,EAAiBnD,EAAY/mB,MACxCmX,EAAa+P,EAAsBH,EAAYE,eAG/CqL,EAAenb,EAAWoB,kBAC1Bga,EAAYD,EAAelb,EAC3BiL,EAAa0E,EAAY1E,YAAc,EACvCmQ,OAC6BxsB,IAA3B+gB,EAAYT,WACRhJ,EAAK4U,YAAYnL,EAAYT,YAAYkM,gBACzCxsB,EACNqR,GAAwC,IAA3B0P,EAAY1P,WAI7B,GAAImb,GAAcA,IAAeD,EAAW,CAG1C,IAAIE,EAAUzwB,KAAK0wB,MAAMrQ,EAAamQ,GAClCG,EACE,qBACA5L,EAAYT,WACZ,IACAS,EAAYE,cACZ,IACAwL,EACA,IACA1L,EAAYpa,MACdimB,EAAKtS,EAAO0M,MAAMvR,IAAIkX,GAErBC,IACH1f,EAAQ,IAAIiE,EACVmP,EACAmM,EAAUD,EACTzL,EAAYpa,MAAQ6lB,EAAcF,GAIrCM,EAAK,IAAIhb,EAAAA,kBAAkB1E,EAAOsf,EAAaF,GAE/ChS,EAAO0M,MAAM3kB,IAAIsqB,EAAYC,IAG/BP,EAAkB,IAAIpa,EAAAA,2BACpB2a,EACAxb,EACCiL,EAAamQ,EAAcF,EAC5Bjb,EAEH,MAEGnE,EADiB,OAAfoT,EACM,IAAInP,EAAW4P,EAAYpa,MAAQyK,GAEnC,IAAID,EAAWmP,EAAYjE,EAAY0E,EAAYpa,MAAQyK,GAGrEib,EAAkB,IAAI9e,EAAAA,gBAAgBL,EAAOkE,EAAUC,GAIzD,QAA2BrR,IAAvB+gB,EAAYoL,OAAsB,CACpC,IAAIU,EAAkB3I,EAAiBC,OACnC2I,EAAoB5L,EAAsBH,EAAYoL,OAAOlf,QAAQgU,eAErE8L,EAAoBhM,EAAYoL,OAAOlf,QAAQoP,YAAc,EAC7D2Q,EAAmBjM,EAAYoL,OAAO1nB,OAAO4X,YAAc,EAE3D4Q,EAAgB,IAAIH,EACtBZ,EAAY,GACZa,EACAhM,EAAYoL,OAAOxlB,MAAQkmB,GAEzBK,EAAe,IAAI/b,EACrB+a,EAAY,GACZc,EACAjM,EAAYoL,OAAOxlB,MAAQyK,GAGV,OAAfkP,IAEF+L,EAAkB,IAAI9e,EAAAA,gBACpB8e,EAAgBnf,MAAM2O,QACtBwQ,EAAgBjb,SAChBib,EAAgBhb,aAIpB,IAAK,IAAIxJ,EAAI,EAAGwG,EAAK4e,EAAc1mB,OAAQsB,EAAIwG,EAAIxG,IAAK,CACtD,IAAIkF,EAAQkgB,EAAcplB,GAM1B,GAJAwkB,EAAgBnE,KAAKnb,EAAOmgB,EAAarlB,EAAIuJ,IACzCA,GAAY,GAAGib,EAAgBjE,KAAKrb,EAAOmgB,EAAarlB,EAAIuJ,EAAW,IACvEA,GAAY,GAAGib,EAAgBhE,KAAKtb,EAAOmgB,EAAarlB,EAAIuJ,EAAW,IACvEA,GAAY,GAAGib,EAAgBc,KAAKpgB,EAAOmgB,EAAarlB,EAAIuJ,EAAW,IACvEA,GAAY,EACd,MAAM,IAAI3E,MAAM,oEACnB,CACF,CAED,OAAO4f,CACR,GACF,EAODvT,EAAW1R,UAAUmkB,YAAc,SAAU6B,GAC3C,IAWI3L,EAXAnH,EAAS5a,KACT4X,EAAO5X,KAAK4X,KACZyP,EAAUrnB,KAAKqnB,QACfG,EAAgBxnB,KAAKwnB,cAErBmG,EAAMC,KAAKD,KAAOC,KAAKC,UAEvBC,EAAalW,EAAK7L,SAAS2hB,GAE3BK,EAAoBD,EAAWxW,YAAc,CAAC,EAU9C0W,GALFjM,EADEgM,EAAkBtW,EAAWoB,kBACtBjB,EAAKqW,OAAOF,EAAkBtW,EAAWoB,kBAAkBkJ,QAE3DnK,EAAKqW,OAAOH,EAAW/L,SAGXuK,IACnB4B,GAAc,EAalB,YAX0B5tB,IAAtByhB,EAAOnB,aAGToN,EAAYpT,EAAO6G,cAAc,aAAcM,EAAOnB,YAAY5T,MAAK,SAAU4T,GAC/EsN,GAAc,EACd,IAAIC,EAAO,IAAIhvB,KAAK,CAACyhB,GAAa,CAAEtmB,KAAMynB,EAAOqM,WAEjD,OADAJ,EAAYL,EAAIU,gBAAgBF,EAEjC,KAGI3hB,QAAQC,QAAQuhB,GACpBhhB,MAAK,SAAUghB,GAGd,IAAI9hB,EAASmb,EAAQ5R,QAAQ6Y,WAAWN,GAQxC,OANK9hB,IACHA,EAAS6hB,EAAkBtW,EAAWoB,kBAClC+B,EAAOtD,WAAWG,EAAWoB,kBAAkBjD,UAC/C4R,GAGC,IAAIhb,SAAQ,SAAUC,EAASC,GACpCR,EAAOS,KAAK0Z,EAAW2H,EAAW3G,EAAQ7sB,MAAOiS,OAASnM,EAAWoM,EACtE,GACF,IACAM,MAAK,SAAUtS,IAGM,IAAhBwzB,GACFP,EAAIY,gBAAgBP,GAGtBtzB,EAAQ8zB,OAAQ,EAEZV,EAAWlzB,OAAMF,EAAQE,KAAOkzB,EAAWlzB,MAG3CmnB,EAAOqM,YAAYlI,IACrBxrB,EAAQ+zB,OAASvI,EAAkBnE,EAAOqM,WAG5C,IACIM,GADW9W,EAAK+W,UAAY,CAAC,GACVb,EAAWY,UAAY,CAAC,EAO/C,OALAh0B,EAAQk0B,UAAY/K,EAAc6K,EAAQE,YAAc7K,EAAAA,aACxDrpB,EAAQm0B,UAAYhL,EAAc6K,EAAQG,YAAc1K,EAAAA,yBACxDzpB,EAAQo0B,MAAQ1K,EAAgBsK,EAAQI,QAAUvK,EAAAA,eAClD7pB,EAAQq0B,MAAQ3K,EAAgBsK,EAAQK,QAAUxK,EAAAA,eAE3C7pB,CACR,GACJ,EASD0e,EAAW1R,UAAUyT,cAAgB,SAAUT,EAAgBsU,EAASC,GACtE,IAAIrU,EAAS5a,KAEb,OAAOA,KAAKyhB,cAAc,UAAWwN,EAAO5hB,OAAOL,MAAK,SAAUtS,GAChE,IAAKA,EAAQw0B,oBACX,OAAQF,GACN,IAAK,QACL,IAAK,cACL,IAAK,eACL,IAAK,YACL,IAAK,eACHt0B,EAAQ+zB,OAASrI,EAAAA,UAqBvB,QAbsB9lB,IAApB2uB,EAAOnN,UACY,GAAnBmN,EAAOnN,UACO,UAAZkN,GAA0C,GAAnBC,EAAOnN,UAEhC3W,QAAQ+J,KACN,mCACA+Z,EAAOnN,SACP,gBACAkN,EACA,uBAIApU,EAAOtD,WAAWG,EAAWsB,uBAAwB,CACvD,IAAI6I,OACwBthB,IAAtB2uB,EAAO3X,WACH2X,EAAO3X,WAAWG,EAAWsB,4BAC7BzY,EAENshB,IACFlnB,EAAUkgB,EAAOtD,WAAWG,EAAWsB,uBAAuB4I,cAC5DjnB,EACAknB,GAGL,CAEDlH,EAAesU,GAAWt0B,CAC3B,GACF,EAUD0e,EAAW1R,UAAUynB,oBAAsB,SAAUr0B,GACnD,IAAI4L,EAAW5L,EAAK4L,SAChBxL,EAAWJ,EAAKI,SAEhBk0B,OAAoD9uB,IAAhCoG,EAASK,WAAW6G,QACxCyhB,OAAgD/uB,IAA9BoG,EAASK,WAAW5L,MACtCm0B,OAAgDhvB,IAA/BoG,EAASK,WAAWC,OACrCuoB,GAAqC,IAAvBz0B,EAAKqwB,cACnBqE,EAAkB7nB,OAAOsF,KAAKvG,EAAS8J,iBAAiB3J,OAAS,EACjE4oB,EAAkBD,QAAuDlvB,IAApCoG,EAAS8J,gBAAgBxJ,OAElE,GAAIlM,EAAK40B,SAAU,CACjB,IAAItE,EAAW,kBAAoBlwB,EAASy0B,KAExCC,EAAiB5vB,KAAKsnB,MAAMvR,IAAIqV,GAE/BwE,IACHA,EAAiB,IAAIC,EAAAA,eACrB7sB,EAAAA,SAAAA,UAAAA,KAAAA,KAA6B4sB,EAAgB10B,GAC7C00B,EAAez0B,MAAMuN,KAAKxN,EAASC,OACnCy0B,EAAe9b,IAAM5Y,EAAS4Y,IAC9B8b,EAAeE,iBAAkB,EAEjC9vB,KAAKsnB,MAAM3kB,IAAIyoB,EAAUwE,IAG3B10B,EAAW00B,CACZ,MAAM,GAAI90B,EAAKi1B,OAAQ,CAClB3E,EAAW,qBAAuBlwB,EAASy0B,KAA/C,IAEIK,EAAehwB,KAAKsnB,MAAMvR,IAAIqV,GAE7B4E,IACHA,EAAe,IAAIzoB,EAAAA,kBACnBvE,EAAAA,SAAAA,UAAAA,KAAAA,KAA6BgtB,EAAc90B,GAC3C80B,EAAa70B,MAAMuN,KAAKxN,EAASC,OAEjC6E,KAAKsnB,MAAM3kB,IAAIyoB,EAAU4E,IAG3B90B,EAAW80B,CACZ,CAGD,GAAIZ,GAAqBC,GAAmBC,GAAkBC,GAAeC,EAAiB,CACxFpE,EAAW,kBAAoBlwB,EAASy0B,KAAO,IAE/Cz0B,EAAS8hB,mCAAkCoO,GAAY,wBACvDmE,IAAanE,GAAY,aACzBgE,IAAmBhE,GAAY,oBAC/BiE,IAAiBjE,GAAY,kBAC7BkE,IAAgBlE,GAAY,iBAC5BoE,IAAiBpE,GAAY,kBAC7BqE,IAAiBrE,GAAY,kBAEjC,IAAI6E,EAAiBjwB,KAAKsnB,MAAMvR,IAAIqV,GAE/B6E,IACHA,EAAiB/0B,EAASwZ,QAEtB6a,IAAaU,EAAeC,UAAW,GACvCd,IAAmBa,EAAeE,gBAAiB,GACnDd,IAAiBY,EAAevkB,cAAe,GAC/C4jB,IAAgBW,EAAeG,aAAc,GAC7CZ,IAAiBS,EAAeI,cAAe,GAC/CZ,IAAiBQ,EAAetG,cAAe,GAEnD3pB,KAAKsnB,MAAM3kB,IAAIyoB,EAAU6E,IAG3B/0B,EAAW+0B,CACZ,CAKC/0B,EAASgkB,YACmB5e,IAA5BoG,EAASK,WAAWupB,UACOhwB,IAA3BoG,EAASK,WAAWuG,IAEpB5G,EAASW,aAAa,MAAOX,EAASK,WAAWuG,IAI/CpS,EAASykB,cAAgByP,IAC3Bl0B,EAASykB,YAAY1iB,GAAK/B,EAASykB,YAAY1iB,GAG7C/B,EAAS2gB,uBAAyBuT,IACpCl0B,EAAS2gB,qBAAqB5e,GAAK/B,EAAS2gB,qBAAqB5e,GAGnEnC,EAAKI,SAAWA,CACjB,EAODke,EAAW1R,UAAUkkB,aAAe,SAAU2E,GAC5C,IAKIC,EALA5V,EAAS5a,KACT4X,EAAO5X,KAAK4X,KACZN,EAAatX,KAAKsX,WAClBqD,EAAc/C,EAAK6Y,UAAUF,GAG7B7V,EAAiB,CAAC,EAClBgW,EAAqB/V,EAAYrD,YAAc,CAAC,EAEhDuD,EAAU,GAEd,GAAI6V,EAAmBjZ,EAAWgB,uCAAwC,CACxE,IAAIkY,EAAcrZ,EAAWG,EAAWgB,uCACxC+X,EAAeG,EAAYpW,kBAC3BM,EAAQtO,KAAKokB,EAAYlW,aAAaC,EAAgBC,EAAaC,GACpE,MAAM,GAAI8V,EAAmBjZ,EAAWc,qBAAsB,CAC7D,IAAIqY,EAAetZ,EAAWG,EAAWc,qBACzCiY,EAAeI,EAAarW,kBAC5BM,EAAQtO,KAAKqkB,EAAanW,aAAaC,EAAgBC,EAAaC,GACrE,KAAM,CAIL4V,EAAezT,EAAAA,qBAEf,IAAIjC,EAAoBH,EAAYI,sBAAwB,CAAC,EAK7D,GAHAL,EAAevf,MAAQ,IAAIye,EAAAA,MAAM,EAAK,EAAK,GAC3Cc,EAAejR,QAAU,EAErBmK,MAAMoH,QAAQF,EAAkBG,iBAAkB,CACpD,IAAIzN,EAAQsN,EAAkBG,gBAE9BP,EAAevf,MAAMsU,UAAUjC,GAC/BkN,EAAejR,QAAU+D,EAAM,EAChC,MAE0ClN,IAAvCwa,EAAkBI,kBACpBL,EAAQtO,KACNqO,EAAOO,cAAcT,EAAgB,MAAOI,EAAkBI,mBAIlER,EAAepX,eACwBhD,IAArCwa,EAAkB+V,eAA+B/V,EAAkB+V,eAAiB,EACtFnW,EAAerX,eACyB/C,IAAtCwa,EAAkBgW,gBAAgChW,EAAkBgW,gBAAkB,OAErCxwB,IAA/Cwa,EAAkBiW,2BACpBlW,EAAQtO,KACNqO,EAAOO,cACLT,EACA,eACAI,EAAkBiW,2BAGtBlW,EAAQtO,KACNqO,EAAOO,cACLT,EACA,eACAI,EAAkBiW,2BAIzB,EAE+B,IAA5BpW,EAAYqW,cACdtW,EAAexX,KAAO+tB,EAAAA,YAGxB,IAAIC,EAAYvW,EAAYuW,WAAajL,EA+CzC,GA7CIiL,IAAcjL,GAChBvL,EAAehR,aAAc,EAG7BgR,EAAeyW,YAAa,IAE5BzW,EAAehR,aAAc,EAEzBwnB,IAAcjL,IAChBvL,EAAe0W,eACe9wB,IAA5Bqa,EAAY0W,YAA4B1W,EAAY0W,YAAc,UAItC/wB,IAA9Bqa,EAAY2W,eAA+Bd,IAAiBhW,EAAAA,oBAC9DK,EAAQtO,KAAKqO,EAAOO,cAAcT,EAAgB,YAAaC,EAAY2W,gBAE3E5W,EAAeiF,YAAc,IAAIrR,EAAAA,QAAQ,EAAG,QAEJhO,IAApCqa,EAAY2W,cAAc72B,OAC5BigB,EAAeiF,YAAYzd,IACzByY,EAAY2W,cAAc72B,MAC1BkgB,EAAY2W,cAAc72B,aAKK6F,IAAjCqa,EAAY4W,kBAAkCf,IAAiBhW,EAAAA,oBACjEK,EAAQtO,KAAKqO,EAAOO,cAAcT,EAAgB,QAASC,EAAY4W,wBAEzBjxB,IAA1Cqa,EAAY4W,iBAAiBC,WAC/B9W,EAAeyE,eAAiBxE,EAAY4W,iBAAiBC,gBAI9BlxB,IAA/Bqa,EAAY8W,gBAAgCjB,IAAiBhW,EAAAA,oBAC/DE,EAAetf,UAAW,IAAIwe,EAAAA,OAAQnK,UAAUkL,EAAY8W,sBAG1BnxB,IAAhCqa,EAAY+W,iBAAiClB,IAAiBhW,EAAAA,mBAChEK,EAAQtO,KACNqO,EAAOO,cAAcT,EAAgB,cAAeC,EAAY+W,kBAIhEhB,EAAmBjZ,EAAWY,yBAA0B,CAC1D,IAAIsZ,EAAqBra,EAAWG,EAAWY,yBAC/CmY,EAAemB,EAAmBpX,kBAClCM,EAAQtO,KACNolB,EAAmBlX,aAAaC,EAAgB,CAAEpD,WAAYoZ,GAAsB9V,GAEvF,CAED,OAAOpO,QAAQ4O,IAAIP,GAAS7N,MAAK,WAC/B,IAAI9R,EAoBJ,OAjBEA,EADEs1B,IAAiB3T,EACRvF,EAAWG,EAAWgB,uCAAuCsG,eACtErE,GAGS,IAAI8V,EAAa9V,GAG1BC,EAAY/f,OAAMM,EAASN,KAAO+f,EAAY/f,MAG9CM,EAAS4Y,MAAK5Y,EAAS4Y,IAAI8d,SAAWC,EAAAA,cACtC32B,EAASmkB,cAAankB,EAASmkB,YAAYuS,SAAWC,EAAAA,cAE1DnL,EAAuBxrB,EAAUyf,GAE7BA,EAAYrD,YAAYgP,EAA+BhP,EAAYpc,EAAUyf,GAE1Ezf,CACR,GACF,EA8MDke,EAAW1R,UAAUoqB,eAAiB,SAAUC,GAC9C,IAAInX,EAAS5a,KACTsX,EAAatX,KAAKsX,WAClBgQ,EAAQtnB,KAAKunB,eAEjB,SAASyK,EAAqBtR,GAC5B,OAAOpJ,EAAWG,EAAWkB,4BAC1B8H,gBAAgBC,EAAW9F,GAC3B5N,MAAK,SAAUtG,GACd,OAAOkhB,EAAuBlhB,EAAUga,EAAW9F,EACpD,GACJ,CAID,IAFA,IA/gC0BiN,EACtBoK,EA8gCApX,EAAU,GAEL1S,EAAI,EAAGwG,EAAKojB,EAAWlrB,OAAQsB,EAAIwG,EAAIxG,IAAK,CACnD,IAUM+pB,EAVFxR,EAAYqR,EAAW5pB,GACvBijB,GAlhCF6G,aADsBpK,EAmhCUnH,GAjhCjBpJ,YAAcuQ,EAAavQ,WAAWG,EAAWkB,6BAKhE,SACAsZ,EAAerR,WACf,IACAqR,EAAe1kB,QACf,IACA2Z,EAAoB+K,EAAelrB,YAGnC8gB,EAAata,QACb,IACA2Z,EAAoBW,EAAa9gB,YACjC,IACA8gB,EAAasK,MAmgCXC,EAAS9K,EAAM8D,GAEnB,GAAIgH,EAEFvX,EAAQtO,KAAK6lB,EAAOC,cAMlBH,EAFExR,EAAUpJ,YAAcoJ,EAAUpJ,WAAWG,EAAWkB,4BAExCqZ,EAAqBtR,GAGrBkH,EAAuB,IAAI1gB,EAAAA,eAAkBwZ,EAAW9F,GAI5E0M,EAAM8D,GAAY,CAAE1K,UAAWA,EAAW2R,QAASH,GAEnDrX,EAAQtO,KAAK2lB,EAEhB,CAED,OAAO1lB,QAAQ4O,IAAIP,EACpB,EAODzB,EAAW1R,UAAU8jB,SAAW,SAAU8G,GASxC,IARA,IA3rC6BhL,EA2rCzB1M,EAAS5a,KAGT8mB,EAFO9mB,KAAK4X,KAEG4S,OAAO8H,GACtBP,EAAajL,EAAQiL,WAErBlX,EAAU,GAEL1S,EAAI,EAAGwG,EAAKojB,EAAWlrB,OAAQsB,EAAIwG,EAAIxG,IAAK,CACnD,IAAIjN,OAC6BoF,IAA3ByxB,EAAW5pB,GAAGjN,eApsCWoF,KADJgnB,EAssCKtnB,KAAKsnB,OArsC9B,kBACPA,EAAK,gBAAsB,IAAIvK,EAAAA,qBAAqB,CAClD5hB,MAAO,SACPC,SAAU,EACVkI,UAAW,EACXD,UAAW,EACXqG,aAAa,EACbF,WAAW,EACXtG,KAAMqvB,EAAAA,aAIHjL,EAAK,iBA0rCAtnB,KAAKyhB,cAAc,WAAYsQ,EAAW5pB,GAAGjN,UAEvD2f,EAAQtO,KAAKrR,EACd,CAID,OAFA2f,EAAQtO,KAAKqO,EAAOkX,eAAeC,IAE5BvlB,QAAQ4O,IAAIP,GAAS7N,MAAK,SAAUwlB,GAMzC,IALA,IAAI/B,EAAY+B,EAAQrW,MAAM,EAAGqW,EAAQ3rB,OAAS,GAC9CqJ,EAAasiB,EAAQA,EAAQ3rB,OAAS,GAEtC2jB,EAAS,GAEJriB,EAAI,EAAGwG,EAAKuB,EAAWrJ,OAAQsB,EAAIwG,EAAIxG,IAAK,CACnD,IAKIrN,EALA4L,EAAWwJ,EAAW/H,GACtBuY,EAAYqR,EAAW5pB,GAMvBjN,EAAWu1B,EAAUtoB,GAEzB,GACEuY,EAAUyR,OAAS3O,GACnB9C,EAAUyR,OAAS3O,GACnB9C,EAAUyR,OAAS3O,QACAljB,IAAnBogB,EAAUyR,MAQiB,KAL3Br3B,GAC4B,IAA1BgsB,EAAQqE,cACJ,IAAIsH,EAAAA,YAAY/rB,EAAUxL,GAC1B,IAAIw3B,EAAAA,KAAKhsB,EAAUxL,IAEhBiwB,eAA2BrwB,EAAK4L,SAASK,WAAW4rB,WAAWhhB,YAGtE7W,EAAK83B,uBAGHlS,EAAUyR,OAAS3O,EACrB1oB,EAAK4L,SAAWqO,EAAoBja,EAAK4L,SAAU0O,EAAAA,uBAC1CsL,EAAUyR,OAAS3O,IAC5B1oB,EAAK4L,SAAWqO,EAAoBja,EAAK4L,SAAUyO,EAAAA,2BAEhD,GAAIuL,EAAUyR,OAAS3O,EAC5B1oB,EAAO,IAAIwM,EAAAA,aAAaZ,EAAUxL,QAC7B,GAAIwlB,EAAUyR,OAAS3O,EAC5B1oB,EAAO,IAAI+3B,EAAAA,KAAKnsB,EAAUxL,QACrB,GAAIwlB,EAAUyR,OAAS3O,EAC5B1oB,EAAO,IAAIg4B,EAAAA,SAASpsB,EAAUxL,OACzB,IAAIwlB,EAAUyR,OAAS3O,EAG5B,MAAM,IAAIzW,MAAM,iDAAmD2T,EAAUyR,MAF7Er3B,EAAO,IAAIi4B,EAAAA,OAAOrsB,EAAUxL,EAG7B,CAEGyM,OAAOsF,KAAKnS,EAAK4L,SAAS8J,iBAAiB3J,OAAS,GACtDggB,EAAmB/rB,EAAMgsB,GAG3BhsB,EAAKF,KAAOksB,EAAQlsB,MAAQ,QAAU03B,EAElCpiB,EAAWrJ,OAAS,IAAG/L,EAAKF,MAAQ,IAAMuN,GAE9Cue,EAAuB5rB,EAAMgsB,GAE7BlM,EAAOuU,oBAAoBr0B,GAE3B0vB,EAAOje,KAAKzR,EACb,CAED,GAAsB,IAAlB0vB,EAAO3jB,OACT,OAAO2jB,EAAO,GAGhB,IAAI5b,EAAQ,IAAIokB,EAAAA,MAEhB,IAAS7qB,EAAI,EAAGwG,EAAK6b,EAAO3jB,OAAQsB,EAAIwG,EAAIxG,IAC1CyG,EAAMjM,IAAI6nB,EAAOriB,IAGnB,OAAOyG,CACR,GACF,EAODwK,EAAW1R,UAAUskB,WAAa,SAAUiH,GAC1C,IAAI13B,EACA23B,EAAYlzB,KAAK4X,KAAKsS,QAAQ+I,GAC9BnW,EAASoW,EAAUA,EAAU54B,MAEjC,GAAKwiB,EA2BL,MAtBuB,gBAAnBoW,EAAU54B,KACZiB,EAAS,IAAI43B,EAAAA,kBACXC,EAAAA,UAAAA,SAAmBtW,EAAOuW,MAC1BvW,EAAOwW,aAAe,EACtBxW,EAAOyW,OAAS,EAChBzW,EAAO0W,MAAQ,KAEW,iBAAnBN,EAAU54B,OACnBiB,EAAS,IAAIk4B,EAAAA,oBACV3W,EAAO4W,KACR5W,EAAO4W,KACP5W,EAAO6W,MACN7W,EAAO6W,KACR7W,EAAOyW,MACPzW,EAAO0W,OAIPN,EAAUt4B,OAAMW,EAAOX,KAAOs4B,EAAUt4B,MAE5C8rB,EAAuBnrB,EAAQ23B,GAExB1mB,QAAQC,QAAQlR,GA1BrB4P,QAAQ+J,KAAK,+CA2BhB,EAODkE,EAAW1R,UAAUokB,SAAW,SAAUnB,GACxC,IAAIiJ,EAAU5zB,KAAK4X,KAAK0S,MAAMK,GAE1BkJ,EAAY,CAAEhJ,OAAQ+I,EAAQ/I,QAElC,YAAoCvqB,IAAhCszB,EAAQE,oBACHtnB,QAAQC,QAAQonB,GAGlB7zB,KAAKyhB,cAAc,WAAYmS,EAAQE,qBAAqB9mB,MAAK,SAAUgb,GAGhF,OAFA6L,EAAUC,oBAAsB9L,EAEzB6L,CACR,GACF,EAODza,EAAW1R,UAAUqkB,cAAgB,SAAUgI,GAW7C,IAVA,IAEIC,EAFOh0B,KAAK4X,KAEQqS,WAAW8J,GAE/BE,EAAe,GACfC,EAAwB,GACxBC,EAAyB,GACzBC,EAAkB,GAClBC,EAAiB,GAEZlsB,EAAI,EAAGwG,EAAKqlB,EAAaM,SAASztB,OAAQsB,EAAIwG,EAAIxG,IAAK,CAC9D,IAAIosB,EAAUP,EAAaM,SAASnsB,GAChCumB,EAAUsF,EAAarF,SAAS4F,EAAQ7F,SACxC3xB,EAASw3B,EAAQx3B,OACjBnC,OAAuB0F,IAAhBvD,EAAOy3B,KAAqBz3B,EAAOy3B,KAAOz3B,EAAOuC,GACxDm1B,OAC8Bn0B,IAA5B0zB,EAAa5zB,WACT4zB,EAAa5zB,WAAWsuB,EAAQ+F,OAChC/F,EAAQ+F,MACdC,OAC8Bp0B,IAA5B0zB,EAAa5zB,WACT4zB,EAAa5zB,WAAWsuB,EAAQgG,QAChChG,EAAQgG,OAElBT,EAAa1nB,KAAKvM,KAAKyhB,cAAc,OAAQ7mB,IAC7Cs5B,EAAsB3nB,KAAKvM,KAAKyhB,cAAc,WAAYgT,IAC1DN,EAAuB5nB,KAAKvM,KAAKyhB,cAAc,WAAYiT,IAC3DN,EAAgB7nB,KAAKmiB,GACrB2F,EAAe9nB,KAAKxP,EACrB,CAED,OAAOyP,QAAQ4O,IAAI,CACjB5O,QAAQ4O,IAAI6Y,GACZznB,QAAQ4O,IAAI8Y,GACZ1nB,QAAQ4O,IAAI+Y,GACZ3nB,QAAQ4O,IAAIgZ,GACZ5nB,QAAQ4O,IAAIiZ,KACXrnB,MAAK,SAAU+c,GAShB,IARA,IAAIK,EAAQL,EAAa,GACrB4K,EAAiB5K,EAAa,GAC9B6K,EAAkB7K,EAAa,GAC/B4E,EAAW5E,EAAa,GACxB1B,EAAU0B,EAAa,GAEvB8K,EAAS,GAEJ1sB,EAAI,EAAGwG,EAAKyb,EAAMvjB,OAAQsB,EAAIwG,EAAIxG,IAAK,CAC9C,IAAIqsB,EAAOpK,EAAMjiB,GACb2sB,EAAgBH,EAAexsB,GAC/B4sB,EAAiBH,EAAgBzsB,GACjCumB,EAAUC,EAASxmB,GACnBpL,EAASsrB,EAAQlgB,GAErB,QAAa7H,IAATk0B,EAAJ,CAKA,IAAIQ,EAEJ,OALAR,EAAKS,eACLT,EAAK/sB,kBAAmB,EAIhB+d,EAAgBzoB,EAAOvC,OAC7B,KAAKgrB,EAAgBE,QACnBsP,EAAqBE,EAAAA,oBACrB,MAEF,KAAK1P,EAAgBvhB,SACnB+wB,EAAqBG,EAAAA,wBACrB,MAIF,QACEH,EAAqBI,EAAAA,oBAIzB,IAAIC,EAAab,EAAK55B,KAAO45B,EAAK55B,KAAO45B,EAAK7E,KAE1C2F,OAC4Bh1B,IAA1BouB,EAAQ4G,cACJ3P,EAAc+I,EAAQ4G,eACtBxP,EAAAA,kBAENkB,EAAc,GAEdxB,EAAgBzoB,EAAOvC,QAAUgrB,EAAgBE,QAEnD8O,EAAKe,UAAS,SAAUlvB,IACA,IAAlBA,EAAOmvB,QAAmBnvB,EAAO0gB,uBACnCC,EAAYza,KAAKlG,EAAOzL,KAAOyL,EAAOzL,KAAOyL,EAAOspB,KAEvD,IAED3I,EAAYza,KAAK8oB,GAGnB,IAAII,EAAcV,EAAevnB,MAEjC,GAAIunB,EAAepjB,WAAY,CAC7B,IAAIlX,EAEJ,GAAIg7B,EAAY5tB,cAAgB4b,UAC9BhpB,EAAQ,EAAI,SACP,GAAIg7B,EAAY5tB,cAAgB0P,WACrC9c,EAAQ,EAAI,SACP,GAAIg7B,EAAY5tB,aAAe6b,WACpCjpB,EAAQ,EAAI,UACP,IAAIg7B,EAAY5tB,cAAgB8b,YAGrC,MAAM,IAAI5W,MAAM,iEAFhBtS,EAAQ,EAAI,KAGb,CAID,IAFA,IAAIi7B,EAAS,IAAI5nB,aAAa2nB,EAAY5uB,QAEjCyB,EAAI,EAAGC,EAAKktB,EAAY5uB,OAAQyB,EAAIC,EAAID,IAC/CotB,EAAOptB,GAAKmtB,EAAYntB,GAAK7N,EAG/Bg7B,EAAcC,CACf,CAED,IAASptB,EAAI,EAAGC,EAAKye,EAAYngB,OAAQyB,EAAIC,EAAID,IAAK,CACpD,IAAIqtB,EAAQ,IAAIX,EACdhO,EAAY1e,GAAK,IAAMkd,EAAgBzoB,EAAOvC,MAC9Cs6B,EAActnB,MACdioB,EACAH,GAI4B,gBAA1B5G,EAAQ4G,gBACVK,EAAMC,kBAAoB,SAAiDnhB,GAKzE,OAAO,IAAI0L,EACTngB,KAAK61B,MACL71B,KAAK+E,OACL/E,KAAK81B,eAAiB,EACtBrhB,EAEH,EAGDkhB,EAAMC,kBAAkBG,2CAA4C,GAGtElB,EAAOtoB,KAAKopB,EACb,CAjG+B,CAkGjC,CAED,IAAI/6B,EAAOo5B,EAAap5B,KAAOo5B,EAAap5B,KAAO,aAAem5B,EAElE,OAAO,IAAIiC,EAAAA,cAAcp7B,OAAM0F,EAAWu0B,EAC3C,GACF,EAODzb,EAAW1R,UAAU6jB,SAAW,SAAUR,GACxC,IAUMlQ,EAVFjD,EAAO5X,KAAK4X,KACZN,EAAatX,KAAKsX,WAClBsD,EAAS5a,KAETyqB,EAAiB7S,EAAK6S,eACtBC,EAAW9S,EAAK8S,SAEhBO,EAAUrT,EAAKwS,MAAMW,GAEzB,OACMlQ,EAAU,QAEOva,IAAjB2qB,EAAQnwB,MACV+f,EAAQtO,KACNqO,EAAO6G,cAAc,OAAQwJ,EAAQnwB,MAAMkS,MAAK,SAAUlS,GACxD,IAAI05B,EAEJ,GAAI/J,EAAeQ,EAAQnwB,MAAQ,EAAG,CACpC,IAAIm7B,EAAcvL,EAASO,EAAQnwB,SAEnC05B,EAAO15B,EAAK4Z,SACP9Z,MAAQ,aAAeq7B,CAC7B,MACCzB,EAAO15B,EAcT,YAVwBwF,IAApB2qB,EAAQvF,SACV8O,EAAKe,UAAS,SAAUW,GACtB,GAAKA,EAAEV,OAEP,IAAK,IAAIrtB,EAAI,EAAGwG,EAAKsc,EAAQvF,QAAQ7e,OAAQsB,EAAIwG,EAAIxG,IACnD+tB,EAAEnP,sBAAsB5e,GAAK8iB,EAAQvF,QAAQvd,EAEhD,IAGIqsB,CACR,UAIkBl0B,IAAnB2qB,EAAQ1vB,QACVsf,EAAQtO,KAAKqO,EAAO6G,cAAc,SAAUwJ,EAAQ1vB,SAIpD0vB,EAAQ3T,YACR2T,EAAQ3T,WAAWG,EAAWU,2BAC+B7X,IAA7D2qB,EAAQ3T,WAAWG,EAAWU,qBAAqBge,OAEnDtb,EAAQtO,KACNqO,EAAO6G,cAAc,QAASwJ,EAAQ3T,WAAWG,EAAWU,qBAAqBge,QAI9E3pB,QAAQ4O,IAAIP,IAChB7N,MAAK,SAAU8I,GAClB,IAAI0e,EAaJ,IATEA,GADqB,IAAnBvJ,EAAQH,OACH,IAAIsL,EAAAA,KACFtgB,EAAQjP,OAAS,EACnB,IAAImsB,EAAAA,MACiB,IAAnBld,EAAQjP,OACViP,EAAQ,GAER,IAAIugB,EAAAA,YAGAvgB,EAAQ,GACnB,IAAK,IAAI3N,EAAI,EAAGwG,EAAKmH,EAAQjP,OAAQsB,EAAIwG,EAAIxG,IAC3CqsB,EAAK7xB,IAAImT,EAAQ3N,IAarB,GATI8iB,EAAQrwB,OACV45B,EAAK1jB,SAASlW,KAAOqwB,EAAQrwB,KAC7B45B,EAAK55B,KAAO07B,EAAAA,gBAAAA,iBAAiCrL,EAAQrwB,OAGvD8rB,EAAuB8N,EAAMvJ,GAEzBA,EAAQ3T,YAAYgP,EAA+BhP,EAAYkd,EAAMvJ,QAElD3qB,IAAnB2qB,EAAQsL,OAAsB,CAChC,IAAIA,EAAS,IAAIC,EAAAA,QACjBD,EAAO9mB,UAAUwb,EAAQsL,QACzB/B,EAAK7rB,aAAa4tB,EACnB,WAC6Bj2B,IAAxB2qB,EAAQxF,aACV+O,EAAKvyB,SAASwN,UAAUwb,EAAQxF,kBAGTnlB,IAArB2qB,EAAQhnB,UACVuwB,EAAKiC,WAAWhnB,UAAUwb,EAAQhnB,eAGd3D,IAAlB2qB,EAAQxwB,OACV+5B,EAAK/5B,MAAMgV,UAAUwb,EAAQxwB,OAIjC,OAAO+5B,CACR,GACF,EAODpb,EAAW1R,UAAU4jB,UAAa,WAGhC,SAASoL,EAAkBC,EAAQC,EAAchf,EAAMgD,GACrD,IAAIqQ,EAAUrT,EAAKwS,MAAMuM,GAEzB,OAAO/b,EACJ6G,cAAc,OAAQkV,GACtB3pB,MAAK,SAAUwnB,GACd,YAAqBl0B,IAAjB2qB,EAAQC,KAA2BsJ,EAMhC5Z,EACJ6G,cAAc,OAAQwJ,EAAQC,MAC9Ble,MAAK,SAAUke,GAKd,IAFA,IAAI2L,EAAgB,GAEX1uB,EAAI,EAAGwG,GAJhBklB,EAAY3I,GAImBL,OAAOhkB,OAAQsB,EAAIwG,EAAIxG,IACpD0uB,EAActqB,KAAKqO,EAAO6G,cAAc,OAAQoS,EAAUhJ,OAAO1iB,KAGnE,OAAOqE,QAAQ4O,IAAIyb,EACpB,IACA7pB,MAAK,SAAU8pB,GA+Bd,OA9BAtC,EAAKe,UAAS,SAAUz6B,GACtB,GAAKA,EAAK06B,OAAV,CAKA,IAHA,IAAIuB,EAAQ,GACRC,EAAe,GAEV1uB,EAAI,EAAGC,EAAKuuB,EAAWjwB,OAAQyB,EAAIC,EAAID,IAAK,CACnD,IAAI2uB,EAAYH,EAAWxuB,GAE3B,GAAI2uB,EAAW,CACbF,EAAMxqB,KAAK0qB,GAEX,IAAIC,EAAM,IAAIV,EAAAA,aAEwBl2B,IAAlCuzB,EAAUC,qBACZoD,EAAIznB,UAAUokB,EAAUC,oBAAoBtmB,MAAW,GAAJlF,GAGrD0uB,EAAazqB,KAAK2qB,EACnB,MACC/rB,QAAQ+J,KACN,mDACA2e,EAAUhJ,OAAOviB,GAGtB,CAEDxN,EAAKq8B,KAAK,IAAIC,EAAAA,SAASL,EAAOC,GAAel8B,EAAKmN,YA1B1B,CA2BzB,IAEMusB,CACR,IA/CH,IAAIX,CAgDL,IACA7mB,MAAK,SAAUwnB,GAGdoC,EAAaj0B,IAAI6xB,GAEjB,IAAI3Z,EAAU,GAEd,GAAIoQ,EAAQoM,SAGV,IAFA,IAAIA,EAAWpM,EAAQoM,SAEdlvB,EAAI,EAAGwG,EAAK0oB,EAASxwB,OAAQsB,EAAIwG,EAAIxG,IAAK,CACjD,IAAImvB,EAAQD,EAASlvB,GACrB0S,EAAQtO,KAAKmqB,EAAkBY,EAAO9C,EAAM5c,EAAMgD,GACnD,CAGH,OAAOpO,QAAQ4O,IAAIP,EACpB,GACJ,CAED,OAAO,SAAmB0c,GACxB,IAAI3f,EAAO5X,KAAK4X,KACZN,EAAatX,KAAKsX,WAClBkgB,EAAWx3B,KAAK4X,KAAKoS,OAAOuN,GAK5B72B,EAAQ,IAAIsyB,EAAAA,MACZwE,EAAS58B,OAAM8F,EAAM9F,KAAO48B,EAAS58B,MAEzC8rB,EAAuBhmB,EAAO82B,GAE1BA,EAASlgB,YAAYgP,EAA+BhP,EAAY5W,EAAO82B,GAM3E,IAJA,IAAIC,EAAUD,EAASpN,OAAS,GAE5BvP,EAAU,GAEL1S,EAAI,EAAGwG,EAAK8oB,EAAQ5wB,OAAQsB,EAAIwG,EAAIxG,IAC3C0S,EAAQtO,KAAKmqB,EAAkBe,EAAQtvB,GAAIzH,EAAOkX,EAhBvC5X,OAmBb,OAAOwM,QAAQ4O,IAAIP,GAAS7N,MAAK,WAC/B,OAAOtM,CACR,GACF,CACF,CA7GiC,EAgHnC,CAnxFmB,G,u6BC9DCg3B,EAAAA,WACnB,WAAYh3B,I,4FAAO,SACjBV,KAAKU,MAAQA,EACbV,KAAK23B,IAAM,KACX33B,KAAK43B,IAAM,KACX53B,KAAK63B,aAAeC,IAAAA,OAAc,GAAI,IACtC93B,KAAK+3B,cAAgBD,IAAAA,SAItB,C,0CAED,WAEE,IAAIlpB,EAAQ,IAAI/N,EAAAA,MAChB+N,EAAMnU,MAAMqO,eAAe,IAE3B,IAAMkvB,EAAOh4B,KAAK+3B,gBACZE,EAAUj4B,KAAKk4B,YAAYF,EAAK,EAAE,IAExCppB,EAAMjM,IAAIs1B,GAGVj4B,KAAKU,MAAMiC,IAAKiM,GAChB5O,KAAK43B,IAAMhpB,CACZ,G,yBAED,SAAYzT,GACV,OAAO,IAAI0F,EAAAA,qBAA2B,CACpC1F,MAAOA,EACPmI,UAAW,EACXD,UAAW,GACXH,KAAMrC,EAAAA,YAET,G,4BAED,WAAsB,IAAPm3B,EAAO,uDAAF,EACZG,EAAQ,CACZ,IAAIt3B,EAAAA,MAAa,EAAG,EAAG,GACvB,IAAIA,EAAAA,MAAa,EAAG,GAAK,GACzB,IAAIA,EAAAA,MAAa,EAAG,EAAG,IACvB,IAAIA,EAAAA,MAAa,GAAK,GAAK,GAC3B,IAAIA,EAAAA,MAAa,GAAK,EAAG,IACzB,IAAIA,EAAAA,MAAa,GAAK,GAAK,KAEvBwM,EAAQ/Q,KAAK0wB,MAAOgL,EAAKG,EAAOtxB,OAAQsxB,EAAOtxB,QACrD,OAAOsxB,EAAO9qB,EACf,G,0BACD,WAAoB,IAAP2qB,EAAO,uDAAF,EACVG,EAAQ,CACZ,IAAIt3B,EAAAA,MAAa,GAAK,GAAK,GAC3B,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAC3B,IAAIA,EAAAA,MAAa,GAAK,GAAK,GAC3B,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAC3B,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAEvBwM,EAAQ/Q,KAAK0wB,MAAOgL,EAAKG,EAAOtxB,OAAQsxB,EAAOtxB,QACrD,OAAOsxB,EAAO9qB,EACf,G,2BACD,WAAqB,IAAP2qB,EAAO,uDAAF,EACXG,EAAQ,CACZ,IAAIt3B,EAAAA,MAAa,GAAK,EAAG,GACzB,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAC3B,IAAIA,EAAAA,MAAa,GAAK,EAAG,GACzB,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAC3B,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAEvBwM,EAAQ/Q,KAAK0wB,MAAOgL,EAAKG,EAAOtxB,OAAQsxB,EAAOtxB,QACrD,OAAOsxB,EAAO9qB,EACf,G,0BACD,WAAoB,IAAP2qB,EAAO,uDAAF,EACVG,EAAQ,CACZ,IAAIt3B,EAAAA,MAAa,GAAK,GAAK,GAC3B,IAAIA,EAAAA,MAAa,GAAK,EAAG,IACzB,IAAIA,EAAAA,MAAa,GAAK,GAAK,IAEvBwM,EAAQ/Q,KAAK0wB,MAAOgL,EAAKG,EAAOtxB,OAAQsxB,EAAOtxB,QACrD,OAAOsxB,EAAO9qB,EACf,G,yBAED,SAAY2qB,EAAMl4B,EAAOiC,GACvB,IACMk2B,EAAU,GACVG,EAAmBt4B,EAAMiC,EAFf,GAGhBoJ,QAAQC,IAAI,CAACgtB,gBAAAA,IACb,IAAI,IAAIjwB,EAAE,EAAGA,EAAIiwB,EAAgBjwB,IAAK,CACpC,IAAMkwB,EAAar4B,KAAK+3B,gBACxBE,EAAQ1rB,KAAKvM,KAAKs4B,WAAWD,GAC9B,CAEDJ,EAAQ7Q,MAAK,SAAC9X,EAAEC,GACd,IAAMgpB,GAAe,IAAI13B,EAAAA,MAAa23B,cAAelpB,GAC/CmpB,GAAe,IAAI53B,EAAAA,MAAa23B,cAAejpB,GACrD,OAAOgpB,EAAatlB,IAAIhW,EAAIw7B,EAAaxlB,IAAIhW,CAC9C,IAGD,IADA,IAAI2R,EAAQ,IAAI/N,EAAAA,MACR7D,GAAK,GAAKA,EAAE,GAAKA,GAhBT,GAiBd,IAAI,IAAIE,GAAK,GAAKA,EAAE,GAAKA,GAjBX,GAiBuB,CAEnC,IAAMzC,EAAQ,EAAI6B,KAAK2W,IAAI3W,KAAKmsB,IAAIzrB,GAAGV,KAAKmsB,IAAIvrB,IAG1Cw7B,EAAST,EAFI37B,KAAK0wB,MAAMvyB,EAAMw9B,EAAQpxB,QAASoxB,EAAQpxB,QAEzB6N,QACpCgkB,EAAOC,QAAQ34B,KAAK+3B,gBAAgBz7B,KAAKC,IACzCm8B,EAAOE,WAAY57B,EAAE8C,EAAM,IAAKE,KAAK+3B,gBAAgB,KACrDW,EAAOG,WAAY37B,EAAE4C,EAAM,IAAKE,KAAK+3B,gBAAgB,KAErDW,EAAOI,QAAQ57B,EAAEZ,KAAKC,GAAG,GACzBm8B,EAAOK,SAAS/7B,EAAEV,KAAKC,GAAG,GAE1Bm8B,EAAOj+B,MAAMqO,eAAgBrO,GAA4B,GAArBuF,KAAK+3B,iBAAsB,IAC/DnpB,EAAMjM,IAAI+1B,EACX,CAEH,OAAO9pB,CACR,G,wBAED,SAAWopB,GACT,IAAMppB,EAAQ,IAAI/N,EAAAA,MAEZm4B,EAAOh5B,KAAKi5B,SAASjB,GAC3BppB,EAAMjM,IAAIq2B,GAEV,IAAME,EAAQl5B,KAAKm5B,UAAUnB,GAO7B,OANAkB,EAAMz+B,MAAMqO,eAAe,GAC3BowB,EAAMz+B,MAAMwC,EAAkB,IAAdi8B,EAAMz+B,MAAMwC,EAC5Bi8B,EAAMz+B,MAAMwC,EAAkB,GAAdi8B,EAAMz+B,MAAMuC,EAC5Bk8B,EAAMz+B,MAAMyC,EAAkB,GAAdg8B,EAAMz+B,MAAMyC,EAC5B0R,EAAMjM,IAAIu2B,GAEHtqB,CACR,G,sBAED,SAASopB,GACP,IAAMppB,EAAQ,IAAI/N,EAAAA,MACZuD,EAAQ,IAAIvD,EAAAA,QAAe,EAAG,EAAG,GACjCu4B,EAAS,IAAIv4B,EAAAA,QAA4C,GAAvBb,KAAK63B,eAAe,GAA1B,GAAiC,EAAE73B,KAAK63B,eAA6C,GAAvB73B,KAAK63B,eAAe,GAA1B,IACpFtzB,EAAM,IAAI1D,EAAAA,QAA4C,GAAvBb,KAAK63B,eAAe,GAA1B,GAAiC,EAAG,EAAEG,EAAoC,GAAvBh4B,KAAK63B,eAAe,GAA1B,IAEtEwB,EAAQ,IAAIx4B,EAAAA,sBAChBuD,EACAg1B,EACA70B,GAGImC,EAAW,IAAI7F,EAAAA,mBAA0Bw4B,EAAO,EAAG,IAAM,IAAKrB,EAAO,GAAG,GACxE98B,EAAW8E,KAAKs5B,YAAYt5B,KAAKu5B,aAAavB,IAC9CgB,EAAO,IAAIn4B,EAAAA,KAAY6F,EAAUxL,GACvC0T,EAAMjM,IAAIq2B,GAEV,IAAMQ,EAAK5qB,EAAM4qB,GAGXC,EAAa,IAAI54B,EAAAA,MACjB64B,EAAS,GAAO,GAAI15B,KAAK63B,eACzB8B,EAAgBN,EAAMO,WAAWF,GACvCD,EAAWx3B,SAASC,IAAKy3B,EAAc38B,EAAG28B,EAAc18B,EAAG08B,EAAcz8B,GACzE,IAAM28B,EAAeR,EAAMS,WAAWJ,GAAQ7wB,YACxCkxB,EAAY,IAAIl5B,EAAAA,QACtBk5B,EAAU/pB,aAAcwpB,EAAIK,GAAehxB,YAC3C,IAAMmxB,EAAe19B,KAAK29B,KAAMT,EAAGzpB,IAAK8pB,IACxCJ,EAAWhD,WAAWyD,iBAAkBH,EAAWC,GACnD,IAAMG,EAAYn6B,KAAKo6B,cAAcpC,GAErC,GADAyB,EAAW92B,IAAIw3B,GACZnC,EAAO,GAAI,CACZ,IAAMqC,EAAkBF,EAAUzlB,QAClC2lB,EAAgB1B,QAAQr8B,KAAKC,GAAIyD,KAAK63B,gBACtCwC,EAAgB5/B,MAAMqO,eAAe,EAAuB,GAApB9I,KAAK63B,gBAC7C4B,EAAW92B,IAAI03B,EAChB,CAEDzrB,EAAMjM,IAAI82B,GAGV,IAAMa,EAAY,IAAIz5B,EAAAA,MACtBy5B,EAAUr4B,SAASC,IAAKqC,EAAIvH,EAAGuH,EAAItH,EAAGsH,EAAIrH,GAC1C,IAAM0Q,EAAUyrB,EAAMS,WAAW,GAAGjxB,YAE9B0xB,EAAO,IAAI15B,EAAAA,QACjB05B,EAAKvqB,aAAcwpB,EAAI5rB,GAAU/E,YACjC,IAAM2xB,EAAUl+B,KAAK29B,KAAMT,EAAGzpB,IAAKnC,IACnC0sB,EAAU7D,WAAWyD,iBAAkBK,EAAMC,GAC7C,IAAMC,EAAOz6B,KAAK06B,SAAS1C,GAI3B,OAHAsC,EAAU33B,IAAI83B,GACd7rB,EAAMjM,IAAI23B,GAEH1rB,CACR,G,2BAED,SAAcopB,GAEZ,IAAMppB,EAAQ,IAAI/N,EAAAA,MACZuD,EAAQ,IAAIvD,EAAAA,QAAe,EAAG,EAAG,GACjCu4B,EAAS,IAAIv4B,EAAAA,QAAe,IAAMb,KAAK63B,eAAiB,IAAK73B,KAAK63B,eAAgB,IAAM73B,KAAK63B,gBAC7FtzB,EAAM,IAAI1D,EAAAA,QAAe,GAAKb,KAAK63B,eAAiB,GAAIG,EAAM,GAAKh4B,KAAK63B,gBAExEwB,EAAQ,IAAIx4B,EAAAA,sBAChBuD,EACAg1B,EACA70B,GAGImC,EAAW,IAAI7F,EAAAA,mBAA0Bw4B,EAAO,EAAG,IAAKrB,EAAM,GAAG,GACjE98B,EAAW8E,KAAKs5B,YAAYt5B,KAAKu5B,aAAavB,IAC9CgB,EAAO,IAAIn4B,EAAAA,KAAY6F,EAAUxL,GACvC0T,EAAMjM,IAAIq2B,GAEV,IAAMS,EAAa,IAAI54B,EAAAA,MAEvB44B,EAAWx3B,SAASC,IAAKqC,EAAIvH,EAAGuH,EAAItH,EAAGsH,EAAIrH,GAC3C,IAAM0Q,EAAUyrB,EAAMS,WAAW,GAAGjxB,YAC9B0xB,EAAO,IAAI15B,EAAAA,QACjB05B,EAAKvqB,aAAcypB,EAAWD,GAAI5rB,GAAU/E,YAC5C,IAAM2xB,EAAUl+B,KAAK29B,KAAMR,EAAWD,GAAGzpB,IAAKnC,IAC9C6rB,EAAWhD,WAAWyD,iBAAkBK,EAAMC,GAC9C,IAAMtB,EAAQl5B,KAAKm5B,UAAUnB,GAQ7B,OAPAkB,EAAMP,QAAgB,EAARr8B,KAAKC,GAAK,GACxB28B,EAAMz+B,MAAMqO,eAAe,EAAQ,EAALkvB,GAC9ByB,EAAW92B,IAAIu2B,GAEftqB,EAAMjM,IAAI82B,GAGH7qB,CACR,G,uBAED,SAAUopB,GAER,IAwBI2C,EAtBEC,EAAQ56B,KAAK63B,eACbgD,EAAQ76B,KAAK63B,eACbiD,EAAQ96B,KAAK63B,eAEbkD,EAAU,IAAIl6B,EAAAA,QAAe,EAAG,EAAG,GACnCm6B,EAAU,IAAIn6B,EAAAA,QAAe,GAAI+5B,EAAQ,GAAIC,EAAO,GAAIC,GACxDG,EAAU,IAAIp6B,EAAAA,QAAe,GAAIm3B,EAAK6C,GAAO,EAAG,GAChDK,EAAUH,EAAQrmB,QAClBymB,EAAU,IAAIt6B,EAAAA,SAAgB,GAAIg6B,EAAO,GAAIC,EAAO,GAAIF,GACxDQ,EAAUH,EAAQvmB,QAClB2mB,EAAY,IAAIx6B,EAAAA,sBACpBk6B,EACAC,EACAC,GAGIK,EAAY,IAAIz6B,EAAAA,sBACpBq6B,EACAC,EACAC,GAIIG,EAAeF,EAAUG,UAzBZ,GA0BbC,EAAeH,EAAUE,UA1BZ,GA4BnBb,EAAmB,YAAIY,GAAJ,EAAqBE,IAAc3nB,KAAI,SAAAlV,GAAC,MAAI,CAACA,EAAE5B,EAAE4B,EAAE3B,EAAE2B,EAAE1B,EAAf,IAAmBw+B,OAE9E,IADA,IAAMnuB,EAAS,GACPpF,EAAI,EAAGA,EA9BI,EA8BUA,IAC3BoF,EAAQhB,KAAKpE,GACboF,EAAQhB,KAAKpE,EAhCI,GAiCjBoF,EAAQhB,KAAKpE,EAAE,EAjCE,GAmCjBoF,EAAQhB,KAAKpE,GACboF,EAAQhB,KAAKpE,EAAE,EApCE,GAqCjBoF,EAAQhB,KAAKpE,EAAE,GAGjB,IAAMzB,EAAW,IAAI7F,EAAAA,eACfqH,EAAW,IAAI4F,aAAc6sB,GACnCj0B,EAASW,aAAc,WAAY,IAAIxG,EAAAA,gBAAuBqH,EAAU,IACxExB,EAASyK,SAAS5D,GAClB7G,EAASi1B,uBAET,IAAMzgC,EAAW8E,KAAKs5B,YAAYt5B,KAAK47B,cAAc5D,IAC/CkB,EAAQ,IAAIr4B,EAAAA,KAAY6F,EAAUxL,GAClC6B,EAASi+B,EAAQtmB,QAAQ/R,IAAIw4B,GAInC,OAHAjC,EAAM2C,OAAQ9+B,GAGPm8B,CACR,G,sBAED,SAASlB,GACP,IAAMppB,EAAQ,IAAI/N,EAAAA,MACZmD,EAAS,GAAIg0B,EACbtxB,EAAW,IAAI7F,EAAAA,2BAAiCmD,GAChD9I,EAAW8E,KAAKs5B,YAAYt5B,KAAK47B,cAAc5D,IAC/CryB,EAAO,IAAI9E,EAAAA,KAAY6F,EAAUxL,GACvCyK,EAAKm2B,YAAY93B,GACjB4K,EAAMjM,IAAIgD,GAEV,IAAMo2B,EAAiB,EAAI,GAAG/7B,KAAK63B,eAE7BmE,EADYh8B,KAAKm5B,UAAUnB,GACGtxB,SACpCs1B,EAAkBlD,QAAgB,EAARx8B,KAAKC,GAAK,GAEpC,IADA,IAAImU,EAAiBsrB,EAAkBtnB,QAC/BvM,EAAI,EAAGA,EAAI4zB,EAAgB5zB,IAAK,CACtC,IAAM8zB,EAAuBD,EAAkBtnB,QAC/CunB,EAAqBtD,QAASr8B,KAAKC,GAAIw/B,EAAiB5zB,EAAE,GAC1DuI,EAAiBvD,EAAoB8C,sBAAsB,CAACS,EAAeurB,GAC5E,CAED,IAAMC,EAAmBl8B,KAAKs5B,YAAYt5B,KAAK47B,cAAc5D,IACvDmE,EAAW,IAAIt7B,EAAAA,KAAY6P,EAAgBwrB,GACjDC,EAAU1hC,MAAMqO,eAAoB,GAALkvB,GAC/BppB,EAAMjM,IAAIw5B,GAEV,IAAMC,EAAc,IAAIv7B,EAAAA,MACxBu7B,EAAYN,WAAW93B,GACvB,IAAMq4B,EAAqB,IAAIx7B,EAAAA,2BAAiCmD,GAC1Ds4B,EAAqBt8B,KAAKs5B,YAAYt5B,KAAKu8B,aAAavE,IACxDwE,EAAa,IAAI37B,EAAAA,KAAYw7B,EAAoBC,GACvDF,EAAYz5B,IAAI65B,GAChBJ,EAAYN,YAAY93B,GAExB,IAAMy4B,EAAUz8B,KAAK08B,YAAY1E,GAMjC,OALAoE,EAAYz5B,IAAI85B,GAEhB7tB,EAAMjM,IAAIy5B,GAGHxtB,CACR,G,yBAED,SAAYopB,GACV,IA4BI2C,EA5BE/rB,EAAQ,IAAI/N,EAAAA,MAIZ+5B,EAAQ56B,KAAK+3B,gBACb8C,EAAQ76B,KAAK+3B,gBACb+C,EAAQ96B,KAAK+3B,gBAEbgD,EAAU,IAAIl6B,EAAAA,QAAe,EAAG,EAAG,GACnCm6B,EAAU,IAAIn6B,EAAAA,QAAgB,GAAIi6B,EAAO,GAAM,GAAIF,EAAQ,GAAIE,EAAO,IACtEG,EAAU,IAAIp6B,EAAAA,QAAe,EAAGg6B,EAAM,GAAK,GAE3CK,EAAUH,EAAQrmB,QAClBymB,EAAU,IAAIt6B,EAAAA,UAAkB,GAAIi6B,EAAO,IAAM,GAAIF,EAAQ,GAAIE,EAAO,IACxEM,EAAUH,EAAQvmB,QAElB2mB,EAAY,IAAIx6B,EAAAA,sBACpBk6B,EACAC,EACAC,GAGIK,EAAY,IAAIz6B,EAAAA,sBACpBq6B,EACAC,EACAC,GAIIG,EAAeF,EAAUG,UA3BZ,GA4BbC,EAAeH,EAAUE,UA5BZ,GA8BnBb,EAAmB,YAAIY,GAAJ,EAAqBE,IAAc3nB,KAAI,SAAAlV,GAAC,MAAI,CAACA,EAAE5B,EAAE4B,EAAE3B,EAAE2B,EAAE1B,EAAf,IAAmBw+B,OAE9E,IADA,IAAMnuB,EAAS,GACPpF,EAAI,EAAGA,EAhCI,EAgCUA,IAC3BoF,EAAQhB,KAAKpE,GACboF,EAAQhB,KAAKpE,EAlCI,GAmCjBoF,EAAQhB,KAAKpE,EAAE,EAnCE,GAqCjBoF,EAAQhB,KAAKpE,GACboF,EAAQhB,KAAKpE,EAAE,EAtCE,GAuCjBoF,EAAQhB,KAAKpE,EAAE,GAGjB,IAAMzB,EAAW,IAAI7F,EAAAA,eACfqH,EAAW,IAAI4F,aAAc6sB,GACnCj0B,EAASW,aAAc,WAAY,IAAIxG,EAAAA,gBAAuBqH,EAAU,IACxExB,EAASyK,SAAS5D,GAClB7G,EAASi1B,uBACTj1B,EAASoyB,QAAQx8B,KAAKC,GAAG,GAOzB,IALA,IACMogC,EAAc,EAAK,EADL38B,KAAK+3B,gBAGrBrnB,EAAiBhK,EAEbyB,EAAI,EAAGA,EAAIw0B,EAAax0B,IAAK,CACnC,IAAMy0B,EAAoBl2B,EAASgO,QACnCkoB,EAAkBjE,QAASr8B,KAAKC,GAAIogC,EAAcx0B,EAAE,GACpDuI,EAAiBvD,EAAoB8C,sBAAsB,CAACS,EAAeksB,GAC5E,CAGD,IAAM1hC,EAAW8E,KAAKs5B,YAAYt5B,KAAK68B,eAAe7E,IAChD8E,EAAS,IAAIj8B,EAAAA,KAAY6P,EAAgBxV,GAM/C,OAFA0T,EAAMjM,IAAIm6B,GAEHluB,CACR,G,oBAED,WACE5O,KAAKU,MAAMqJ,OAAO/J,KAAK43B,IACxB,I,mFAlZkBF,G,sKCVrB,IAAMqF,EAAQ,CACZ,KAAU,GACV,GAAU,GACV,MAAW,GACX,KAAU,GACV,MAAW,GACX,IAAW,EACX,OAAW,IAGQC,EAAAA,WACnB,WAAY97B,GAAY,Y,4FAAA,SACtBlB,KAAKkB,WAAaA,GAAc1C,SAChCwB,KAAKi9B,SAAW,CAAC,EAGjBj9B,KAAKkB,WAAWM,iBAAiB,WAAW,SAAC07B,GAAD,OAAW,EAAKC,YAAYD,EAA5B,IAAoC,GAChFl9B,KAAKkB,WAAWM,iBAAiB,SAAS,SAAC07B,GAAD,OAAW,EAAKC,YAAYD,EAA5B,IAAoC,GAG9E7+B,OAAOmD,iBAAiB,QAAQ,kBAAM,EAAK47B,MAAX,IAAmB,EACpD,C,8CAED,WAAU,WACRp9B,KAAKkB,WAAWm8B,oBAAoB,WAAW,SAACH,GAAD,OAAW,EAAKC,YAAYD,EAA5B,IAAoC,GACnFl9B,KAAKkB,WAAWm8B,oBAAoB,SAAS,SAACH,GAAD,OAAW,EAAKC,YAAYD,EAA5B,IAAoC,GAGjF7+B,OAAOg/B,oBAAoB,QAAQ,kBAAM,EAAKD,MAAX,IAAmB,EACvD,G,oBAED,WACE,IAAI,IAAME,KAAQt9B,KAAKi9B,SACrBj9B,KAAKi9B,SAASK,IAAQ,CACzB,G,yBAED,SAAYJ,GAKV,IAAMK,EAAUL,EAAMK,QACtBv9B,KAAKi9B,SAASM,GAA0B,YAAfL,EAAM5iC,IAChC,G,qBAED,SAAQkjC,GAEN,IADA,IAAMvwB,EAAOuwB,EAAQC,MAAM,KACnBt1B,EAAI,EAAGA,EAAI8E,EAAKpG,OAAQsB,IAAK,CACnC,IAAM6D,EAAMiB,EAAK9E,GACbu1B,GAAU,EAMd,GAJEA,GADqC,GAApC/1B,OAAOsF,KAAK8vB,GAAO5jB,QAAQnN,GAClBhM,KAAKi9B,SAASF,EAAM/wB,IAEpBhM,KAAKi9B,SAASjxB,EAAI2xB,cAAcC,WAAW,KAEnDF,EACF,OAAO,CACV,CAED,OAAO,CACR,G,0BAED,SAAaR,EAAOM,GAMlB,IALA,IAAMK,EAAUd,EACVe,EAAYn2B,OAAOsF,KAAK4wB,GACxB5wB,EAAOuwB,EAAQC,MAAM,KAGnBt1B,EAAI,EAAGA,EAAI8E,EAAKpG,OAAQsB,IAAK,CACnC,IAAM6D,EAAMiB,EAAK9E,GACbu1B,GAAU,EAcd,GAbW,UAAR1xB,EACD0xB,IAAUR,EAAMa,SACA,SAAR/xB,EACR0xB,IAAUR,EAAMc,QACA,QAARhyB,EACR0xB,IAAUR,EAAMe,OACA,SAARjyB,EACR0xB,IAAUR,EAAMgB,SACoB,IAA5BJ,EAAU3kB,QAAQnN,GAC1B0xB,EAAUR,EAAMK,UAAYM,EAAQ7xB,GAC5BkxB,EAAMK,UAAYvxB,EAAI2xB,cAAcC,WAAW,KACvDF,GAAU,IAERA,EACF,OAAO,CACV,CAED,OAAO,CACR,M,gFA/EkBV,G,0KCLAmB,GAAAA,WACnB,WAAYr8B,EAAUpB,EAAOnF,EAAQO,GAAU,Y,4FAAA,SAE7CkE,KAAK8B,SAAWA,EAChB9B,KAAKU,MAAQA,EACbV,KAAKzE,OAASA,EACdyE,KAAKlE,SAAWA,EAEhBkE,KAAKo+B,QAAU,KAGfp+B,KAAKq+B,SAAW,IAAIrB,EAIpBh9B,KAAK8B,SAASZ,WAAWM,iBAAiB,aAAa,SAAC07B,GAAD,OAAWlzB,EAAQs0B,SAAS,EAAKC,YAAYrB,GAAQ,IAArD,IAA2D,GAClHl9B,KAAK8B,SAASZ,WAAWM,iBAAiB,cAAc,SAAC07B,GAAD,OAAW,EAAKsB,aAAatB,EAA7B,IAAqC,GAC7Fl9B,KAAK8B,SAASZ,WAAWM,iBAAiB,aAAa,SAAC07B,GAAD,OAAW,EAAKuB,YAAYvB,EAA5B,IAAoC,GAG3Fl9B,KAAKq+B,SAASn9B,WAAWM,iBAAiB,WAAW,SAAC07B,GAEjDA,EAAMrb,QAIN,EAAKwc,SAASK,aAAaxB,EAAO,WACnC/xB,QAAQC,IAAI,iBAEf,GACF,C,kDAED,SAAY8xB,GACVA,EAAMyB,iBAENv9B,EAAAA,aAAqB,CACtB,G,0BAED,SAAa87B,GACXA,EAAMyB,iBAENv9B,EAAAA,aAAqB,CACtB,G,yBAED,SAAY87B,GACVA,EAAMyB,iBAENh0B,aAAa3K,KAAKo+B,SAElBp+B,KAAKo+B,QAAUxzB,YAAW,WACxBxJ,EAAAA,eAAuB,CACxB,GAAE,KAEHA,EAAAA,eAAuB,CACxB,M,gFAtDkB+8B,G,66BCFAS,GAAAA,WACnB,WAAYC,I,4FAAM,SAChB7+B,KAAK8+B,IAAM,IAAIC,IAAIC,IAEnBh/B,KAAKzE,OAASsjC,EAAKtjC,OAAOyG,YAC1BhC,KAAKlE,SAAW+iC,EAAK/iC,SAASiH,cAC9B/C,KAAKm2B,MAAQ0I,EAAK1I,MAClBn2B,KAAKU,MAAQm+B,EAAKn+B,MAElBV,KAAK7F,MAAQ,KACb6F,KAAKi/B,WAAa,IACnB,C,2CAED,SAAKJ,EAAM/jC,GAAM,WAIfkF,KAAK7F,MAAQ0kC,EAAK1kC,MAClB6F,KAAKi/B,WAAaJ,EAAKI,WAGvB,IAAMC,EAAel/B,KAAK8+B,IAAIK,UAAU,UAClCC,EAAeF,EAAav8B,IAAIvB,EAAAA,OAAe,MAAO,EAAG,KAAKxG,KAAK,cACzEwkC,EAAaC,UAAS,SAAC9zB,GACrB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAK/jC,OAAOC,IAAM+P,CACnB,IACD6zB,EAAaG,gBAAe,WAC1B,EAAKhkC,OAAO4G,yBAEZ,EAAKrG,SAASwjC,cAAe,CAC9B,IACD,IAAME,EAAkBN,EAAav8B,IAAIvB,EAAAA,OAAe,SAAU,EAAG,GAAGxG,KAAK,iBAC7E4kC,EAAgBH,UAAS,SAAC9zB,GACxB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAK/jC,OAAOG,OAAS6P,CACtB,IACDi0B,EAAgBD,gBAAe,WAC7B,EAAKhkC,OAAO4G,yBAEZ,EAAKrG,SAASwjC,cAAe,CAC9B,IACyBJ,EAAaO,SAASr+B,EAAAA,IAAY,SAASxG,KAAK,aACxDykC,UAAS,SAAC9zB,GAC1B,EAAK7K,MAAMrF,IAAIF,MAAMsQ,OAAOF,EAC7B,IACD,IAAMm0B,EAAmBR,EAAav8B,IAAIvB,EAAAA,IAAY,OAAQ,EAAO,KAAOxG,KAAK,YACjF8kC,EAAiBL,UAAS,SAAC9zB,GACzB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAK5+B,MAAMrF,IAAIskC,QAAUp0B,CAC1B,IACDm0B,EAAiBH,gBAAe,WAC9B,EAAKzjC,SAASwjC,cAAe,CAC9B,IAID,IAAMM,EAAiB5/B,KAAK8+B,IAAIK,UAAU,YAC1CS,EAAej9B,IAAIvB,EAAAA,SAAiB,cAAcxG,KAAK,eAAeykC,UAAS,SAAC9zB,GAC9E,EAAKzP,SAASC,WAAawP,CAC5B,IACD,IAAMs0B,EAA6BD,EAAej9B,IAAIvB,EAAAA,SAAiB,mBAAoB,EAAG,GAAGxG,KAAK,kBACtGilC,EAA2BR,UAAS,SAAC9zB,GACnC,EAAKzP,SAASwjC,cAAe,EAC7B,EAAKxjC,SAASE,gBAAkBuP,CACjC,IACDs0B,EAA2BN,gBAAe,WACxC,EAAKzjC,SAASwjC,cAAe,CAC9B,IAImBt/B,KAAK8+B,IAAIK,UAAU,SAC3Bx8B,IAAIvB,EAAAA,MAAc,OAA9B,GAA0CA,EAAAA,MAAAA,eAA4BxG,KAAK,gBAAgBykC,UAAS,SAAC9zB,GAC/FA,IACEnK,EAAAA,KAAAA,cACF,EAAK69B,WAAWa,UAElB1+B,EAAAA,MAAAA,SAAwBA,EAAAA,MAAAA,aAAAA,QAAkCmK,GAC1D,EAAKw0B,SACL,EAAK5lC,MAAM4lC,SACX,EAAK5lC,MAAMwS,KAAKpB,GAEnB,IAGD,IAAMy0B,EAAahgC,KAAK8+B,IAAIK,UAAU,QACtCa,EAAWr9B,IAAIvB,EAAAA,KAAa,gBAAgB,GAAMxG,KAAK,kBAAkBykC,UAAS,SAAC9zB,GAC9EA,EACD,EAAK0zB,WAAWgB,SAEhB,EAAKhB,WAAWa,SAEnB,IACDE,EAAWr9B,IAAIvB,EAAAA,KAAa,eAAe,GAAMxG,KAAK,eAAeykC,UAAS,SAAC9zB,GAC1EA,GACDzQ,EAAKI,SAASwO,aAAc,EAC5B5O,EAAKI,SAASuO,QAAU,IAExB3O,EAAKI,SAASuO,QAAU,CAE3B,IACDu2B,EAAWr9B,IAAIvB,EAAAA,KAAa,aAAa,GAAMxG,KAAK,aAAaykC,UAAS,SAAC9zB,GACzEzQ,EAAKI,SAASF,UAAYuQ,CAC3B,IAKD,IAAM20B,EAAqBlgC,KAAK8+B,IAAIK,UAAU,iBAC9Ce,EAAmBv9B,IAAIvB,EAAAA,aAAqB,WAAWxG,KAAK,WAAWykC,UAAS,SAAC9zB,GAC/E,EAAK4qB,MAAMh5B,aAAamF,QAAUiJ,CACnC,IACD20B,EAAmBT,SAASr+B,EAAAA,aAAqB,SAASxG,KAAK,SAASykC,UAAS,SAAC9zB,GAChF,EAAK4qB,MAAMh5B,aAAahC,MAAMsQ,OAAOF,EACtC,IAID,IAAM40B,EAAyBngC,KAAK8+B,IAAIK,UAAU,qBAClDgB,EAAuBx9B,IAAIvB,EAAAA,iBAAyB,WAAWxG,KAAK,WAAWykC,UAAS,SAAC9zB,GACvF,EAAK4qB,MAAM94B,iBAAiBiF,QAAUiJ,CACvC,IACD40B,EAAuBV,SAASr+B,EAAAA,iBAAyB,SAASxG,KAAK,SAASykC,UAAS,SAAC9zB,GACxF,EAAK4qB,MAAM94B,iBAAiBlC,MAAMsQ,OAAOF,EAC1C,IACD,IAAM60B,EAA+BD,EAAuBx9B,IAAIvB,EAAAA,iBAAyB,YAAa,EAAG,GAAGxG,KAAK,aACjHwlC,EAA6Bf,UAAS,SAAC9zB,GACrC,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBC,UAAYiO,CACzC,IACD60B,EAA6Bb,gBAAe,WAC1C,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMe,EAA+BF,EAAuBx9B,IAAIvB,EAAAA,iBAAyB,KAAM,IAAM,KAAMxG,KAAK,cAChHylC,EAA6BhB,UAAS,SAAC9zB,GACrC,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiB4E,SAASjF,EAAIuO,CAC1C,IACD80B,EAA6Bd,gBAAe,WAC1C,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMgB,EAA+BH,EAAuBx9B,IAAIvB,EAAAA,iBAAyB,KAAM,IAAM,KAAMxG,KAAK,cAChH0lC,EAA6BjB,UAAS,SAAC9zB,GACrC,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiB4E,SAAShF,EAAIsO,CAC1C,IACD+0B,EAA6Bf,gBAAe,WAC1C,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMiB,EAA+BJ,EAAuBx9B,IAAIvB,EAAAA,iBAAyB,KAAM,IAAM,KAAMxG,KAAK,cAChH2lC,EAA6BlB,UAAS,SAAC9zB,GACrC,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiB4E,SAAS/E,EAAIqO,CAC1C,IACDg1B,EAA6BhB,gBAAe,WAC1C,EAAKzjC,SAASwjC,cAAe,CAC9B,IAGD,IAAMkB,EAAexgC,KAAK8+B,IAAIK,UAAU,cACxCqB,EAAa79B,IAAIvB,EAAAA,OAAe,WAAWxG,KAAK,WAAWykC,UAAS,SAAC9zB,GACnE,EAAK4qB,MAAM94B,iBAAiBkF,WAAagJ,CAC1C,IACDi1B,EAAa79B,IAAIvB,EAAAA,OAAe,iBAAiBxG,KAAK,kBAAkBykC,UAAS,SAAC9zB,GAChF,EAAK4qB,MAAM1zB,uBAAuBH,QAAUiJ,CAC7C,IACD,IAAMk1B,EAAgBD,EAAa79B,IAAIvB,EAAAA,OAAe,OAAQ,EAAG,KAAKxG,KAAK,QAC3E6lC,EAAcpB,UAAS,SAAC9zB,GACtB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOD,KAAOiQ,CAClD,IACDk1B,EAAclB,gBAAe,WAC3B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMm8B,EAAeH,EAAa79B,IAAIvB,EAAAA,OAAe,MAAO,EAAG,MAAMxG,KAAK,OAC1E+lC,EAAatB,UAAS,SAAC9zB,GACrB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOE,IAAM8P,CACjD,IACDo1B,EAAapB,gBAAe,WAC1B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMo8B,EAAeJ,EAAa79B,IAAIvB,EAAAA,OAAe,OAAQ,IAAK,KAAKxG,KAAK,OAC5EgmC,EAAavB,UAAS,SAAC9zB,GACrB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOqC,IAAM2N,CACjD,IACDq1B,EAAarB,gBAAe,WAC1B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMq8B,EAAiBL,EAAa79B,IAAIvB,EAAAA,OAAe,SAAU,IAAK,KAAKxG,KAAK,SAChFimC,EAAexB,UAAS,SAAC9zB,GACvB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOsC,MAAQ0N,CACnD,IACDs1B,EAAetB,gBAAe,WAC5B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMs8B,EAAkBN,EAAa79B,IAAIvB,EAAAA,OAAe,UAAW,IAAK,KAAKxG,KAAK,UAClFkmC,EAAgBzB,UAAS,SAAC9zB,GACxB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOuC,OAASyN,CACpD,IACDu1B,EAAgBvB,gBAAe,WAC7B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMu8B,EAAgBP,EAAa79B,IAAIvB,EAAAA,OAAe,QAAS,IAAK,KAAKxG,KAAK,QAC9EmmC,EAAc1B,UAAS,SAAC9zB,GACtB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOhC,OAAOwC,KAAOwN,CAClD,IACDw1B,EAAcxB,gBAAe,WAC3B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IACD,IAAMw8B,EAAgBR,EAAa79B,IAAIvB,EAAAA,OAAe,QAAS,KAAU,GAAGxG,KAAK,QACjFomC,EAAc3B,UAAS,SAAC9zB,GACtB,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOE,KAAO8N,CAC3C,IACDy1B,EAAczB,gBAAe,WAC3B,EAAKzjC,SAASwjC,cAAe,EAC7B,EAAKnJ,MAAM94B,iBAAiBE,OAAOuW,IAAI4sB,UACvC,EAAKvK,MAAM94B,iBAAiBE,OAAOuW,IAAM,KACzC,EAAKqiB,MAAM1zB,uBAAuB+B,QACnC,IAID,IAAMy8B,EAAmBjhC,KAAK8+B,IAAIK,UAAU,eAC5C8B,EAAiBt+B,IAAIvB,EAAAA,WAAmB,WAAWxG,KAAK,WAAWykC,UAAS,SAAC9zB,GAC3E,EAAK4qB,MAAMn4B,WAAWsE,QAAUiJ,CACjC,IACD01B,EAAiBxB,SAASr+B,EAAAA,WAAmB,SAASxG,KAAK,SAASykC,UAAS,SAAC9zB,GAC5E,EAAK4qB,MAAMn4B,WAAW7C,MAAMsQ,OAAOF,EACpC,IACD,IAAM21B,EAAyBD,EAAiBt+B,IAAIvB,EAAAA,WAAmB,YAAa,EAAG,GAAGxG,KAAK,aAC/FsmC,EAAuB7B,UAAS,SAAC9zB,GAC/B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMn4B,WAAWV,UAAYiO,CACnC,IACD21B,EAAuB3B,gBAAe,WACpC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAM6B,EAAwBF,EAAiBt+B,IAAIvB,EAAAA,WAAmB,WAAY,EAAG,KAAMxG,KAAK,YAChGumC,EAAsB9B,UAAS,SAAC9zB,GAC9B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMn4B,WAAWC,SAAWsN,CAClC,IACD41B,EAAsB5B,gBAAe,WACnC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAM8B,EAAyBH,EAAiBt+B,IAAIvB,EAAAA,WAAmB,KAAM,IAAM,KAAMxG,KAAK,cAC9FwmC,EAAuB/B,UAAS,SAAC9zB,GAC/B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMn4B,WAAWiE,SAASjF,EAAIuO,CACpC,IACD61B,EAAuB7B,gBAAe,WACpC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAM+B,EAAyBJ,EAAiBt+B,IAAIvB,EAAAA,WAAmB,KAAM,IAAM,KAAMxG,KAAK,cAC9FymC,EAAuBhC,UAAS,SAAC9zB,GAC/B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMn4B,WAAWiE,SAAShF,EAAIsO,CACpC,IACD81B,EAAuB9B,gBAAe,WACpC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMgC,EAAyBL,EAAiBt+B,IAAIvB,EAAAA,WAAmB,KAAM,IAAM,KAAMxG,KAAK,cAC9F0mC,EAAuBjC,UAAS,SAAC9zB,GAC/B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMn4B,WAAWiE,SAAS/E,EAAIqO,CACpC,IACD+1B,EAAuB/B,gBAAe,WACpC,EAAKzjC,SAASwjC,cAAe,CAC9B,IAID,IAAMiC,EAAkBvhC,KAAK8+B,IAAIK,UAAU,cAC3CoC,EAAgB5+B,IAAIvB,EAAAA,UAAkB,WAAWxG,KAAK,WAAWykC,UAAS,SAAC9zB,GACzE,EAAK4qB,MAAMj4B,UAAUoE,QAAUiJ,CAChC,IACDg2B,EAAgB9B,SAASr+B,EAAAA,UAAkB,SAASxG,KAAK,SAASykC,UAAS,SAAC9zB,GAC1E,EAAK4qB,MAAMj4B,UAAU/C,MAAMsQ,OAAOF,EACnC,IACDg2B,EAAgB9B,SAASr+B,EAAAA,UAAkB,eAAexG,KAAK,gBAAgBykC,UAAS,SAAC9zB,GACvF,EAAK4qB,MAAMj4B,UAAUC,YAAYsN,OAAOF,EACzC,IACD,IAAMi2B,EAAwBD,EAAgB5+B,IAAIvB,EAAAA,UAAkB,YAAa,EAAG,GAAGxG,KAAK,aAC5F4mC,EAAsBnC,UAAS,SAAC9zB,GAC9B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMj4B,UAAUZ,UAAYiO,CAClC,IACDi2B,EAAsBjC,gBAAe,WACnC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMmC,EAAwBF,EAAgB5+B,IAAIvB,EAAAA,UAAkB,KAAM,IAAM,KAAMxG,KAAK,cAC3F6mC,EAAsBpC,UAAS,SAAC9zB,GAC9B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMj4B,UAAU+D,SAASjF,EAAIuO,CACnC,IACDk2B,EAAsBlC,gBAAe,WACnC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMoC,EAAwBH,EAAgB5+B,IAAIvB,EAAAA,UAAkB,KAAM,IAAK,KAAMxG,KAAK,cAC1F8mC,EAAsBrC,UAAS,SAAC9zB,GAC9B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMj4B,UAAU+D,SAAShF,EAAIsO,CACnC,IACDm2B,EAAsBnC,gBAAe,WACnC,EAAKzjC,SAASwjC,cAAe,CAC9B,IACD,IAAMqC,EAAwBJ,EAAgB5+B,IAAIvB,EAAAA,UAAkB,KAAM,IAAM,KAAMxG,KAAK,cAC3F+mC,EAAsBtC,UAAS,SAAC9zB,GAC9B,EAAKzP,SAASwjC,cAAe,EAE7B,EAAKnJ,MAAMj4B,UAAU+D,SAAS/E,EAAIqO,CACnC,IACDo2B,EAAsBpC,gBAAe,WACnC,EAAKzjC,SAASwjC,cAAe,CAC9B,GACF,G,oBAED,WACEt/B,KAAK8+B,IAAI8C,UACT5hC,KAAK8+B,IAAM,IAAIC,IAAIC,GACpB,M,kFA/WkBJ,G,2KC0BAiD,GAAAA,WACnB,WAAYlhC,GAAW,Y,4FAAA,SAErBX,KAAKW,UAAYA,EAGjBX,KAAK8hC,MAAQ,IAAIjhC,EAAAA,MAGjBb,KAAKU,MAAQ,IAAIG,EAAAA,MACjBb,KAAKU,MAAMrF,IAAM,IAAIwF,EAAAA,QAAcO,EAAAA,IAAAA,MAAkBA,EAAAA,IAAAA,MAGlD/C,OAAO4C,mBACRG,EAAAA,IAAa/C,OAAO4C,kBAItBjB,KAAK8B,SAAW,IAAIrB,EAAST,KAAKU,MAAOC,GAGzCX,KAAKzE,OAAS,IAAIsG,EAAO7B,KAAK8B,SAASlB,eACvCZ,KAAKlE,SAAW,IAAI8G,EAAS5C,KAAKzE,OAAOyG,YAAarB,GACtDX,KAAKm2B,MAAQ,IAAI/zB,EAAMpC,KAAKU,OAGb,CAAC,UAAW,cAAe,QAAS,QAC5C2L,SAAQ,SAAC8pB,GAAD,OAAW,EAAKA,MAAM4L,MAAM5L,EAA5B,IAGfn2B,KAAK0G,SAAW,IAAI9C,EAAS5D,KAAKU,OAClCV,KAAK0G,SAASs7B,KAAK,QAAnBhiC,CAA4B,IAAK,IAAK,GAAI,IAC1CA,KAAK0G,SAASq7B,MAAM,CAAC,GAAI,GAAI,GAAI,CAACzlC,KAAKC,GAAK,EAAG,EAAG,IAG/C6E,EAAAA,OAAgBA,EAAAA,iBACjBpB,KAAKiiC,MAAQ,IAAI99B,EAAMnE,KAAK8B,UAC5B9B,KAAKiiC,MAAMC,SAIT9gC,EAAAA,QACFpB,KAAK8+B,IAAM,IAAIF,GAAO5+B,OAIxBA,KAAKtF,QAAU,IAAIuR,EACnBjM,KAAKW,UAAUwhC,cAAc,YAAY5iC,MAAM6iC,QAAU,OAGzDpiC,KAAKtF,QAAQiS,OAAOK,MAAK,WACvB,EAAKyI,QAAU,IAAI5U,EAAAA,eAMnB,EAAK1G,MAAQ,IAAIu9B,EAAQ,EAAKh3B,OAC9B,EAAKvG,MAAMwS,OAGX,EAAK8I,QAAQW,WAAa,SAACisB,EAAMp3B,EAAQC,GACvCC,QAAQC,IAAR,UAAei3B,EAAf,aAAwBp3B,EAAxB,YAAkCC,GACnC,EAED,IAAIizB,GAAY,EAAKr8B,SAASlB,cAAe,EAAKF,MAAO,EAAKnF,OAAOyG,YAAa,EAAKlG,SAASiH,eAG7F3B,EAAAA,QACD,EAAK69B,WAAa,IAAI31B,EAAW,EAAK5I,MAAO,EAAKvG,MAAMw9B,KACpDv2B,EAAAA,KAAAA,cAA0B,EAAK69B,WAAWgB,SAE9C,EAAKnB,IAAInyB,KAAK,EAAM,EAAKxS,MAAMw9B,MAIjCv2B,EAAAA,UAAkB,EAClB,EAAKT,UAAUwhC,cAAc,YAAY5iC,MAAM6iC,QAAU,MAC1D,IAGDpiC,KAAK4B,QACN,C,6CAED,WAEKR,EAAAA,OAAgBA,EAAAA,gBACjB+C,EAAMC,QAIRpE,KAAK8B,SAASF,OAAO5B,KAAKU,MAAOV,KAAKzE,OAAOyG,aAG1CZ,EAAAA,OAAgBA,EAAAA,gBACjB+C,EAAMI,MAORtK,EAAAA,GAAAA,SACA+F,KAAKlE,SAASiH,cAAcyB,SAG5B89B,sBAAsBtiC,KAAK4B,OAAOu1B,KAAKn3B,MACxC,M,kFA3GkB6hC,ICfrB,WAEE,GAAIU,EAAAA,MAEG,CACL,IAAM5hC,EAAYnC,SAASgkC,eAAe,gBAC1C,IAAIX,GAAKlhC,EACV,MAJC4hC,EAAAA,oBAKH,EAEDlgC,E,UCxBAogC,EAAOC,QAAU,SAAU7hC,GACzB,IAAI8hC,EAAQ9hC,EAAM8hC,MAYlB,SAASC,EAAgBv8B,GACvBrG,KAAKqG,OAASA,EAIdrG,KAAKjD,OAAS,IAAI8D,EAAMkF,QAGxB/F,KAAK7D,YAAc,EACnB6D,KAAK5D,YAAcM,IAGnBsD,KAAK6iC,QAAU,EACf7iC,KAAK8iC,QAAUpmC,IAIfsD,KAAK3D,cAAgB,EACrB2D,KAAKxD,cAAgBF,KAAKC,GAI1ByD,KAAKvD,iBAAmBC,IACxBsD,KAAKrD,gBAAkBD,IAIvBsD,KAAKpD,eAAgB,EACrBoD,KAAKnD,cAAgB,IAKrB,IAKIkmC,EACAC,EA6BElzB,EA0FAa,EAGAsyB,EACAC,EAEAC,EACAC,EApIFj5B,EAAQnK,KAERqjC,EAAM,KAONC,EAAW,EACXC,EAAa,EACb9oC,EAAQ,EACR+oC,EAAY,IAAI3iC,EAAMkF,QACtB09B,GAAc,EAIlBzjC,KAAK0jC,cAAgB,WACnB,OAAOV,CACR,EAEDhjC,KAAK2jC,kBAAoB,WACvB,OAAOZ,CACR,EAED/iC,KAAK4jC,WAAa,SAAUxpB,GAC1BmpB,GAAcnpB,CACf,EAEDpa,KAAK6jC,SAAW,SAAUzpB,GACxBkpB,GAAYlpB,CACb,EAGDpa,KAAK8jC,SACCh0B,EAAI,IAAIjP,EAAMkF,QAEX,SAAiB9H,GACtB,IAAI8lC,EAAK/jC,KAAKqG,OAAOkwB,OAAOyN,SAG5Bl0B,EAAE5N,IAAI6hC,EAAG,GAAIA,EAAG,GAAIA,EAAG,IACvBj0B,EAAEhH,gBAAgB7K,GAElBulC,EAAU7gC,IAAImN,EACf,GAIH9P,KAAKikC,MAAS,WACZ,IAAIn0B,EAAI,IAAIjP,EAAMkF,QAElB,OAAO,SAAe9H,GACpB,IAAI8lC,EAAK/jC,KAAKqG,OAAOkwB,OAAOyN,SAG5Bl0B,EAAE5N,IAAI6hC,EAAG,GAAIA,EAAG,GAAIA,EAAG,IACvBj0B,EAAEhH,eAAe7K,GAEjBulC,EAAU7gC,IAAImN,EACf,CACF,CAZa,GAgBd9P,KAAKkkC,IAAM,SAAUC,EAAQC,EAAQC,EAAaC,GAChD,GAAIn6B,EAAM9D,kBAAkBxF,EAAMsyB,kBAAmB,CAEnD,IAEIoR,EAFWp6B,EAAM9D,OAAOpE,SACNyS,QAAQhF,IAAIvF,EAAMpN,QACZ8J,SAG5B09B,GAAkBjoC,KAAKkoC,IAAMr6B,EAAM9D,OAAO7K,IAAM,EAAKc,KAAKC,GAAM,KAGhE4N,EAAM25B,QAAS,EAAIK,EAASI,EAAkBD,GAC9Cn6B,EAAM85B,MAAO,EAAIG,EAASG,EAAkBD,EAC7C,MAAUn6B,EAAM9D,kBAAkBxF,EAAM4yB,oBAEvCtpB,EAAM25B,QAASK,GAAUh6B,EAAM9D,OAAOxI,MAAQsM,EAAM9D,OAAOtI,MAASsmC,GACpEl6B,EAAM85B,MAAOG,GAAUj6B,EAAM9D,OAAOzI,IAAMuM,EAAM9D,OAAOvI,QAAWwmC,IAGlEn5B,QAAQ+J,KACN,+EAGL,EAEDlV,KAAKykC,QAAU,SAAUC,GACnBv6B,EAAM9D,kBAAkBxF,EAAMsyB,kBAChC14B,GAASiqC,EACAv6B,EAAM9D,kBAAkBxF,EAAM4yB,oBACvCtpB,EAAM9D,OAAOs+B,KAAOroC,KAAK2W,IACvBjT,KAAK6iC,QACLvmC,KAAK8rB,IAAIpoB,KAAK8iC,QAAS9iC,KAAKqG,OAAOs+B,KAAOD,IAE5Cv6B,EAAM9D,OAAOlE,yBACbshC,GAAc,GAEdt4B,QAAQ+J,KACN,sFAGL,EAEDlV,KAAK4kC,SAAW,SAAUF,GACpBv6B,EAAM9D,kBAAkBxF,EAAMsyB,kBAChC14B,GAASiqC,EACAv6B,EAAM9D,kBAAkBxF,EAAM4yB,oBACvCtpB,EAAM9D,OAAOs+B,KAAOroC,KAAK2W,IACvBjT,KAAK6iC,QACLvmC,KAAK8rB,IAAIpoB,KAAK8iC,QAAS9iC,KAAKqG,OAAOs+B,KAAOD,IAE5Cv6B,EAAM9D,OAAOlE,yBACbshC,GAAc,GAEdt4B,QAAQ+J,KACN,sFAGL,EAEDlV,KAAKwE,QACCmM,EAAS,IAAI9P,EAAMkF,QAGnBk9B,GAAO,IAAIpiC,EAAMgkC,YAAaC,mBAAmBz+B,EAAOmzB,GAAI,IAAI34B,EAAMkF,QAAQ,EAAG,EAAG,IACpFm9B,EAAcD,EAAKvuB,QAAQqwB,UAE3B5B,EAAe,IAAItiC,EAAMkF,QACzBq9B,EAAiB,IAAIviC,EAAMgkC,WAExB,WACL,IAAI5iC,EAAWjC,KAAKqG,OAAOpE,SAE3B0O,EAAOjI,KAAKzG,GAAUyN,IAAI1P,KAAKjD,QAG/B4T,EAAOq0B,gBAAgB/B,GAIvBF,EAAQzmC,KAAK2oC,MAAMt0B,EAAO3T,EAAG2T,EAAOzT,GAIpC8lC,EAAM1mC,KAAK2oC,MAAM3oC,KAAK4oC,KAAKv0B,EAAO3T,EAAI2T,EAAO3T,EAAI2T,EAAOzT,EAAIyT,EAAOzT,GAAIyT,EAAO1T,GAE9E8lC,GAASQ,EACTP,GAAOM,EAGPP,EAAQzmC,KAAK2W,IAAIjT,KAAKvD,gBAAiBH,KAAK8rB,IAAIpoB,KAAKrD,gBAAiBomC,IAGtEC,EAAM1mC,KAAK2W,IAAIjT,KAAK3D,cAAeC,KAAK8rB,IAAIpoB,KAAKxD,cAAewmC,IAGhEA,EAAM1mC,KAAK2W,IAAIowB,EAAK/mC,KAAK8rB,IAAI9rB,KAAKC,GAAK8mC,EAAKL,IAE5C,IAAIh/B,EAAS2M,EAAO9J,SAAWpM,EAkC/B,OA/BAuJ,EAAS1H,KAAK2W,IAAIjT,KAAK7D,YAAaG,KAAK8rB,IAAIpoB,KAAK5D,YAAa4H,IAG/DhE,KAAKjD,OAAO4F,IAAI6gC,GAEhB7yB,EAAO3T,EAAIgH,EAAS1H,KAAK6oC,IAAInC,GAAO1mC,KAAK6oC,IAAIpC,GAC7CpyB,EAAO1T,EAAI+G,EAAS1H,KAAK8oC,IAAIpC,GAC7BryB,EAAOzT,EAAI8G,EAAS1H,KAAK6oC,IAAInC,GAAO1mC,KAAK8oC,IAAIrC,GAG7CpyB,EAAOq0B,gBAAgB9B,GAEvBjhC,EAASyG,KAAK1I,KAAKjD,QAAQ4F,IAAIgO,GAE/B3Q,KAAKqG,OAAOw1B,OAAO77B,KAAKjD,SAEG,IAAvBiD,KAAKpD,eACP2mC,GAAc,EAAIvjC,KAAKnD,cACvBymC,GAAY,EAAItjC,KAAKnD,gBAErB0mC,EAAa,EACbD,EAAW,GAGb7oC,EAAQ,EACR+oC,EAAUthC,IAAI,EAAG,EAAG,MAOlBuhC,GACAN,EAAakC,kBAAkBrlC,KAAKqG,OAAOpE,UAAYohC,GACvD,GAAK,EAAID,EAAerzB,IAAI/P,KAAKqG,OAAOowB,aAAe4M,KAEvDF,EAAaz6B,KAAK1I,KAAKqG,OAAOpE,UAC9BmhC,EAAe16B,KAAK1I,KAAKqG,OAAOowB,YAChCgN,GAAc,GAEP,EAIV,EAEJ,CAUD,SAAS3gC,EAAcuD,EAAQnF,GAC7B,IAAIokC,EAAa,IAAI1C,EAAgBv8B,GAErCrG,KAAKkB,gBAA4BZ,IAAfY,EAA2BA,EAAa1C,SAI1DmJ,OAAO49B,eAAevlC,KAAM,aAAc,CACxC+V,IAAK,WACH,OAAOuvB,CACR,IAGHtlC,KAAK0jC,cAAgB,WACnB,OAAO4B,EAAW5B,eACnB,EAED1jC,KAAK2jC,kBAAoB,WACvB,OAAO2B,EAAW3B,mBACnB,EAGD3jC,KAAK5C,SAAU,EAGf4C,KAAKipB,OAASjpB,KAAKjD,OAKnBiD,KAAKlD,YAAa,EAClBkD,KAAK9D,UAAY,EAGjB8D,KAAKs/B,cAAe,EACpBt/B,KAAK/D,YAAc,EAGnB+D,KAAKwlC,WAAY,EACjBxlC,KAAKylC,YAAc,EAInBzlC,KAAKjE,YAAa,EAClBiE,KAAKhE,gBAAkB,EAGvBgE,KAAK0lC,YAAa,EAGlB1lC,KAAKiN,KAAO,CAAE04B,KAAM,GAAIC,GAAI,GAAIC,MAAO,GAAIC,OAAQ,IAGnD9lC,KAAK+lC,aAAe,CAClBC,MAAOnlC,EAAM8hC,MAAMgD,KACnBM,KAAMplC,EAAM8hC,MAAMuD,OAClBC,IAAKtlC,EAAM8hC,MAAMkD,OAMnB,IAAI17B,EAAQnK,KAERomC,EAAc,IAAIvlC,EAAMyN,QACxB+3B,EAAY,IAAIxlC,EAAMyN,QACtBg4B,EAAc,IAAIzlC,EAAMyN,QAExBi4B,EAAW,IAAI1lC,EAAMyN,QACrBk4B,EAAS,IAAI3lC,EAAMyN,QACnBm4B,EAAW,IAAI5lC,EAAMyN,QAErBo4B,EAAa,IAAI7lC,EAAMyN,QACvBq4B,EAAW,IAAI9lC,EAAMyN,QACrBs4B,EAAa,IAAI/lC,EAAMyN,QAEvBu4B,GACK,EADLA,EAEM,EAFNA,EAGK,EAHLA,EAIG,EAJHA,EAKY,EALZA,EAMW,EANXA,EAOS,EAGTC,EAAQD,EAIZ7mC,KAAK+mC,QAAU/mC,KAAKjD,OAAO2X,QAC3B1U,KAAKgnC,UAAYhnC,KAAKqG,OAAOpE,SAASyS,QACtC1U,KAAKinC,MAAQjnC,KAAKqG,OAAOs+B,KAIzB,IAAIuC,EAAc,CAAE5sC,KAAM,UACtB6sC,EAAa,CAAE7sC,KAAM,SACrB8sC,EAAW,CAAE9sC,KAAM,OAIvB,SAAS4pC,EAAIC,EAAQC,GACnB,IAAI/kC,EAAU8K,EAAMjJ,aAAe1C,SAAW2L,EAAMjJ,WAAWX,KAAO4J,EAAMjJ,WAE5EokC,EAAWpB,IAAIC,EAAQC,EAAQ/kC,EAAQgoC,YAAahoC,EAAQioC,aAC7D,CA6BD,SAASC,IACP,OAAOjrC,KAAK4X,IAAI,IAAM/J,EAAMjO,UAC7B,CAED,SAASsrC,EAAYtK,GACnB,IAAsB,IAAlB/yB,EAAM/M,QAAV,CAIA,GAFA8/B,EAAMyB,iBAEFzB,EAAMuK,SAAWt9B,EAAM47B,aAAaC,MAAO,CAC7C,IAA2B,IAAvB77B,EAAMm1B,aAAwB,OAElCwH,EAAQD,EAERT,EAAYlkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,QACtC,MAAM,GAAIzK,EAAMuK,SAAWt9B,EAAM47B,aAAaE,KAAM,CACnD,IAAyB,IAArB97B,EAAMrN,WAAsB,OAEhCgqC,EAAQD,EAERH,EAAWxkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,QACrC,MAAM,GAAIzK,EAAMuK,SAAWt9B,EAAM47B,aAAaI,IAAK,CAClD,IAAwB,IAApBh8B,EAAMq7B,UAAqB,OAE/BsB,EAAQD,EAERN,EAASrkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,QACnC,CAEGb,IAAUD,IACZroC,SAASgD,iBAAiB,YAAa+8B,GAAa,GACpD//B,SAASgD,iBAAiB,UAAWomC,GAAW,GAChDz9B,EAAM09B,cAAcV,GA3Ba,CA6BpC,CAED,SAAS5I,EAAYrB,GACnB,IAAsB,IAAlB/yB,EAAM/M,QAAV,CAEA8/B,EAAMyB,iBAEN,IAAIt/B,EAAU8K,EAAMjJ,aAAe1C,SAAW2L,EAAMjJ,WAAWX,KAAO4J,EAAMjJ,WAE5E,GAAI4lC,IAAUD,EAAc,CAC1B,IAA2B,IAAvB18B,EAAMm1B,aAAwB,OAElC+G,EAAUnkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,SACnCrB,EAAYwB,WAAWzB,EAAWD,GAGlCd,EAAW1B,WACP,EAAItnC,KAAKC,GAAK+pC,EAAYtpC,EAAKqC,EAAQgoC,YAAel9B,EAAMlO,aAIhEqpC,EAAWzB,SACP,EAAIvnC,KAAKC,GAAK+pC,EAAYrpC,EAAKoC,EAAQioC,aAAgBn9B,EAAMlO,aAGjEmqC,EAAY19B,KAAK29B,EAClB,MAAM,GAAIS,IAAUD,EAAa,CAChC,IAAyB,IAArB18B,EAAMrN,WAAsB,OAEhC6pC,EAASzkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,SAClCf,EAAWkB,WAAWnB,EAAUD,GAE5BE,EAAW3pC,EAAI,EACjBqoC,EAAWb,QAAQ8C,KACVX,EAAW3pC,EAAI,GACxBqoC,EAAWV,SAAS2C,KAGtBb,EAAWh+B,KAAKi+B,EACjB,MAAM,GAAIG,IAAUD,EAAW,CAC9B,IAAwB,IAApB18B,EAAMq7B,UAAqB,OAE/BgB,EAAOtkC,IAAIg7B,EAAMwK,QAASxK,EAAMyK,SAChClB,EAASqB,WAAWtB,EAAQD,GAE5BrC,EAAIuC,EAASzpC,EAAGypC,EAASxpC,GAEzBspC,EAAS79B,KAAK89B,EACf,CAEGM,IAAUD,GAAY18B,EAAM3F,QA/CG,CAgDpC,CAED,SAASojC,KACe,IAAlBz9B,EAAM/M,UAEVoB,SAAS6+B,oBAAoB,YAAakB,GAAa,GACvD//B,SAAS6+B,oBAAoB,UAAWuK,GAAW,GACnDz9B,EAAM09B,cAAcT,GACpBN,EAAQD,EACT,CAED,SAASkB,EAAa7K,GACpB,IAAsB,IAAlB/yB,EAAM/M,UAA0C,IAArB+M,EAAMrN,YAAwBgqC,IAAUD,EAAvE,CAEA3J,EAAMyB,iBACNzB,EAAM8K,kBAEN,IAAIC,EAAQ,OAEa3nC,IAArB48B,EAAMgL,WAGRD,EAAQ/K,EAAMgL,gBACY5nC,IAAjB48B,EAAMiL,SAGfF,GAAS/K,EAAMiL,QAGbF,EAAQ,EACV3C,EAAWV,SAAS2C,KACXU,EAAQ,GACjB3C,EAAWb,QAAQ8C,KAGrBp9B,EAAM3F,SACN2F,EAAM09B,cAAcV,GACpBh9B,EAAM09B,cAAcT,EAzBqE,CA0B1F,CAED,SAASgB,EAAUlL,GACjB,IAAsB,IAAlB/yB,EAAM/M,UAA0C,IAArB+M,EAAMu7B,aAA4C,IAApBv7B,EAAMq7B,UAGnE,OAAQtI,EAAMK,SACZ,KAAKpzB,EAAM8C,KAAK24B,GACd1B,EAAI,EAAG/5B,EAAMs7B,aACbt7B,EAAM3F,SACN,MAEF,KAAK2F,EAAM8C,KAAK64B,OACd5B,EAAI,GAAI/5B,EAAMs7B,aACdt7B,EAAM3F,SACN,MAEF,KAAK2F,EAAM8C,KAAK04B,KACdzB,EAAI/5B,EAAMs7B,YAAa,GACvBt7B,EAAM3F,SACN,MAEF,KAAK2F,EAAM8C,KAAK44B,MACd3B,GAAK/5B,EAAMs7B,YAAa,GACxBt7B,EAAM3F,SAGX,CAED,SAAS6jC,EAAWnL,GAClB,IAAsB,IAAlB/yB,EAAM/M,QAAV,CAEA,OAAQ8/B,EAAMoL,QAAQzhC,QACpB,KAAK,EACH,IAA2B,IAAvBsD,EAAMm1B,aAAwB,OAElCwH,EAAQD,EAERT,EAAYlkC,IAAIg7B,EAAMoL,QAAQ,GAAGC,MAAOrL,EAAMoL,QAAQ,GAAGE,OACzD,MAEF,KAAK,EACH,IAAyB,IAArBr+B,EAAMrN,WAAsB,OAEhCgqC,EAAQD,EAER,IAAI4B,EAAKvL,EAAMoL,QAAQ,GAAGC,MAAQrL,EAAMoL,QAAQ,GAAGC,MAC/CG,EAAKxL,EAAMoL,QAAQ,GAAGE,MAAQtL,EAAMoL,QAAQ,GAAGE,MAC/CvqC,EAAW3B,KAAK4oC,KAAKuD,EAAKA,EAAKC,EAAKA,GACxChC,EAAWxkC,IAAI,EAAGjE,GAClB,MAEF,KAAK,EACH,IAAwB,IAApBkM,EAAMq7B,UAAqB,OAE/BsB,EAAQD,EAERN,EAASrkC,IAAIg7B,EAAMoL,QAAQ,GAAGC,MAAOrL,EAAMoL,QAAQ,GAAGE,OACtD,MAEF,QACE1B,EAAQD,EAGRC,IAAUD,GAAY18B,EAAM09B,cAAcV,EAlCX,CAmCpC,CAED,SAASwB,EAAUzL,GACjB,IAAsB,IAAlB/yB,EAAM/M,QAAV,CAEA8/B,EAAMyB,iBACNzB,EAAM8K,kBAEN,IAAI3oC,EAAU8K,EAAMjJ,aAAe1C,SAAW2L,EAAMjJ,WAAWX,KAAO4J,EAAMjJ,WAE5E,OAAQg8B,EAAMoL,QAAQzhC,QACpB,KAAK,EACH,IAA2B,IAAvBsD,EAAMm1B,aAAwB,OAClC,GAAIwH,IAAUD,EAAoB,OAElCR,EAAUnkC,IAAIg7B,EAAMoL,QAAQ,GAAGC,MAAOrL,EAAMoL,QAAQ,GAAGE,OACvDlC,EAAYwB,WAAWzB,EAAWD,GAGlCd,EAAW1B,WACP,EAAItnC,KAAKC,GAAK+pC,EAAYtpC,EAAKqC,EAAQgoC,YAAel9B,EAAMlO,aAGhEqpC,EAAWzB,SACP,EAAIvnC,KAAKC,GAAK+pC,EAAYrpC,EAAKoC,EAAQioC,aAAgBn9B,EAAMlO,aAGjEmqC,EAAY19B,KAAK29B,GAEjBl8B,EAAM3F,SACN,MAEF,KAAK,EACH,IAAyB,IAArB2F,EAAMrN,WAAsB,OAChC,GAAIgqC,IAAUD,EAAmB,OAEjC,IAAI4B,EAAKvL,EAAMoL,QAAQ,GAAGC,MAAQrL,EAAMoL,QAAQ,GAAGC,MAC/CG,EAAKxL,EAAMoL,QAAQ,GAAGE,MAAQtL,EAAMoL,QAAQ,GAAGE,MAC/CvqC,EAAW3B,KAAK4oC,KAAKuD,EAAKA,EAAKC,EAAKA,GAExC/B,EAASzkC,IAAI,EAAGjE,GAChB2oC,EAAWkB,WAAWnB,EAAUD,GAE5BE,EAAW3pC,EAAI,EACjBqoC,EAAWV,SAAS2C,KACXX,EAAW3pC,EAAI,GACxBqoC,EAAWb,QAAQ8C,KAGrBb,EAAWh+B,KAAKi+B,GAEhBx8B,EAAM3F,SACN,MAEF,KAAK,EACH,IAAwB,IAApB2F,EAAMq7B,UAAqB,OAC/B,GAAIsB,IAAUD,EAAiB,OAE/BL,EAAOtkC,IAAIg7B,EAAMoL,QAAQ,GAAGC,MAAOrL,EAAMoL,QAAQ,GAAGE,OACpD/B,EAASqB,WAAWtB,EAAQD,GAE5BrC,EAAIuC,EAASzpC,EAAGypC,EAASxpC,GAEzBspC,EAAS79B,KAAK89B,GAEdr8B,EAAM3F,SACN,MAEF,QACEsiC,EAAQD,EAlEuB,CAoEpC,CAED,SAAS+B,KACe,IAAlBz+B,EAAM/M,UAEV+M,EAAM09B,cAAcT,GACpBN,EAAQD,EACT,CAED,SAASgC,EAAY3L,GACnBA,EAAMyB,gBACP,CAzSD3+B,KAAKwE,OAAS,WACRxE,KAAKjE,YAAc+qC,IAAUD,GAC/BvB,EAAW1B,WAsBJ,EAAItnC,KAAKC,GAAM,GAAK,GAAM4N,EAAMnO,kBAnBb,IAAxBspC,EAAW9gC,UACbxE,KAAK6nC,cAAcX,EAEtB,EAEDlnC,KAAK8oC,MAAQ,WACXhC,EAAQD,EAER7mC,KAAKjD,OAAO2L,KAAK1I,KAAK+mC,SACtB/mC,KAAKqG,OAAOpE,SAASyG,KAAK1I,KAAKgnC,WAC/BhnC,KAAKqG,OAAOs+B,KAAO3kC,KAAKinC,MAExBjnC,KAAKqG,OAAOlE,yBACZnC,KAAK6nC,cAAcX,GAEnBlnC,KAAKwE,QACN,EAsRDxE,KAAK0gC,QAAU,WACb1gC,KAAKkB,WAAWm8B,oBAAoB,cAAewL,GAAa,GAChE7oC,KAAKkB,WAAWm8B,oBAAoB,YAAamK,GAAa,GAC9DxnC,KAAKkB,WAAWm8B,oBAAoB,aAAc0K,GAAc,GAChE/nC,KAAKkB,WAAWm8B,oBAAoB,sBAAuB0K,GAAc,GAEzE/nC,KAAKkB,WAAWm8B,oBAAoB,aAAcgL,GAAY,GAC9DroC,KAAKkB,WAAWm8B,oBAAoB,WAAYuL,GAAU,GAC1D5oC,KAAKkB,WAAWm8B,oBAAoB,YAAasL,GAAW,GAE5DnqC,SAAS6+B,oBAAoB,YAAakB,GAAa,GACvD//B,SAAS6+B,oBAAoB,UAAWuK,GAAW,GAEnDvpC,OAAOg/B,oBAAoB,UAAW+K,GAAW,EAClD,EAEDpoC,KAAKkB,WAAWM,iBAAiB,cAAeqnC,GAAa,GAE7D7oC,KAAKkB,WAAWM,iBAAiB,YAAagmC,GAAa,GAC3DxnC,KAAKkB,WAAWM,iBAAiB,aAAcumC,GAAc,GAC7D/nC,KAAKkB,WAAWM,iBAAiB,sBAAuBumC,GAAc,GAEtE/nC,KAAKkB,WAAWM,iBAAiB,aAAc6mC,GAAY,GAC3DroC,KAAKkB,WAAWM,iBAAiB,WAAYonC,GAAU,GACvD5oC,KAAKkB,WAAWM,iBAAiB,YAAamnC,GAAW,GAEzDtqC,OAAOmD,iBAAiB,UAAW4mC,GAAW,GAG9CpoC,KAAKwE,QACN,CAkND,OAh5BKm+B,IAAOA,EAAQ,CAAEgD,KAAM,EAAGO,OAAQ,EAAGL,MAAO,IAgsBjD/iC,EAAc4E,UAAYC,OAAOC,OAAO/G,EAAMkoC,gBAAgBrhC,WAC9D5E,EAAc4E,UAAUG,YAAc/E,EAEtC6E,OAAOqW,iBAAiBlb,EAAc4E,UAAW,CAC/CrB,OAAQ,CACN0P,IAAK,WACH,OAAO/V,KAAKslC,WAAWj/B,MACxB,GAGHtJ,OAAQ,CACNgZ,IAAK,WACH,OAAO/V,KAAKslC,WAAWvoC,MACxB,EAEDmF,IAAK,SAAUqJ,GACbJ,QAAQ+J,KAAK,2EACblV,KAAKslC,WAAWvoC,OAAO2L,KAAK6C,EAC7B,GAGHpP,YAAa,CACX4Z,IAAK,WACH,OAAO/V,KAAKslC,WAAWnpC,WACxB,EAED+F,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWnpC,YAAcoP,CAC/B,GAGHnP,YAAa,CACX2Z,IAAK,WACH,OAAO/V,KAAKslC,WAAWlpC,WACxB,EAED8F,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWlpC,YAAcmP,CAC/B,GAGHs3B,QAAS,CACP9sB,IAAK,WACH,OAAO/V,KAAKslC,WAAWzC,OACxB,EAED3gC,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWzC,QAAUt3B,CAC3B,GAGHu3B,QAAS,CACP/sB,IAAK,WACH,OAAO/V,KAAKslC,WAAWxC,OACxB,EAED5gC,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWxC,QAAUv3B,CAC3B,GAGHlP,cAAe,CACb0Z,IAAK,WACH,OAAO/V,KAAKslC,WAAWjpC,aACxB,EAED6F,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWjpC,cAAgBkP,CACjC,GAGH/O,cAAe,CACbuZ,IAAK,WACH,OAAO/V,KAAKslC,WAAW9oC,aACxB,EAED0F,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAW9oC,cAAgB+O,CACjC,GAGH9O,gBAAiB,CACfsZ,IAAK,WACH,OAAO/V,KAAKslC,WAAW7oC,eACxB,EAEDyF,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAW7oC,gBAAkB8O,CACnC,GAGH5O,gBAAiB,CACfoZ,IAAK,WACH,OAAO/V,KAAKslC,WAAW3oC,eACxB,EAEDuF,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAW3oC,gBAAkB4O,CACnC,GAGH3O,cAAe,CACbmZ,IAAK,WACH,OAAO/V,KAAKslC,WAAW1oC,aACxB,EAEDsF,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAW1oC,cAAgB2O,CACjC,GAGH1O,cAAe,CACbkZ,IAAK,WACH,OAAO/V,KAAKslC,WAAWzoC,aACxB,EAEDqF,IAAK,SAAUqJ,GACbvL,KAAKslC,WAAWzoC,cAAgB0O,CACjC,GAKHy9B,OAAQ,CACNjzB,IAAK,WAEH,OADA5K,QAAQ+J,KAAK,+EACLlV,KAAKlD,UACd,EAEDoF,IAAK,SAAUqJ,GACbJ,QAAQ+J,KAAK,8EACblV,KAAKlD,YAAcyO,CACpB,GAGH09B,SAAU,CACRlzB,IAAK,WAIH,OAHA5K,QAAQ+J,KACN,mFAEMlV,KAAKs/B,YACd,EAEDp9B,IAAK,SAAUqJ,GACbJ,QAAQ+J,KACN,kFAEFlV,KAAKs/B,cAAgB/zB,CACtB,GAGH29B,MAAO,CACLnzB,IAAK,WAEH,OADA5K,QAAQ+J,KAAK,6EACLlV,KAAKwlC,SACd,EAEDtjC,IAAK,SAAUqJ,GACbJ,QAAQ+J,KAAK,4EACblV,KAAKwlC,WAAaj6B,CACnB,GAGH49B,OAAQ,CACNpzB,IAAK,WAEH,OADA5K,QAAQ+J,KAAK,+EACLlV,KAAK0lC,UACd,EAEDxjC,IAAK,SAAUqJ,GACbJ,QAAQ+J,KAAK,8EACblV,KAAK0lC,YAAcn6B,CACpB,GAGH69B,aAAc,CACZrzB,IAAK,WAIH,OAHA5K,QAAQ+J,KACN,wFAEMlV,KAAKslC,WAAW1oC,aACzB,EAEDsF,IAAK,SAAUqJ,GACbJ,QAAQ+J,KACN,uFAEFlV,KAAKslC,WAAW1oC,eAAiB2O,CAClC,GAGH89B,qBAAsB,CACpBtzB,IAAK,WAIH,OAHA5K,QAAQ+J,KACN,4FAEKlV,KAAKslC,WAAWzoC,aACxB,EAEDqF,IAAK,SAAUqJ,GACbJ,QAAQ+J,KACN,4FAEFlV,KAAKslC,WAAWzoC,cAAgB0O,CACjC,KAIEzI,CACR,C","sources":["webpack://threejs-es6-webpack-boilerplate/./src/js/data/config.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/detector.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/renderer.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/camera.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/light.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/controls.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/material.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/helpers/stats.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/components/geometry.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/helpers/vertexNormalsHelper.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/helpers/meshHelper.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/helpers.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/model/texture.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/bufferGeometryUtils.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/loaders/GLTFLoader.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/flowers/Flowers.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/keyboard.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/managers/interaction.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/managers/datGUI.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app/main.js","webpack://threejs-es6-webpack-boilerplate/./src/js/app.js","webpack://threejs-es6-webpack-boilerplate/./src/js/utils/orbitControls.js"],"sourcesContent":["import TWEEN from '@tweenjs/tween.js';\n\n// This object contains the state of the app\nexport default {\n  isDev: false,\n  isShowingStats: true,\n  isLoaded: false,\n  isTweening: false,\n  isRotating: true,\n  isMouseMoving: false,\n  isMouseOver: false,\n  maxAnisotropy: 1,\n  dpr: 1,\n  easing: TWEEN.Easing.Quadratic.InOut,\n  duration: 500,\n  model: {\n    selected: 0,\n    initialTypes: ['gltf', 'object'],\n    type: 'gltf'\n  },\n  models: [\n    {\n      path: './assets/models/duck.gltf',\n      scale: 20,\n      type: 'gltf'\n    },\n    {\n      path: './assets/models/Teapot.json',\n      scale: 20,\n      type: 'object'\n    }\n  ],\n  texture: {\n    path: './assets/textures/',\n    imageFiles: [\n      { name: 'UV', image: 'UV_Grid_Sm.jpg' }\n    ]\n  },\n  mesh: {\n    enableHelper: true,\n    wireframe: false,\n    translucent: false,\n    material: {\n      color: 0xffffff,\n      emissive: 0xffffff\n    }\n  },\n  fog: {\n    color: 0xffffff,\n    near: 0.0008\n  },\n  camera: {\n    fov: 40,\n    near: 2,\n    far: 1000,\n    aspect: 1,\n    posX: 0,\n    posY: 30,\n    posZ: 40\n  },\n  controls: {\n    autoRotate: true,\n    autoRotateSpeed: -0.5,\n    rotateSpeed: 0.5,\n    zoomSpeed: 0.8,\n    minDistance: 200,\n    maxDistance: 600,\n    minPolarAngle: Math.PI / 5,\n    maxPolarAngle: Math.PI / 2,\n    minAzimuthAngle: -Infinity,\n    maxAzimuthAngle: Infinity,\n    enableDamping: true,\n    dampingFactor: 0.5,\n    enableZoom: true,\n    target: {\n      x: 0,\n      y: 0,\n      z: 0\n    }\n  },\n  ambientLight: {\n    enabled: true,\n    color: 0x141414\n  },\n  directionalLight: {\n    enabled: true,\n    color: 0xf0f0f0,\n    intensity: 0.4,\n    x: -75,\n    y: 280,\n    z: 150\n  },\n  shadow: {\n    enabled: true,\n    helperEnabled: true,\n    bias: 0,\n    mapWidth: 2048,\n    mapHeight: 2048,\n    near: 250,\n    far: 400,\n    top: 100,\n    right: 100,\n    bottom: -100,\n    left: -100\n  },\n  pointLight: {\n    enabled: true,\n    color: 0xffffff,\n    intensity: 0.34,\n    distance: 115,\n    x: 0,\n    y: 0,\n    z: 0\n  },\n  hemiLight: {\n    enabled: true,\n    color: 0xc8c8c8,\n    groundColor: 0xffffff,\n    intensity: 0.55,\n    x: 0,\n    y: 0,\n    z: 0\n  }\n};\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nexport default {\n  canvas: !!window.CanvasRenderingContext2D,\n  webgl: (function() {\n    try {\n      var canvas = document.createElement('canvas');\n\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\n    } catch(e) {\n      return false;\n    }\n  })(),\n\n  workers: !!window.Worker,\n  fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n  getWebGLErrorMessage: function() {\n    var element = document.createElement('div');\n    element.id = 'webgl-error-message';\n    element.style.fontFamily = 'monospace';\n    element.style.fontSize = '13px';\n    element.style.fontWeight = 'normal';\n    element.style.textAlign = 'center';\n    element.style.background = '#fff';\n    element.style.color = '#000';\n    element.style.padding = '1.5em';\n    element.style.width = '400px';\n    element.style.margin = '5em auto 0';\n\n    if(!this.webgl) {\n      element.innerHTML = window.WebGLRenderingContext ? [\n        'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br />',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n') : [\n        'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000000\">WebGL</a>.<br/>',\n        'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000000\">here</a>.'\n      ].join('\\n');\n    }\n\n    return element;\n  },\n\n  addGetWebGLMessage: function(parameters) {\n    var parent, id, element;\n\n    parameters = parameters || {};\n\n    parent = parameters.parent !== undefined ? parameters.parent : document.body;\n    id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n    element = this.getWebGLErrorMessage();\n    element.id = id;\n\n    parent.appendChild(element);\n  }\n};\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\n\n// Main webGL renderer class\nexport default class Renderer {\n  constructor(scene, container) {\n    // Properties\n    this.scene = scene;\n    this.container = container;\n\n    // Create WebGL renderer and set its antialias\n    this.threeRenderer = new THREE.WebGLRenderer({antialias: true});\n\n    // Set clear color to fog to enable fog or to hex color for no fog\n    this.threeRenderer.setClearColor(scene.fog.color);\n    this.threeRenderer.setPixelRatio(window.devicePixelRatio); // For retina\n\n    // Appends canvas\n    container.appendChild(this.threeRenderer.domElement);\n\n    // Shadow map options\n    this.threeRenderer.shadowMap.enabled = true;\n    this.threeRenderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    // Get anisotropy for textures\n    Config.maxAnisotropy = this.threeRenderer.capabilities.getMaxAnisotropy();\n\n    // Initial size update set to canvas container\n    this.updateSize();\n\n    // Listeners\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false);\n    window.addEventListener('resize', () => this.updateSize(), false);\n  }\n\n  updateSize() {\n    this.threeRenderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n  }\n\n  render(scene, camera) {\n    // Renders scene to canvas target\n    this.threeRenderer.render(scene, camera);\n  }\n}\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\n\n// Class that creates and updates the main camera\nexport default class Camera {\n  constructor(renderer) {\n    const width = renderer.domElement.width;\n    const height = renderer.domElement.height;\n\n    // Create and position a Perspective Camera\n    this.threeCamera = new THREE.PerspectiveCamera(Config.camera.fov, width / height, Config.camera.near, Config.camera.far);\n    this.threeCamera.position.set(Config.camera.posX, Config.camera.posY, Config.camera.posZ);\n\n    // Initial sizing\n    this.updateSize(renderer);\n    \n    // Listeners\n    window.addEventListener('resize', () => this.updateSize(renderer), false);\n  }\n\n  updateSize(renderer) {\n    // Update camera aspect ratio with window aspect ratio\n    this.threeCamera.aspect = renderer.domElement.width / renderer.domElement.height;\n\n    // Always call updateProjectionMatrix on camera change\n    this.threeCamera.updateProjectionMatrix();\n  }\n}\n","import * as THREE from 'three';\n\nimport Config from '../../data/config';\n\n// Sets up and places all lights in scene\nexport default class Light {\n  constructor(scene) {\n    this.scene = scene;\n\n    this.init();\n  }\n\n  init() {\n    // Ambient\n    this.ambientLight = new THREE.AmbientLight(Config.ambientLight.color);\n    this.ambientLight.visible = Config.ambientLight.enabled;\n\n    // Point light\n    this.pointLight = new THREE.PointLight(Config.pointLight.color, Config.pointLight.intensity, Config.pointLight.distance);\n    this.pointLight.position.set(Config.pointLight.x, Config.pointLight.y, Config.pointLight.z);\n    this.pointLight.visible = Config.pointLight.enabled;\n\n    // Directional light\n    this.directionalLight = new THREE.DirectionalLight(Config.directionalLight.color, Config.directionalLight.intensity);\n    this.directionalLight.position.set(Config.directionalLight.x, Config.directionalLight.y, Config.directionalLight.z);\n    this.directionalLight.visible = Config.directionalLight.enabled;\n\n    // Shadow map\n    this.directionalLight.castShadow = Config.shadow.enabled;\n    this.directionalLight.shadow.bias = Config.shadow.bias;\n    this.directionalLight.shadow.camera.near = Config.shadow.near;\n    this.directionalLight.shadow.camera.far = Config.shadow.far;\n    this.directionalLight.shadow.camera.left = Config.shadow.left;\n    this.directionalLight.shadow.camera.right = Config.shadow.right;\n    this.directionalLight.shadow.camera.top = Config.shadow.top;\n    this.directionalLight.shadow.camera.bottom = Config.shadow.bottom;\n    this.directionalLight.shadow.mapSize.width = Config.shadow.mapWidth;\n    this.directionalLight.shadow.mapSize.height = Config.shadow.mapHeight;\n\n    // Shadow camera helper\n    if(Config.isDev) {\n      this.directionalLightHelper = new THREE.CameraHelper(this.directionalLight.shadow.camera);\n      this.directionalLightHelper.visible = Config.shadow.helperEnabled;\n    }\n    // Hemisphere light\n    this.hemiLight = new THREE.HemisphereLight(Config.hemiLight.color, Config.hemiLight.groundColor, Config.hemiLight.intensity);\n    this.hemiLight.position.set(Config.hemiLight.x, Config.hemiLight.y, Config.hemiLight.z);\n    this.hemiLight.visible = Config.hemiLight.enabled;\n  }\n\n  place(lightName) {\n    switch(lightName) {\n      case 'ambient':\n        this.scene.add(this.ambientLight);\n        break;\n\n      case 'directional':\n        this.scene.add(this.directionalLight);\n        if(Config.isDev) {\n          this.scene.add(this.directionalLightHelper);\n        }\n        break;\n\n      case 'point':\n        this.scene.add(this.pointLight);\n        break;\n\n      case 'hemi':\n        this.scene.add(this.hemiLight);\n        break;\n    }\n  }\n}\n","import * as THREE from 'three';\n\nimport OrbitControls from '../../utils/orbitControls';\nimport Config from '../../data/config';\n\n// Controls based on orbit controls\nexport default class Controls {\n  constructor(camera, container) {\n    // Orbit controls first needs to pass in THREE to constructor\n    const orbitControls = new OrbitControls(THREE);\n    this.threeControls = new orbitControls(camera, container);\n\n    this.init();\n  }\n\n  init() {\n    this.threeControls.target.set(Config.controls.target.x, Config.controls.target.y, Config.controls.target.z);\n    this.threeControls.autoRotate = Config.controls.autoRotate;\n    this.threeControls.autoRotateSpeed = Config.controls.autoRotateSpeed;\n    this.threeControls.rotateSpeed = Config.controls.rotateSpeed;\n    this.threeControls.zoomSpeed = Config.controls.zoomSpeed;\n    this.threeControls.minDistance = Config.controls.minDistance;\n    this.threeControls.maxDistance = Config.controls.maxDistance;\n    this.threeControls.minPolarAngle = Config.controls.minPolarAngle;\n    this.threeControls.maxPolarAngle = Config.controls.maxPolarAngle;\n    this.threeControls.enableDamping = Config.controls.enableDamping;\n    this.threeControls.enableZoom = Config.controls.enableZoom;\n    this.threeControls.dampingFactor = Config.controls.dampingFactor;\n  }\n}\n","import * as THREE from 'three';\n\n// USe this class as a helper to set up some default materials\nexport default class Material {\n  constructor(color) {\n    this.basic = new THREE.MeshBasicMaterial({\n      color,\n      side: THREE.DoubleSide\n    });\n\n    this.standard = new THREE.MeshStandardMaterial({\n      color,\n      shading: THREE.FlatShading,\n      roughness: 1,\n      metalness: 0,\n      side: THREE.DoubleSide\n    });\n\n    this.wire = new THREE.MeshBasicMaterial({wireframe: true});\n  }\n}\n\n","// Local vars for rStats\nlet rS, bS, glS, tS;\n\nexport default class Stats {\n  constructor(renderer) {\n    this.renderer = renderer;\n  }\n\n  setUp() {\n    bS = new BrowserStats();\n    glS = new glStats();\n    tS = new threeStats(this.renderer.threeRenderer);\n\n    rS = new rStats({\n      CSSPath: './css/',\n      userTimingAPI: true,\n      values: {\n        frame: { caption: 'Total frame time (ms)', over: 16, average: true, avgMs: 100 },\n        fps: { caption: 'Framerate (FPS)', below: 30 },\n        calls: { caption: 'Calls (three.js)', over: 3000 },\n        raf: { caption: 'Time since last rAF (ms)', average: true, avgMs: 100 },\n        rstats: { caption: 'rStats update (ms)', average: true, avgMs: 100 },\n        texture: { caption: 'GenTex', average: true, avgMs: 100 }\n      },\n      groups: [\n        { caption: 'Framerate', values: ['fps', 'raf'] },\n        { caption: 'Frame Budget', values: ['frame', 'texture', 'setup', 'render'] }\n      ],\n      fractions: [\n        { base: 'frame', steps: ['texture', 'setup', 'render'] }\n      ],\n      plugins: [bS, tS]\n    });\n  }\n\n  static start() {\n    rS('frame').start();\n    glS.start();\n\n    rS('rAF').tick();\n    rS('FPS').frame();\n\n    rS('render').start();\n  }\n\n  static end() {\n    rS('render').end(); // render finished\n    rS('frame').end(); // frame finished\n\n    // Local rStats update\n    rS('rStats').start();\n    rS().update();\n    rS('rStats').end();\n  }\n}\n","import * as THREE from 'three';\n\nimport Material from './material';\nimport Config from '../../data/config';\n\n// This helper class can be used to create and then place geometry in the scene\nexport default class Geometry {\n  constructor(scene) {\n    this.scene = scene;\n    this.geo = null;\n  }\n\n  make(type) {\n    if(type === 'plane') {\n      return (width, height, widthSegments = 1, heightSegments = 1) => {\n        this.geo = new THREE.PlaneGeometry(width, height, widthSegments, heightSegments);\n      };\n    }\n\n    if(type === 'sphere') {\n      return (radius, widthSegments = 32, heightSegments = 32) => {\n        this.geo = new THREE.SphereGeometry(radius, widthSegments, heightSegments);\n      };\n    }\n  }\n\n  place(position, rotation) {\n    const material = new Material(0xeeeeee).standard;\n    const mesh = new THREE.Mesh(this.geo, material);\n\n    // Use ES6 spread to set position and rotation from passed in array\n    mesh.position.set(...position);\n    mesh.rotation.set(...rotation);\n\n    if(Config.shadow.enabled) {\n      mesh.receiveShadow = true;\n    }\n\n    this.scene.add(mesh);\n  }\n}\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nimport {\n  BufferGeometry,\n  Float32BufferAttribute,\n  LineSegments,\n  LineBasicMaterial,\n  Matrix3,\n  Vector3,\n} from 'three';\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _normalMatrix = new Matrix3();\nconst _keys = ['a', 'b', 'c'];\n\nfunction VertexNormalsHelper(object, size, hex) {\n  this.object = object;\n  this.size = size !== undefined ? size : 0.1;\n\n  const color = hex !== undefined ? hex : 0xff0000;\n\n  //\n\n  let nNormals = 0;\n\n  const objGeometry = this.object.geometry;\n\n  if (objGeometry && objGeometry.isGeometry) {\n    nNormals = objGeometry.faces.length * 3;\n  } else if (objGeometry && objGeometry.isBufferGeometry) {\n    nNormals = objGeometry.attributes.normal.count;\n  }\n\n  //\n\n  const geometry = new BufferGeometry();\n  const positions = new Float32BufferAttribute(nNormals * 2 * 3, 3);\n\n  geometry.setAttribute('position', positions);\n\n  LineSegments.call(this, geometry, new LineBasicMaterial({ color: color, toneMapped: false }));\n\n  this.type = 'VertexNormalsHelper';\n\n  //\n\n  this.matrixAutoUpdate = false;\n\n  this.update();\n}\n\nVertexNormalsHelper.prototype = Object.create(LineSegments.prototype);\nVertexNormalsHelper.prototype.constructor = VertexNormalsHelper;\n\nVertexNormalsHelper.prototype.update = function () {\n  let idx;\n  this.object.updateMatrixWorld(true);\n\n  _normalMatrix.getNormalMatrix(this.object.matrixWorld);\n\n  const matrixWorld = this.object.matrixWorld;\n  const position = this.geometry.attributes.position;\n\n  //\n\n  const objGeometry = this.object.geometry;\n\n  if (objGeometry && objGeometry.isGeometry) {\n    const vertices = objGeometry.vertices;\n\n    const faces = objGeometry.faces;\n\n    idx = 0;\n\n    for (let i = 0, l = faces.length; i < l; i++) {\n      const face = faces[i];\n\n      for (let j = 0, jl = face.vertexNormals.length; j < jl; j++) {\n        const vertex = vertices[face[_keys[j]]];\n        const normal = face.vertexNormals[j];\n\n        _v1.copy(vertex).applyMatrix4(matrixWorld);\n        _v2.copy(normal).applyMatrix3(_normalMatrix).normalize().multiplyScalar(this.size).add(_v1);\n\n        position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n\n        idx = idx + 1;\n\n        position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n\n        idx = idx + 1;\n      }\n    }\n  } else if (objGeometry && objGeometry.isBufferGeometry) {\n    const objPos = objGeometry.attributes.position;\n    const objNorm = objGeometry.attributes.normal;\n\n    idx = 0;\n\n    // for simplicity, ignore index and drawcalls, and render every normal\n\n    for (var j = 0, jl = objPos.count; j < jl; j++) {\n      _v1.set(objPos.getX(j), objPos.getY(j), objPos.getZ(j)).applyMatrix4(matrixWorld);\n      _v2.set(objNorm.getX(j), objNorm.getY(j), objNorm.getZ(j));\n      _v2.applyMatrix3(_normalMatrix).normalize().multiplyScalar(this.size).add(_v1);\n\n      position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n\n      idx = idx + 1;\n\n      position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n\n      idx = idx + 1;\n    }\n  }\n\n  position.needsUpdate = true;\n};\n\nexport { VertexNormalsHelper };\n","import * as THREE from 'three';\nimport { VertexNormalsHelper } from './vertexNormalsHelper';\n\n// Simple mesh helper that shows edges, wireframes, and face and vertex normals\nexport default class MeshHelper {\n  constructor(scene, mesh) {\n    this.mesh = mesh;\n    this.scene = scene;\n\n    const wireframe = new THREE.WireframeGeometry(this.mesh.geometry);\n    this.wireLine = new THREE.LineSegments(wireframe);\n    this.wireLine.material.depthTest = false;\n    this.wireLine.material.opacity = 0.25;\n    this.wireLine.material.transparent = true;\n\n    const edges = new THREE.EdgesGeometry(this.mesh.geometry);\n    this.edgesLine = new THREE.LineSegments(edges);\n    this.edgesLine.material.depthTest = false;\n    this.edgesLine.material.opacity = 0.25;\n    this.edgesLine.material.transparent = true;\n\n    this.vertexHelper = new VertexNormalsHelper(this.mesh, 2);\n    this.boxHelper = new THREE.BoxHelper(this.mesh);\n  }\n\n  enable() {\n    this.mesh.add(this.wireLine);\n    this.mesh.add(this.edgesLine);\n\n    this.scene.add(this.vertexHelper);\n    this.scene.add(this.boxHelper);\n  }\n\n  disable() {\n    this.mesh.remove(this.wireLine);\n    this.mesh.remove(this.edgesLine);\n\n    this.scene.remove(this.vertexHelper);\n    this.scene.remove(this.boxHelper);\n  }\n}\n","// Provides simple static functions that are used multiple times in the app\nexport default class Helpers {\n  static throttle(fn, threshhold, scope) {\n    threshhold || (threshhold = 250);\n    let last, deferTimer;\n\n    return function() {\n      const context = scope || this;\n\n      const now  = +new Date,\n        args = arguments;\n\n      if(last && now < last + threshhold) {\n        clearTimeout(deferTimer);\n        deferTimer = setTimeout(function() {\n          last = now;\n          fn.apply(context, args);\n        }, threshhold);\n      }\n      else {\n        last = now;\n        fn.apply(context, args);\n      }\n    };\n  }\n\n  static logProgress() {\n    return function(xhr) {\n      if(xhr.lengthComputable) {\n        const percentComplete = xhr.loaded / xhr.total * 100;\n\n        console.log(Math.round(percentComplete, 2) + '% downloaded');\n      }\n    }\n  }\n\n  static logError() {\n    return function(xhr) {\n      console.error(xhr);\n    }\n  }\n\n  static handleColorChange(color) {\n    return (value) => {\n      if(typeof value === 'string') {\n        value = value.replace('#', '0x');\n      }\n\n      color.setHex(value);\n    };\n  }\n\n  static update(mesh) {\n    this.needsUpdate(mesh.material, mesh.geometry);\n  }\n\n  static needsUpdate(material, geometry) {\n    return function() {\n      material.shading = +material.shading; //Ensure number\n      material.vertexColors = +material.vertexColors; //Ensure number\n      material.side = +material.side; //Ensure number\n      material.needsUpdate = true;\n      geometry.verticesNeedUpdate = true;\n      geometry.normalsNeedUpdate = true;\n      geometry.colorsNeedUpdate = true;\n    };\n  }\n\n  static updateTexture(material, materialKey, textures) {\n    return function(key) {\n      material[materialKey] = textures[key];\n      material.needsUpdate = true;\n    };\n  }\n}\n","import * as THREE from 'three';\n// Promise polyfill for IE\nimport { Promise } from 'es6-promise';\n\nimport Helpers from '../../utils/helpers';\nimport Config from '../../data/config';\n\n// This class preloads all textures in the imageFiles array in the Config via ES6 Promises.\n// Once all textures are done loading the model itself will be loaded after the Promise .then() callback.\n// Using promises to preload textures prevents issues when applying textures to materials\n// before the textures have loaded.\nexport default class Texture {\n  constructor() {\n    // Prop that will contain all loaded textures\n    this.textures = {};\n  }\n\n  load() {\n    const loader = new THREE.TextureLoader();\n    const maxAnisotropy = Config.maxAnisotropy;\n    const imageFiles = Config.texture.imageFiles;\n    const promiseArray = [];\n\n    loader.setPath(Config.texture.path);\n\n    imageFiles.forEach(imageFile => {\n      // Add an individual Promise for each image in array\n      promiseArray.push(new Promise((resolve, reject) => {\n        // Each Promise will attempt to load the image file\n        loader.load(imageFile.image,\n          // This gets called on load with the loaded texture\n          texture => {\n            texture.anisotropy = maxAnisotropy;\n\n            // Resolve Promise with object of texture if it is instance of THREE.Texture\n            const modelOBJ = {};\n            modelOBJ[imageFile.name] = texture;\n            if(modelOBJ[imageFile.name] instanceof THREE.Texture)\n              resolve(modelOBJ);\n          },\n          Helpers.logProgress(),\n          xhr => reject(new Error(xhr + 'An error occurred loading while loading ' + imageFile.image))\n        )\n      }));\n    });\n\n    // Iterate through all Promises in array and return another Promise when all have resolved or console log reason when any reject\n    return Promise.all(promiseArray).then(textures => {\n      // Set the textures prop object to have name be the resolved texture\n      for(let i = 0; i < textures.length; i++) {\n        this.textures[Object.keys(textures[i])[0]] = textures[i][Object.keys(textures[i])[0]];\n      }\n    }, reason => console.log(reason));\n  }\n}\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport {\n  BufferAttribute,\n  BufferGeometry,\n  InterleavedBuffer,\n  InterleavedBufferAttribute,\n  TriangleFanDrawMode,\n  TriangleStripDrawMode,\n  TrianglesDrawMode,\n  Vector2,\n  Vector3,\n} from 'three';\n\nvar BufferGeometryUtils = {\n  computeTangents: function (geometry) {\n    var index = geometry.index;\n    var attributes = geometry.attributes;\n\n    // based on http://www.terathon.com/code/tangent.html\n    // (per vertex tangents)\n\n    if (\n      index === null ||\n      attributes.position === undefined ||\n      attributes.normal === undefined ||\n      attributes.uv === undefined\n    ) {\n      console.error(\n        'THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)'\n      );\n      return;\n    }\n\n    var indices = index.array;\n    var positions = attributes.position.array;\n    var normals = attributes.normal.array;\n    var uvs = attributes.uv.array;\n\n    var nVertices = positions.length / 3;\n\n    if (attributes.tangent === undefined) {\n      geometry.setAttribute('tangent', new BufferAttribute(new Float32Array(4 * nVertices), 4));\n    }\n\n    var tangents = attributes.tangent.array;\n\n    var tan1 = [],\n        tan2 = [];\n\n    for (var i = 0; i < nVertices; i++) {\n      tan1[i] = new Vector3();\n      tan2[i] = new Vector3();\n    }\n\n    var vA = new Vector3(),\n        vB = new Vector3(),\n        vC = new Vector3(),\n        uvA = new Vector2(),\n        uvB = new Vector2(),\n        uvC = new Vector2(),\n        sdir = new Vector3(),\n        tdir = new Vector3();\n\n    function handleTriangle(a, b, c) {\n      vA.fromArray(positions, a * 3);\n      vB.fromArray(positions, b * 3);\n      vC.fromArray(positions, c * 3);\n\n      uvA.fromArray(uvs, a * 2);\n      uvB.fromArray(uvs, b * 2);\n      uvC.fromArray(uvs, c * 2);\n\n      vB.sub(vA);\n      vC.sub(vA);\n\n      uvB.sub(uvA);\n      uvC.sub(uvA);\n\n      var r = 1.0 / (uvB.x * uvC.y - uvC.x * uvB.y);\n\n      // silently ignore degenerate uv triangles having coincident or colinear vertices\n\n      if (!isFinite(r)) return;\n\n      sdir.copy(vB).multiplyScalar(uvC.y).addScaledVector(vC, -uvB.y).multiplyScalar(r);\n      tdir.copy(vC).multiplyScalar(uvB.x).addScaledVector(vB, -uvC.x).multiplyScalar(r);\n\n      tan1[a].add(sdir);\n      tan1[b].add(sdir);\n      tan1[c].add(sdir);\n\n      tan2[a].add(tdir);\n      tan2[b].add(tdir);\n      tan2[c].add(tdir);\n    }\n\n    var groups = geometry.groups;\n\n    if (groups.length === 0) {\n      groups = [\n        {\n          start: 0,\n          count: indices.length,\n        },\n      ];\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleTriangle(indices[j + 0], indices[j + 1], indices[j + 2]);\n      }\n    }\n\n    var tmp = new Vector3(),\n        tmp2 = new Vector3();\n    var n = new Vector3(),\n        n2 = new Vector3();\n    var w, t, test;\n\n    function handleVertex(v) {\n      n.fromArray(normals, v * 3);\n      n2.copy(n);\n\n      t = tan1[v];\n\n      // Gram-Schmidt orthogonalize\n\n      tmp.copy(t);\n      tmp.sub(n.multiplyScalar(n.dot(t))).normalize();\n\n      // Calculate handedness\n\n      tmp2.crossVectors(n2, t);\n      test = tmp2.dot(tan2[v]);\n      w = test < 0.0 ? -1.0 : 1.0;\n\n      tangents[v * 4] = tmp.x;\n      tangents[v * 4 + 1] = tmp.y;\n      tangents[v * 4 + 2] = tmp.z;\n      tangents[v * 4 + 3] = w;\n    }\n\n    for (var i = 0, il = groups.length; i < il; ++i) {\n      var group = groups[i];\n\n      var start = group.start;\n      var count = group.count;\n\n      for (var j = start, jl = start + count; j < jl; j += 3) {\n        handleVertex(indices[j + 0]);\n        handleVertex(indices[j + 1]);\n        handleVertex(indices[j + 2]);\n      }\n    }\n  },\n\n  /**\n   * @param  {Array<BufferGeometry>} geometries\n   * @param  {Boolean} useGroups\n   * @return {BufferGeometry}\n   */\n  mergeBufferGeometries: function (geometries, useGroups) {\n    var isIndexed = geometries[0].index !== null;\n\n    var attributesUsed = new Set(Object.keys(geometries[0].attributes));\n    var morphAttributesUsed = new Set(Object.keys(geometries[0].morphAttributes));\n\n    var attributes = {};\n    var morphAttributes = {};\n\n    var morphTargetsRelative = geometries[0].morphTargetsRelative;\n\n    var mergedGeometry = new BufferGeometry();\n\n    var offset = 0;\n\n    for (var i = 0; i < geometries.length; ++i) {\n      var geometry = geometries[i];\n      var attributesCount = 0;\n\n      // ensure that all geometries are indexed, or none\n\n      if (isIndexed !== (geometry.index !== null)) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.'\n        );\n        return null;\n      }\n\n      // gather attributes, exit early if they're different\n\n      for (var name in geometry.attributes) {\n        if (!attributesUsed.has(name)) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '. All geometries must have compatible attributes; make sure \"' +\n            name +\n            '\" attribute exists among all geometries, or in none of them.'\n          );\n          return null;\n        }\n\n        if (attributes[name] === undefined) attributes[name] = [];\n\n        attributes[name].push(geometry.attributes[name]);\n\n        attributesCount++;\n      }\n\n      // ensure geometries have the same number of attributes\n\n      if (attributesCount !== attributesUsed.size) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. Make sure all geometries have the same number of attributes.'\n        );\n        return null;\n      }\n\n      // gather morph attributes, exit early if they're different\n\n      if (morphTargetsRelative !== geometry.morphTargetsRelative) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n          i +\n          '. .morphTargetsRelative must be consistent throughout all geometries.'\n        );\n        return null;\n      }\n\n      for (var name in geometry.morphAttributes) {\n        if (!morphAttributesUsed.has(name)) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '.  .morphAttributes must be consistent throughout all geometries.'\n          );\n          return null;\n        }\n\n        if (morphAttributes[name] === undefined) morphAttributes[name] = [];\n\n        morphAttributes[name].push(geometry.morphAttributes[name]);\n      }\n\n      // gather .userData\n\n      mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\n      mergedGeometry.userData.mergedUserData.push(geometry.userData);\n\n      if (useGroups) {\n        var count;\n\n        if (isIndexed) {\n          count = geometry.index.count;\n        } else if (geometry.attributes.position !== undefined) {\n          count = geometry.attributes.position.count;\n        } else {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index ' +\n            i +\n            '. The geometry must have either an index or a position attribute'\n          );\n          return null;\n        }\n\n        mergedGeometry.addGroup(offset, count, i);\n\n        offset += count;\n      }\n    }\n\n    // merge indices\n\n    if (isIndexed) {\n      var indexOffset = 0;\n      var mergedIndex = [];\n\n      for (var i = 0; i < geometries.length; ++i) {\n        var index = geometries[i].index;\n\n        for (var j = 0; j < index.count; ++j) {\n          mergedIndex.push(index.getX(j) + indexOffset);\n        }\n\n        indexOffset += geometries[i].attributes.position.count;\n      }\n\n      mergedGeometry.setIndex(mergedIndex);\n    }\n\n    // merge attributes\n\n    for (var name in attributes) {\n      var mergedAttribute = this.mergeBufferAttributes(attributes[name]);\n\n      if (!mergedAttribute) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the ' +\n          name +\n          ' attribute.'\n        );\n        return null;\n      }\n\n      mergedGeometry.setAttribute(name, mergedAttribute);\n    }\n\n    // merge morph attributes\n\n    for (var name in morphAttributes) {\n      var numMorphTargets = morphAttributes[name][0].length;\n\n      if (numMorphTargets === 0) break;\n\n      mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\n      mergedGeometry.morphAttributes[name] = [];\n\n      for (var i = 0; i < numMorphTargets; ++i) {\n        var morphAttributesToMerge = [];\n\n        for (var j = 0; j < morphAttributes[name].length; ++j) {\n          morphAttributesToMerge.push(morphAttributes[name][j][i]);\n        }\n\n        var mergedMorphAttribute = this.mergeBufferAttributes(morphAttributesToMerge);\n\n        if (!mergedMorphAttribute) {\n          console.error(\n            'THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the ' +\n            name +\n            ' morphAttribute.'\n          );\n          return null;\n        }\n\n        mergedGeometry.morphAttributes[name].push(mergedMorphAttribute);\n      }\n    }\n\n    return mergedGeometry;\n  },\n\n  /**\n   * @param {Array<BufferAttribute>} attributes\n   * @return {BufferAttribute}\n   */\n  mergeBufferAttributes: function (attributes) {\n    var TypedArray;\n    var itemSize;\n    var normalized;\n    var arrayLength = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      var attribute = attributes[i];\n\n      if (attribute.isInterleavedBufferAttribute) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported.'\n        );\n        return null;\n      }\n\n      if (TypedArray === undefined) TypedArray = attribute.array.constructor;\n      if (TypedArray !== attribute.array.constructor) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.'\n        );\n        return null;\n      }\n\n      if (itemSize === undefined) itemSize = attribute.itemSize;\n      if (itemSize !== attribute.itemSize) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.'\n        );\n        return null;\n      }\n\n      if (normalized === undefined) normalized = attribute.normalized;\n      if (normalized !== attribute.normalized) {\n        console.error(\n          'THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.'\n        );\n        return null;\n      }\n\n      arrayLength += attribute.array.length;\n    }\n\n    var array = new TypedArray(arrayLength);\n    var offset = 0;\n\n    for (var i = 0; i < attributes.length; ++i) {\n      array.set(attributes[i].array, offset);\n\n      offset += attributes[i].array.length;\n    }\n\n    return new BufferAttribute(array, itemSize, normalized);\n  },\n\n  /**\n   * @param {Array<BufferAttribute>} attributes\n   * @return {Array<InterleavedBufferAttribute>}\n   */\n  interleaveAttributes: function (attributes) {\n    // Interleaves the provided attributes into an InterleavedBuffer and returns\n    // a set of InterleavedBufferAttributes for each attribute\n    var TypedArray;\n    var arrayLength = 0;\n    var stride = 0;\n\n    // calculate the the length and type of the interleavedBuffer\n    for (var i = 0, l = attributes.length; i < l; ++i) {\n      var attribute = attributes[i];\n\n      if (TypedArray === undefined) TypedArray = attribute.array.constructor;\n      if (TypedArray !== attribute.array.constructor) {\n        console.error('AttributeBuffers of different types cannot be interleaved');\n        return null;\n      }\n\n      arrayLength += attribute.array.length;\n      stride += attribute.itemSize;\n    }\n\n    // Create the set of buffer attributes\n    var interleavedBuffer = new InterleavedBuffer(new TypedArray(arrayLength), stride);\n    var offset = 0;\n    var res = [];\n    var getters = ['getX', 'getY', 'getZ', 'getW'];\n    var setters = ['setX', 'setY', 'setZ', 'setW'];\n\n    for (var j = 0, l = attributes.length; j < l; j++) {\n      var attribute = attributes[j];\n      var itemSize = attribute.itemSize;\n      var count = attribute.count;\n      var iba = new InterleavedBufferAttribute(\n        interleavedBuffer,\n        itemSize,\n        offset,\n        attribute.normalized\n      );\n      res.push(iba);\n\n      offset += itemSize;\n\n      // Move the data for each attribute into the new interleavedBuffer\n      // at the appropriate offset\n      for (var c = 0; c < count; c++) {\n        for (var k = 0; k < itemSize; k++) {\n          iba[setters[k]](c, attribute[getters[k]](c));\n        }\n      }\n    }\n\n    return res;\n  },\n\n  /**\n   * @param {Array<BufferGeometry>} geometry\n   * @return {number}\n   */\n  estimateBytesUsed: function (geometry) {\n    // Return the estimated memory used by this geometry in bytes\n    // Calculate using itemSize, count, and BYTES_PER_ELEMENT to account\n    // for InterleavedBufferAttributes.\n    var mem = 0;\n    for (var name in geometry.attributes) {\n      var attr = geometry.getAttribute(name);\n      mem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\n    }\n\n    var indices = geometry.getIndex();\n    mem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\n    return mem;\n  },\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {number} tolerance\n   * @return {BufferGeometry>}\n   */\n  mergeVertices: function (geometry, tolerance = 1e-4) {\n    tolerance = Math.max(tolerance, Number.EPSILON);\n\n    // Generate an index buffer if the geometry doesn't have one, or optimize it\n    // if it's already available.\n    var hashToIndex = {};\n    var indices = geometry.getIndex();\n    var positions = geometry.getAttribute('position');\n    var vertexCount = indices ? indices.count : positions.count;\n\n    // next value for triangle indices\n    var nextIndex = 0;\n\n    // attributes and new attribute arrays\n    var attributeNames = Object.keys(geometry.attributes);\n    var attrArrays = {};\n    var morphAttrsArrays = {};\n    var newIndices = [];\n    var getters = ['getX', 'getY', 'getZ', 'getW'];\n\n    // initialize the arrays\n    for (var i = 0, l = attributeNames.length; i < l; i++) {\n      var name = attributeNames[i];\n\n      attrArrays[name] = [];\n\n      var morphAttr = geometry.morphAttributes[name];\n      if (morphAttr) {\n        morphAttrsArrays[name] = new Array(morphAttr.length).fill().map(() => []);\n      }\n    }\n\n    // convert the error tolerance to an amount of decimal places to truncate to\n    var decimalShift = Math.log10(1 / tolerance);\n    var shiftMultiplier = Math.pow(10, decimalShift);\n    for (var i = 0; i < vertexCount; i++) {\n      var index = indices ? indices.getX(i) : i;\n\n      // Generate a hash for the vertex attributes at the current index 'i'\n      var hash = '';\n      for (var j = 0, l = attributeNames.length; j < l; j++) {\n        var name = attributeNames[j];\n        var attribute = geometry.getAttribute(name);\n        var itemSize = attribute.itemSize;\n\n        for (var k = 0; k < itemSize; k++) {\n          // double tilde truncates the decimal value\n          hash += `${~~(attribute[getters[k]](index) * shiftMultiplier)},`;\n        }\n      }\n\n      // Add another reference to the vertex if it's already\n      // used by another index\n      if (hash in hashToIndex) {\n        newIndices.push(hashToIndex[hash]);\n      } else {\n        // copy data to the new index in the attribute arrays\n        for (var j = 0, l = attributeNames.length; j < l; j++) {\n          var name = attributeNames[j];\n          var attribute = geometry.getAttribute(name);\n          var morphAttr = geometry.morphAttributes[name];\n          var itemSize = attribute.itemSize;\n          var newarray = attrArrays[name];\n          var newMorphArrays = morphAttrsArrays[name];\n\n          for (var k = 0; k < itemSize; k++) {\n            var getterFunc = getters[k];\n            newarray.push(attribute[getterFunc](index));\n\n            if (morphAttr) {\n              for (var m = 0, ml = morphAttr.length; m < ml; m++) {\n                newMorphArrays[m].push(morphAttr[m][getterFunc](index));\n              }\n            }\n          }\n        }\n\n        hashToIndex[hash] = nextIndex;\n        newIndices.push(nextIndex);\n        nextIndex++;\n      }\n    }\n\n    // Generate typed arrays from new attribute arrays and update\n    // the attributeBuffers\n    const result = geometry.clone();\n    for (var i = 0, l = attributeNames.length; i < l; i++) {\n      var name = attributeNames[i];\n      var oldAttribute = geometry.getAttribute(name);\n\n      var buffer = new oldAttribute.array.constructor(attrArrays[name]);\n      var attribute = new BufferAttribute(buffer, oldAttribute.itemSize, oldAttribute.normalized);\n\n      result.setAttribute(name, attribute);\n\n      // Update the attribute arrays\n      if (name in morphAttrsArrays) {\n        for (var j = 0; j < morphAttrsArrays[name].length; j++) {\n          var oldMorphAttribute = geometry.morphAttributes[name][j];\n\n          var buffer = new oldMorphAttribute.array.constructor(morphAttrsArrays[name][j]);\n          var morphAttribute = new BufferAttribute(\n            buffer,\n            oldMorphAttribute.itemSize,\n            oldMorphAttribute.normalized\n          );\n          result.morphAttributes[name][j] = morphAttribute;\n        }\n      }\n    }\n\n    // indices\n\n    result.setIndex(newIndices);\n\n    return result;\n  },\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {number} drawMode\n   * @return {BufferGeometry>}\n   */\n  toTrianglesDrawMode: function (geometry, drawMode) {\n    if (drawMode === TrianglesDrawMode) {\n      console.warn(\n        'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.'\n      );\n      return geometry;\n    }\n\n    if (drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode) {\n      var index = geometry.getIndex();\n\n      // generate index if not present\n\n      if (index === null) {\n        var indices = [];\n\n        var position = geometry.getAttribute('position');\n\n        if (position !== undefined) {\n          for (var i = 0; i < position.count; i++) {\n            indices.push(i);\n          }\n\n          geometry.setIndex(indices);\n          index = geometry.getIndex();\n        } else {\n          console.error(\n            'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.'\n          );\n          return geometry;\n        }\n      }\n\n      //\n\n      var numberOfTriangles = index.count - 2;\n      var newIndices = [];\n\n      if (drawMode === TriangleFanDrawMode) {\n        // gl.TRIANGLE_FAN\n\n        for (var i = 1; i <= numberOfTriangles; i++) {\n          newIndices.push(index.getX(0));\n          newIndices.push(index.getX(i));\n          newIndices.push(index.getX(i + 1));\n        }\n      } else {\n        // gl.TRIANGLE_STRIP\n\n        for (var i = 0; i < numberOfTriangles; i++) {\n          if (i % 2 === 0) {\n            newIndices.push(index.getX(i));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i + 2));\n          } else {\n            newIndices.push(index.getX(i + 2));\n            newIndices.push(index.getX(i + 1));\n            newIndices.push(index.getX(i));\n          }\n        }\n      }\n\n      if (newIndices.length / 3 !== numberOfTriangles) {\n        console.error(\n          'THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.'\n        );\n      }\n\n      // build final geometry\n\n      var newGeometry = geometry.clone();\n      newGeometry.setIndex(newIndices);\n      newGeometry.clearGroups();\n\n      return newGeometry;\n    }\n\n    console.error('THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:', drawMode);\n    return geometry;\n  },\n};\n\nexport { BufferGeometryUtils };\n","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport {\n  AnimationClip,\n  Bone,\n  Box3,\n  BufferAttribute,\n  BufferGeometry,\n  ClampToEdgeWrapping,\n  Color,\n  DirectionalLight,\n  DoubleSide,\n  FileLoader,\n  FrontSide,\n  Group,\n  InterleavedBuffer,\n  InterleavedBufferAttribute,\n  Interpolant,\n  InterpolateDiscrete,\n  InterpolateLinear,\n  Line,\n  LineBasicMaterial,\n  LineLoop,\n  LineSegments,\n  LinearFilter,\n  LinearMipmapLinearFilter,\n  LinearMipmapNearestFilter,\n  Loader,\n  LoaderUtils,\n  Material,\n  MathUtils,\n  Matrix4,\n  Mesh,\n  MeshBasicMaterial,\n  MeshPhysicalMaterial,\n  MeshStandardMaterial,\n  MirroredRepeatWrapping,\n  NearestFilter,\n  NearestMipmapLinearFilter,\n  NearestMipmapNearestFilter,\n  NumberKeyframeTrack,\n  Object3D,\n  OrthographicCamera,\n  PerspectiveCamera,\n  PointLight,\n  Points,\n  PointsMaterial,\n  PropertyBinding,\n  QuaternionKeyframeTrack,\n  RGBAFormat,\n  RGBFormat,\n  RepeatWrapping,\n  Skeleton,\n  SkinnedMesh,\n  Sphere,\n  SpotLight,\n  TangentSpaceNormalMap,\n  TextureLoader,\n  TriangleFanDrawMode,\n  TriangleStripDrawMode,\n  Vector2,\n  Vector3,\n  VectorKeyframeTrack,\n  sRGBEncoding\n} from 'three';\n\nconst GLTFLoader = (function () {\n  function GLTFLoader(manager) {\n    Loader.call(this, manager);\n\n    this.dracoLoader = null;\n    this.ddsLoader = null;\n  }\n\n  GLTFLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n    constructor: GLTFLoader,\n\n    load: function (url, onLoad, onProgress, onError) {\n      var scope = this;\n\n      var resourcePath;\n\n      if (this.resourcePath !== '') {\n        resourcePath = this.resourcePath;\n      } else if (this.path !== '') {\n        resourcePath = this.path;\n      } else {\n        resourcePath = LoaderUtils.extractUrlBase(url);\n      }\n\n      // Tells the LoadingManager to track an extra item, which resolves after\n      // the model is fully loaded. This means the count of items loaded will\n      // be incorrect, but ensures manager.onLoad() does not fire early.\n      scope.manager.itemStart(url);\n\n      var _onError = function (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n        scope.manager.itemEnd(url);\n      };\n\n      var loader = new FileLoader(scope.manager);\n\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n\n      if (scope.crossOrigin === 'use-credentials') {\n        loader.setWithCredentials(true);\n      }\n\n      loader.load(\n        url,\n        function (data) {\n          try {\n            scope.parse(\n              data,\n              resourcePath,\n              function (gltf) {\n                onLoad(gltf);\n\n                scope.manager.itemEnd(url);\n              },\n              _onError\n            );\n          } catch (e) {\n            _onError(e);\n          }\n        },\n        onProgress,\n        _onError\n      );\n    },\n\n    setDRACOLoader: function (dracoLoader) {\n      this.dracoLoader = dracoLoader;\n      return this;\n    },\n\n    setDDSLoader: function (ddsLoader) {\n      this.ddsLoader = ddsLoader;\n      return this;\n    },\n\n    parse: function (data, path, onLoad, onError) {\n      var content;\n      var extensions = {};\n\n      if (typeof data === 'string') {\n        content = data;\n      } else {\n        var magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n        if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n          try {\n            extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n          } catch (error) {\n            if (onError) onError(error);\n            return;\n          }\n\n          content = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n        } else {\n          content = LoaderUtils.decodeText(new Uint8Array(data));\n        }\n      }\n\n      var json = JSON.parse(content);\n\n      if (json.asset === undefined || json.asset.version[0] < 2) {\n        if (onError)\n          onError(\n            new Error('THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.')\n          );\n        return;\n      }\n\n      if (json.extensionsUsed) {\n        for (var i = 0; i < json.extensionsUsed.length; ++i) {\n          var extensionName = json.extensionsUsed[i];\n          var extensionsRequired = json.extensionsRequired || [];\n\n          switch (extensionName) {\n            case EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n              extensions[extensionName] = new GLTFLightsExtension(json);\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_CLEARCOAT:\n              extensions[extensionName] = new GLTFMaterialsClearcoatExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_UNLIT:\n              extensions[extensionName] = new GLTFMaterialsUnlitExtension();\n              break;\n\n            case EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n              extensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n              break;\n\n            case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n              extensions[extensionName] = new GLTFDracoMeshCompressionExtension(\n                json,\n                this.dracoLoader\n              );\n              break;\n\n            case EXTENSIONS.MSFT_TEXTURE_DDS:\n              extensions[extensionName] = new GLTFTextureDDSExtension(this.ddsLoader);\n              break;\n\n            case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n              extensions[extensionName] = new GLTFTextureTransformExtension();\n              break;\n\n            case EXTENSIONS.KHR_MESH_QUANTIZATION:\n              extensions[extensionName] = new GLTFMeshQuantizationExtension();\n              break;\n\n            default:\n              if (extensionsRequired.indexOf(extensionName) >= 0) {\n                console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\n              }\n          }\n        }\n      }\n\n      var parser = new GLTFParser(json, extensions, {\n        path: path || this.resourcePath || '',\n        crossOrigin: this.crossOrigin,\n        manager: this.manager\n      });\n\n      parser.parse(onLoad, onError);\n    },\n  });\n\n  /* GLTFREGISTRY */\n\n  function GLTFRegistry() {\n    var objects = {};\n\n    return {\n      get: function (key) {\n        return objects[key];\n      },\n\n      add: function (key, object) {\n        objects[key] = object;\n      },\n\n      remove: function (key) {\n        delete objects[key];\n      },\n\n      removeAll: function () {\n        objects = {};\n      },\n    };\n  }\n\n  /*********************************/\n  /********** EXTENSIONS ***********/\n  /*********************************/\n\n  var EXTENSIONS = {\n    KHR_BINARY_GLTF: 'KHR_binary_glTF',\n    KHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n    KHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n    KHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n    KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n    KHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n    KHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n    KHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n    MSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n  };\n\n  /**\n   * DDS Texture Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n   *\n   */\n  function GLTFTextureDDSExtension(ddsLoader) {\n    if (!ddsLoader) {\n      throw new Error(\n        'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader'\n      );\n    }\n\n    this.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n    this.ddsLoader = ddsLoader;\n  }\n\n  /**\n   * Punctual Lights Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n   */\n  function GLTFLightsExtension(json) {\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n    var extension = (json.extensions && json.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]) || {};\n    this.lightDefs = extension.lights || [];\n  }\n\n  GLTFLightsExtension.prototype.loadLight = function (lightIndex) {\n    var lightDef = this.lightDefs[lightIndex];\n    var lightNode;\n\n    var color = new Color(0xffffff);\n    if (lightDef.color !== undefined) color.fromArray(lightDef.color);\n\n    var range = lightDef.range !== undefined ? lightDef.range : 0;\n\n    switch (lightDef.type) {\n      case 'directional':\n        lightNode = new DirectionalLight(color);\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n\n      case 'point':\n        lightNode = new PointLight(color);\n        lightNode.distance = range;\n        break;\n\n      case 'spot':\n        lightNode = new SpotLight(color);\n        lightNode.distance = range;\n        // Handle spotlight properties.\n        lightDef.spot = lightDef.spot || {};\n        lightDef.spot.innerConeAngle =\n          lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n        lightDef.spot.outerConeAngle =\n          lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n        lightNode.angle = lightDef.spot.outerConeAngle;\n        lightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n        lightNode.target.position.set(0, 0, -1);\n        lightNode.add(lightNode.target);\n        break;\n\n      default:\n        throw new Error('THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".');\n    }\n\n    // Some lights (e.g. spot) default to a position other than the origin. Reset the position\n    // here, because node-level parsing will only override position if explicitly specified.\n    lightNode.position.set(0, 0, 0);\n\n    lightNode.decay = 2;\n\n    if (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n\n    lightNode.name = lightDef.name || 'light_' + lightIndex;\n\n    return Promise.resolve(lightNode);\n  };\n\n  /**\n   * Unlit Materials Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n   */\n  function GLTFMaterialsUnlitExtension() {\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n  }\n\n  GLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n    return MeshBasicMaterial;\n  };\n\n  GLTFMaterialsUnlitExtension.prototype.extendParams = function (\n    materialParams,\n    materialDef,\n    parser\n  ) {\n    var pending = [];\n\n    materialParams.color = new Color(1.0, 1.0, 1.0);\n    materialParams.opacity = 1.0;\n\n    var metallicRoughness = materialDef.pbrMetallicRoughness;\n\n    if (metallicRoughness) {\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        var array = metallicRoughness.baseColorFactor;\n\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture)\n        );\n      }\n    }\n\n    return Promise.all(pending);\n  };\n\n  /**\n   * Clearcoat Materials Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n   */\n  function GLTFMaterialsClearcoatExtension() {\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n  }\n\n  GLTFMaterialsClearcoatExtension.prototype.getMaterialType = function () {\n    return MeshPhysicalMaterial;\n  };\n\n  GLTFMaterialsClearcoatExtension.prototype.extendParams = function (\n    materialParams,\n    materialDef,\n    parser\n  ) {\n    var pending = [];\n\n    var extension = materialDef.extensions[this.name];\n\n    if (extension.clearcoatFactor !== undefined) {\n      materialParams.clearcoat = extension.clearcoatFactor;\n    }\n\n    if (extension.clearcoatTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture)\n      );\n    }\n\n    if (extension.clearcoatRoughnessFactor !== undefined) {\n      materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n    }\n\n    if (extension.clearcoatRoughnessTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(\n          materialParams,\n          'clearcoatRoughnessMap',\n          extension.clearcoatRoughnessTexture\n        )\n      );\n    }\n\n    if (extension.clearcoatNormalTexture !== undefined) {\n      pending.push(\n        parser.assignTexture(\n          materialParams,\n          'clearcoatNormalMap',\n          extension.clearcoatNormalTexture\n        )\n      );\n\n      if (extension.clearcoatNormalTexture.scale !== undefined) {\n        var scale = extension.clearcoatNormalTexture.scale;\n\n        materialParams.clearcoatNormalScale = new Vector2(scale, scale);\n      }\n    }\n\n    return Promise.all(pending);\n  };\n\n  /* BINARY EXTENSION */\n  var BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n  var BINARY_EXTENSION_HEADER_LENGTH = 12;\n  var BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4e4f534a, BIN: 0x004e4942 };\n\n  function GLTFBinaryExtension(data) {\n    this.name = EXTENSIONS.KHR_BINARY_GLTF;\n    this.content = null;\n    this.body = null;\n\n    var headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n\n    this.header = {\n      magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n      version: headerView.getUint32(4, true),\n      length: headerView.getUint32(8, true)\n    };\n\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n      throw new Error('THREE.GLTFLoader: Unsupported glTF-Binary header.');\n    } else if (this.header.version < 2.0) {\n      throw new Error('THREE.GLTFLoader: Legacy binary file detected.');\n    }\n\n    var chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n    var chunkIndex = 0;\n\n    while (chunkIndex < chunkView.byteLength) {\n      var chunkLength = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n\n      var chunkType = chunkView.getUint32(chunkIndex, true);\n      chunkIndex += 4;\n\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n        var contentArray = new Uint8Array(\n          data,\n          BINARY_EXTENSION_HEADER_LENGTH + chunkIndex,\n          chunkLength\n        );\n        this.content = LoaderUtils.decodeText(contentArray);\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n        var byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n        this.body = data.slice(byteOffset, byteOffset + chunkLength);\n      }\n\n      // Clients must ignore chunks with unknown types.\n\n      chunkIndex += chunkLength;\n    }\n\n    if (this.content === null) {\n      throw new Error('THREE.GLTFLoader: JSON content not found.');\n    }\n  }\n\n  /**\n   * DRACO Mesh Compression Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n   */\n  function GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n    if (!dracoLoader) {\n      throw new Error('THREE.GLTFLoader: No DRACOLoader instance provided.');\n    }\n\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n    this.json = json;\n    this.dracoLoader = dracoLoader;\n    this.dracoLoader.preload();\n  }\n\n  GLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function (primitive, parser) {\n    var json = this.json;\n    var dracoLoader = this.dracoLoader;\n    var bufferViewIndex = primitive.extensions[this.name].bufferView;\n    var gltfAttributeMap = primitive.extensions[this.name].attributes;\n    var threeAttributeMap = {};\n    var attributeNormalizedMap = {};\n    var attributeTypeMap = {};\n\n    for (var attributeName in gltfAttributeMap) {\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n    }\n\n    for (attributeName in primitive.attributes) {\n      var threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n      if (gltfAttributeMap[attributeName] !== undefined) {\n        var accessorDef = json.accessors[primitive.attributes[attributeName]];\n        var componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n        attributeTypeMap[threeAttributeName] = componentType;\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n      }\n    }\n\n    return parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n      return new Promise(function (resolve) {\n        dracoLoader.decodeDracoFile(\n          bufferView,\n          function (geometry) {\n            for (var attributeName in geometry.attributes) {\n              var attribute = geometry.attributes[attributeName];\n              var normalized = attributeNormalizedMap[attributeName];\n\n              if (normalized !== undefined) attribute.normalized = normalized;\n            }\n\n            resolve(geometry);\n          },\n          threeAttributeMap,\n          attributeTypeMap\n        );\n      });\n    });\n  };\n\n  /**\n   * Texture Transform Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n   */\n  function GLTFTextureTransformExtension() {\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n  }\n\n  GLTFTextureTransformExtension.prototype.extendTexture = function (texture, transform) {\n    texture = texture.clone();\n\n    if (transform.offset !== undefined) {\n      texture.offset.fromArray(transform.offset);\n    }\n\n    if (transform.rotation !== undefined) {\n      texture.rotation = transform.rotation;\n    }\n\n    if (transform.scale !== undefined) {\n      texture.repeat.fromArray(transform.scale);\n    }\n\n    if (transform.texCoord !== undefined) {\n      console.warn(\n        'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.'\n      );\n    }\n\n    texture.needsUpdate = true;\n\n    return texture;\n  };\n\n  /**\n   * Specular-Glossiness Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n   */\n\n  /**\n   * A sub class of StandardMaterial with some of the functionality\n   * changed via the `onBeforeCompile` callback\n   * @pailhead\n   */\n\n  function GLTFMeshStandardSGMaterial(params) {\n    MeshStandardMaterial.call(this);\n\n    this.isGLTFSpecularGlossinessMaterial = true;\n\n    //various chunks that need replacing\n    var specularMapParsFragmentChunk = [\n      '#ifdef USE_SPECULARMAP',\n      '\tuniform sampler2D specularMap;',\n      '#endif',\n    ].join('\\n');\n\n    var glossinessMapParsFragmentChunk = [\n      '#ifdef USE_GLOSSINESSMAP',\n      '\tuniform sampler2D glossinessMap;',\n      '#endif',\n    ].join('\\n');\n\n    var specularMapFragmentChunk = [\n      'vec3 specularFactor = specular;',\n      '#ifdef USE_SPECULARMAP',\n      '\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n      '\ttexelSpecular = sRGBToLinear( texelSpecular );',\n      '\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n      '\tspecularFactor *= texelSpecular.rgb;',\n      '#endif',\n    ].join('\\n');\n\n    var glossinessMapFragmentChunk = [\n      'float glossinessFactor = glossiness;',\n      '#ifdef USE_GLOSSINESSMAP',\n      '\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n      '\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n      '\tglossinessFactor *= texelGlossiness.a;',\n      '#endif',\n    ].join('\\n');\n\n    var lightPhysicalFragmentChunk = [\n      'PhysicalMaterial material;',\n      'material.diffuseColor = diffuseColor.rgb;',\n      'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n      'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n      'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n      'material.specularRoughness += geometryRoughness;',\n      'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n      'material.specularColor = specularFactor.rgb;',\n    ].join('\\n');\n\n    var uniforms = {\n      specular: { value: new Color().setHex(0xffffff) },\n      glossiness: { value: 1 },\n      specularMap: { value: null },\n      glossinessMap: { value: null },\n    };\n\n    this._extraUniforms = uniforms;\n\n    // please see #14031 or #13198 for an alternate approach\n    this.onBeforeCompile = function (shader) {\n      for (var uniformName in uniforms) {\n        shader.uniforms[uniformName] = uniforms[uniformName];\n      }\n\n      shader.fragmentShader = shader.fragmentShader.replace(\n        'uniform float roughness;',\n        'uniform vec3 specular;'\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        'uniform float metalness;',\n        'uniform float glossiness;'\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        '#include <roughnessmap_pars_fragment>',\n        specularMapParsFragmentChunk\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        '#include <metalnessmap_pars_fragment>',\n        glossinessMapParsFragmentChunk\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        '#include <roughnessmap_fragment>',\n        specularMapFragmentChunk\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        '#include <metalnessmap_fragment>',\n        glossinessMapFragmentChunk\n      );\n      shader.fragmentShader = shader.fragmentShader.replace(\n        '#include <lights_physical_fragment>',\n        lightPhysicalFragmentChunk\n      );\n    };\n\n    /*eslint-disable*/\n    Object.defineProperties(this, {\n      specular: {\n        get: function () {\n          return uniforms.specular.value;\n        },\n        set: function (v) {\n          uniforms.specular.value = v;\n        },\n      },\n      specularMap: {\n        get: function () {\n          return uniforms.specularMap.value;\n        },\n        set: function (v) {\n          uniforms.specularMap.value = v;\n        },\n      },\n      glossiness: {\n        get: function () {\n          return uniforms.glossiness.value;\n        },\n        set: function (v) {\n          uniforms.glossiness.value = v;\n        },\n      },\n      glossinessMap: {\n        get: function () {\n          return uniforms.glossinessMap.value;\n        },\n        set: function (v) {\n          uniforms.glossinessMap.value = v;\n          //how about something like this - @pailhead\n          if (v) {\n            this.defines.USE_GLOSSINESSMAP = '';\n            // set USE_ROUGHNESSMAP to enable vUv\n            this.defines.USE_ROUGHNESSMAP = '';\n          } else {\n            delete this.defines.USE_ROUGHNESSMAP;\n            delete this.defines.USE_GLOSSINESSMAP;\n          }\n        },\n      },\n    });\n\n    /*eslint-enable*/\n    delete this.metalness;\n    delete this.roughness;\n    delete this.metalnessMap;\n    delete this.roughnessMap;\n\n    this.setValues(params);\n  }\n\n  GLTFMeshStandardSGMaterial.prototype = Object.create(MeshStandardMaterial.prototype);\n  GLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n  GLTFMeshStandardSGMaterial.prototype.copy = function (source) {\n    MeshStandardMaterial.prototype.copy.call(this, source);\n    this.specularMap = source.specularMap;\n    this.specular.copy(source.specular);\n    this.glossinessMap = source.glossinessMap;\n    this.glossiness = source.glossiness;\n    delete this.metalness;\n    delete this.roughness;\n    delete this.metalnessMap;\n    delete this.roughnessMap;\n    return this;\n  };\n\n  function GLTFMaterialsPbrSpecularGlossinessExtension() {\n    return {\n      name: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n      specularGlossinessParams: [\n        'color',\n        'map',\n        'lightMap',\n        'lightMapIntensity',\n        'aoMap',\n        'aoMapIntensity',\n        'emissive',\n        'emissiveIntensity',\n        'emissiveMap',\n        'bumpMap',\n        'bumpScale',\n        'normalMap',\n        'normalMapType',\n        'displacementMap',\n        'displacementScale',\n        'displacementBias',\n        'specularMap',\n        'specular',\n        'glossinessMap',\n        'glossiness',\n        'alphaMap',\n        'envMap',\n        'envMapIntensity',\n        'refractionRatio',\n      ],\n\n      getMaterialType: function () {\n        return GLTFMeshStandardSGMaterial;\n      },\n\n      extendParams: function (materialParams, materialDef, parser) {\n        var pbrSpecularGlossiness = materialDef.extensions[this.name];\n\n        materialParams.color = new Color(1.0, 1.0, 1.0);\n        materialParams.opacity = 1.0;\n\n        var pending = [];\n\n        if (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n          var array = pbrSpecularGlossiness.diffuseFactor;\n\n          materialParams.color.fromArray(array);\n          materialParams.opacity = array[3];\n        }\n\n        if (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n          pending.push(\n            parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture)\n          );\n        }\n\n        materialParams.emissive = new Color(0.0, 0.0, 0.0);\n        materialParams.glossiness =\n          pbrSpecularGlossiness.glossinessFactor !== undefined\n            ? pbrSpecularGlossiness.glossinessFactor\n            : 1.0;\n        materialParams.specular = new Color(1.0, 1.0, 1.0);\n\n        if (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n          materialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n        }\n\n        if (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n          var specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n          pending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n          pending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n        }\n\n        return Promise.all(pending);\n      },\n\n      createMaterial: function (materialParams) {\n        var material = new GLTFMeshStandardSGMaterial(materialParams);\n        material.fog = true;\n\n        material.color = materialParams.color;\n\n        material.map = materialParams.map === undefined ? null : materialParams.map;\n\n        material.lightMap = null;\n        material.lightMapIntensity = 1.0;\n\n        material.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n        material.aoMapIntensity = 1.0;\n\n        material.emissive = materialParams.emissive;\n        material.emissiveIntensity = 1.0;\n        material.emissiveMap =\n          materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n        material.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n        material.bumpScale = 1;\n\n        material.normalMap =\n          materialParams.normalMap === undefined ? null : materialParams.normalMap;\n        material.normalMapType = TangentSpaceNormalMap;\n\n        if (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n\n        material.displacementMap = null;\n        material.displacementScale = 1;\n        material.displacementBias = 0;\n\n        material.specularMap =\n          materialParams.specularMap === undefined ? null : materialParams.specularMap;\n        material.specular = materialParams.specular;\n\n        material.glossinessMap =\n          materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n        material.glossiness = materialParams.glossiness;\n\n        material.alphaMap = null;\n\n        material.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n        material.envMapIntensity = 1.0;\n\n        material.refractionRatio = 0.98;\n\n        return material;\n      },\n    };\n  }\n\n  /**\n   * Mesh Quantization Extension\n   *\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n   */\n  function GLTFMeshQuantizationExtension() {\n    this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n  }\n\n  /*********************************/\n  /********** INTERPOLATION ********/\n  /*********************************/\n\n  // Spline Interpolation\n  // Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n  function GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n    Interpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n  }\n\n  GLTFCubicSplineInterpolant.prototype = Object.create(Interpolant.prototype);\n  GLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n  GLTFCubicSplineInterpolant.prototype.copySampleValue_ = function (index) {\n    // Copies a sample value to the result buffer. See description of glTF\n    // CUBICSPLINE values layout in interpolate_() function below.\n\n    var result = this.resultBuffer,\n        values = this.sampleValues,\n        valueSize = this.valueSize,\n        offset = index * valueSize * 3 + valueSize;\n\n    for (var i = 0; i !== valueSize; i++) {\n      result[i] = values[offset + i];\n    }\n\n    return result;\n  };\n\n  GLTFCubicSplineInterpolant.prototype.beforeStart_ =\n    GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n  GLTFCubicSplineInterpolant.prototype.afterEnd_ =\n    GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n  GLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n    var result = this.resultBuffer;\n    var values = this.sampleValues;\n    var stride = this.valueSize;\n\n    var stride2 = stride * 2;\n    var stride3 = stride * 3;\n\n    var td = t1 - t0;\n\n    var p = (t - t0) / td;\n    var pp = p * p;\n    var ppp = pp * p;\n\n    var offset1 = i1 * stride3;\n    var offset0 = offset1 - stride3;\n\n    var s2 = -2 * ppp + 3 * pp;\n    var s3 = ppp - pp;\n    var s0 = 1 - s2;\n    var s1 = s3 - pp + p;\n\n    // Layout of keyframe output values for CUBICSPLINE animations:\n    //   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n    for (var i = 0; i !== stride; i++) {\n      var p0 = values[offset0 + i + stride]; // splineVertex_k\n      var m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n      var p1 = values[offset1 + i + stride]; // splineVertex_k+1\n      var m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n    }\n\n    return result;\n  };\n\n  /*********************************/\n  /********** INTERNALS ************/\n  /*********************************/\n\n  /* CONSTANTS */\n\n  var WEBGL_CONSTANTS = {\n    FLOAT: 5126,\n    //FLOAT_MAT2: 35674,\n    FLOAT_MAT3: 35675,\n    FLOAT_MAT4: 35676,\n    FLOAT_VEC2: 35664,\n    FLOAT_VEC3: 35665,\n    FLOAT_VEC4: 35666,\n    LINEAR: 9729,\n    REPEAT: 10497,\n    SAMPLER_2D: 35678,\n    POINTS: 0,\n    LINES: 1,\n    LINE_LOOP: 2,\n    LINE_STRIP: 3,\n    TRIANGLES: 4,\n    TRIANGLE_STRIP: 5,\n    TRIANGLE_FAN: 6,\n    UNSIGNED_BYTE: 5121,\n    UNSIGNED_SHORT: 5123,\n  };\n\n  var WEBGL_COMPONENT_TYPES = {\n    5120: Int8Array,\n    5121: Uint8Array,\n    5122: Int16Array,\n    5123: Uint16Array,\n    5125: Uint32Array,\n    5126: Float32Array,\n  };\n\n  var WEBGL_FILTERS = {\n    9728: NearestFilter,\n    9729: LinearFilter,\n    9984: NearestMipmapNearestFilter,\n    9985: LinearMipmapNearestFilter,\n    9986: NearestMipmapLinearFilter,\n    9987: LinearMipmapLinearFilter,\n  };\n\n  var WEBGL_WRAPPINGS = {\n    33071: ClampToEdgeWrapping,\n    33648: MirroredRepeatWrapping,\n    10497: RepeatWrapping,\n  };\n\n  var WEBGL_TYPE_SIZES = {\n    SCALAR: 1,\n    VEC2: 2,\n    VEC3: 3,\n    VEC4: 4,\n    MAT2: 4,\n    MAT3: 9,\n    MAT4: 16,\n  };\n\n  var ATTRIBUTES = {\n    POSITION: 'position',\n    NORMAL: 'normal',\n    TANGENT: 'tangent',\n    TEXCOORD_0: 'uv',\n    TEXCOORD_1: 'uv2',\n    COLOR_0: 'color',\n    WEIGHTS_0: 'skinWeight',\n    JOINTS_0: 'skinIndex',\n  };\n\n  var PATH_PROPERTIES = {\n    scale: 'scale',\n    translation: 'position',\n    rotation: 'quaternion',\n    weights: 'morphTargetInfluences',\n  };\n\n  var INTERPOLATION = {\n    CUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n    // keyframe track will be initialized with a default interpolation type, then modified.\n    LINEAR: InterpolateLinear,\n    STEP: InterpolateDiscrete,\n  };\n\n  var ALPHA_MODES = {\n    OPAQUE: 'OPAQUE',\n    MASK: 'MASK',\n    BLEND: 'BLEND',\n  };\n\n  var MIME_TYPE_FORMATS = {\n    'image/png': RGBAFormat,\n    'image/jpeg': RGBFormat,\n  };\n\n  /* UTILITY FUNCTIONS */\n\n  function resolveURL(url, path) {\n    // Invalid URL\n    if (typeof url !== 'string' || url === '') return '';\n\n    // Host Relative URL\n    if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n      // eslint-disable-next-line no-useless-escape\n      path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n    }\n\n    // Absolute URL http://,https://,//\n    if (/^(https?:)?\\/\\//i.test(url)) return url;\n\n    // Data URI\n    if (/^data:.*,.*$/i.test(url)) return url;\n\n    // Blob URL\n    if (/^blob:.*$/i.test(url)) return url;\n\n    // Relative URL\n    return path + url;\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n   */\n  function createDefaultMaterial(cache) {\n    if (cache['DefaultMaterial'] === undefined) {\n      cache['DefaultMaterial'] = new MeshStandardMaterial({\n        color: 0xffffff,\n        emissive: 0x000000,\n        metalness: 1,\n        roughness: 1,\n        transparent: false,\n        depthTest: true,\n        side: FrontSide,\n      });\n    }\n\n    return cache['DefaultMaterial'];\n  }\n\n  function addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n    // Add unknown glTF extensions to an object's userData.\n\n    for (var name in objectDef.extensions) {\n      if (knownExtensions[name] === undefined) {\n        object.userData.gltfExtensions = object.userData.gltfExtensions || {};\n        object.userData.gltfExtensions[name] = objectDef.extensions[name];\n      }\n    }\n  }\n\n  /**\n   * @param {Object3D|Material|BufferGeometry} object\n   * @param {GLTF.definition} gltfDef\n   */\n  function assignExtrasToUserData(object, gltfDef) {\n    if (gltfDef.extras !== undefined) {\n      if (typeof gltfDef.extras === 'object') {\n        Object.assign(object.userData, gltfDef.extras);\n      } else {\n        console.warn('THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n      }\n    }\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n   *\n   * @param {BufferGeometry} geometry\n   * @param {Array<GLTF.Target>} targets\n   * @param {GLTFParser} parser\n   * @return {Promise<BufferGeometry>}\n   */\n  function addMorphTargets(geometry, targets, parser) {\n    var hasMorphPosition = false;\n    var hasMorphNormal = false;\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i];\n\n      if (target.POSITION !== undefined) hasMorphPosition = true;\n      if (target.NORMAL !== undefined) hasMorphNormal = true;\n\n      if (hasMorphPosition && hasMorphNormal) break;\n    }\n\n    if (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n\n    var pendingPositionAccessors = [];\n    var pendingNormalAccessors = [];\n\n    for (var i = 0, il = targets.length; i < il; i++) {\n      var target = targets[i];\n\n      if (hasMorphPosition) {\n        var pendingAccessor =\n              target.POSITION !== undefined\n                ? parser.getDependency('accessor', target.POSITION)\n                : geometry.attributes.position;\n\n        pendingPositionAccessors.push(pendingAccessor);\n      }\n\n      if (hasMorphNormal) {\n        var pendingAccessor =\n              target.NORMAL !== undefined\n                ? parser.getDependency('accessor', target.NORMAL)\n                : geometry.attributes.normal;\n\n        pendingNormalAccessors.push(pendingAccessor);\n      }\n    }\n\n    return Promise.all([\n      Promise.all(pendingPositionAccessors),\n      Promise.all(pendingNormalAccessors),\n    ]).then(function (accessors) {\n      var morphPositions = accessors[0];\n      var morphNormals = accessors[1];\n\n      if (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n      if (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n      geometry.morphTargetsRelative = true;\n\n      return geometry;\n    });\n  }\n\n  /**\n   * @param {Mesh} mesh\n   * @param {GLTF.Mesh} meshDef\n   */\n  function updateMorphTargets(mesh, meshDef) {\n    mesh.updateMorphTargets();\n\n    if (meshDef.weights !== undefined) {\n      for (var i = 0, il = meshDef.weights.length; i < il; i++) {\n        mesh.morphTargetInfluences[i] = meshDef.weights[i];\n      }\n    }\n\n    // .extras has user-defined data, so check that .extras.targetNames is an array.\n    if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n      var targetNames = meshDef.extras.targetNames;\n\n      if (mesh.morphTargetInfluences.length === targetNames.length) {\n        mesh.morphTargetDictionary = {};\n\n        for (var i = 0, il = targetNames.length; i < il; i++) {\n          mesh.morphTargetDictionary[targetNames[i]] = i;\n        }\n      } else {\n        console.warn('THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n      }\n    }\n  }\n\n  function createPrimitiveKey(primitiveDef) {\n    var dracoExtension =\n          primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n    var geometryKey;\n\n    if (dracoExtension) {\n      geometryKey =\n        'draco:' +\n        dracoExtension.bufferView +\n        ':' +\n        dracoExtension.indices +\n        ':' +\n        createAttributesKey(dracoExtension.attributes);\n    } else {\n      geometryKey =\n        primitiveDef.indices +\n        ':' +\n        createAttributesKey(primitiveDef.attributes) +\n        ':' +\n        primitiveDef.mode;\n    }\n\n    return geometryKey;\n  }\n\n  function createAttributesKey(attributes) {\n    var attributesKey = '';\n\n    var keys = Object.keys(attributes).sort();\n\n    for (var i = 0, il = keys.length; i < il; i++) {\n      attributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n    }\n\n    return attributesKey;\n  }\n\n  /* GLTF PARSER */\n\n  function GLTFParser(json, extensions, options) {\n    this.json = json || {};\n    this.extensions = extensions || {};\n    this.options = options || {};\n\n    // loader object cache\n    this.cache = new GLTFRegistry();\n\n    // BufferGeometry caching\n    this.primitiveCache = {};\n\n    this.textureLoader = new TextureLoader(this.options.manager);\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\n\n    this.fileLoader = new FileLoader(this.options.manager);\n    this.fileLoader.setResponseType('arraybuffer');\n\n    if (this.options.crossOrigin === 'use-credentials') {\n      this.fileLoader.setWithCredentials(true);\n    }\n  }\n\n  GLTFParser.prototype.parse = function (onLoad, onError) {\n    var parser = this;\n    var json = this.json;\n    var extensions = this.extensions;\n\n    // Clear the loader cache\n    this.cache.removeAll();\n\n    // Mark the special nodes/meshes in json for efficient parse\n    this.markDefs();\n\n    Promise.all([\n      this.getDependencies('scene'),\n      this.getDependencies('animation'),\n      this.getDependencies('camera'),\n    ])\n      .then(function (dependencies) {\n        var result = {\n          scene: dependencies[0][json.scene || 0],\n          scenes: dependencies[0],\n          animations: dependencies[1],\n          cameras: dependencies[2],\n          asset: json.asset,\n          parser: parser,\n          userData: {},\n        };\n\n        addUnknownExtensionsToUserData(extensions, result, json);\n\n        assignExtrasToUserData(result, json);\n\n        onLoad(result);\n      })\n      .catch(onError);\n  };\n\n  /**\n   * Marks the special nodes/meshes in json for efficient parse.\n   */\n  GLTFParser.prototype.markDefs = function () {\n    var nodeDefs = this.json.nodes || [];\n    var skinDefs = this.json.skins || [];\n    var meshDefs = this.json.meshes || [];\n\n    var meshReferences = {};\n    var meshUses = {};\n\n    // Nothing in the node definition indicates whether it is a Bone or an\n    // Object3D. Use the skins' joint references to mark bones.\n    for (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n      var joints = skinDefs[skinIndex].joints;\n\n      for (var i = 0, il = joints.length; i < il; i++) {\n        nodeDefs[joints[i]].isBone = true;\n      }\n    }\n\n    // Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n    // avoid having more than one Mesh with the same name, count\n    // references and rename instances below.\n    //\n    // Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n    for (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n      var nodeDef = nodeDefs[nodeIndex];\n\n      if (nodeDef.mesh !== undefined) {\n        if (meshReferences[nodeDef.mesh] === undefined) {\n          meshReferences[nodeDef.mesh] = meshUses[nodeDef.mesh] = 0;\n        }\n\n        meshReferences[nodeDef.mesh]++;\n\n        // Nothing in the mesh definition indicates whether it is\n        // a SkinnedMesh or Mesh. Use the node's mesh reference\n        // to mark SkinnedMesh if node has skin.\n        if (nodeDef.skin !== undefined) {\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true;\n        }\n      }\n    }\n\n    this.json.meshReferences = meshReferences;\n    this.json.meshUses = meshUses;\n  };\n\n  /**\n   * Requests the specified dependency asynchronously, with caching.\n   * @param {string} type\n   * @param {number} index\n   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n   */\n  GLTFParser.prototype.getDependency = function (type, index) {\n    var cacheKey = type + ':' + index;\n    var dependency = this.cache.get(cacheKey);\n\n    if (!dependency) {\n      switch (type) {\n        case 'scene':\n          dependency = this.loadScene(index);\n          break;\n\n        case 'node':\n          dependency = this.loadNode(index);\n          break;\n\n        case 'mesh':\n          dependency = this.loadMesh(index);\n          break;\n\n        case 'accessor':\n          dependency = this.loadAccessor(index);\n          break;\n\n        case 'bufferView':\n          dependency = this.loadBufferView(index);\n          break;\n\n        case 'buffer':\n          dependency = this.loadBuffer(index);\n          break;\n\n        case 'material':\n          dependency = this.loadMaterial(index);\n          break;\n\n        case 'texture':\n          dependency = this.loadTexture(index);\n          break;\n\n        case 'skin':\n          dependency = this.loadSkin(index);\n          break;\n\n        case 'animation':\n          dependency = this.loadAnimation(index);\n          break;\n\n        case 'camera':\n          dependency = this.loadCamera(index);\n          break;\n\n        case 'light':\n          dependency = this.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].loadLight(index);\n          break;\n\n        default:\n          throw new Error('Unknown type: ' + type);\n      }\n\n      this.cache.add(cacheKey, dependency);\n    }\n\n    return dependency;\n  };\n\n  /**\n   * Requests all dependencies of the specified type asynchronously, with caching.\n   * @param {string} type\n   * @return {Promise<Array<Object>>}\n   */\n  GLTFParser.prototype.getDependencies = function (type) {\n    var dependencies = this.cache.get(type);\n\n    if (!dependencies) {\n      var parser = this;\n      var defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n\n      dependencies = Promise.all(\n        defs.map(function (def, index) {\n          return parser.getDependency(type, index);\n        })\n      );\n\n      this.cache.add(type, dependencies);\n    }\n\n    return dependencies;\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  GLTFParser.prototype.loadBuffer = function (bufferIndex) {\n    var bufferDef = this.json.buffers[bufferIndex];\n    var loader = this.fileLoader;\n\n    if (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n      throw new Error('THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n    }\n\n    // If present, GLB container is required to be the first buffer.\n    if (bufferDef.uri === undefined && bufferIndex === 0) {\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n    }\n\n    var options = this.options;\n\n    return new Promise(function (resolve, reject) {\n      loader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n      });\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n   * @param {number} bufferViewIndex\n   * @return {Promise<ArrayBuffer>}\n   */\n  GLTFParser.prototype.loadBufferView = function (bufferViewIndex) {\n    var bufferViewDef = this.json.bufferViews[bufferViewIndex];\n\n    return this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n      var byteLength = bufferViewDef.byteLength || 0;\n      var byteOffset = bufferViewDef.byteOffset || 0;\n      return buffer.slice(byteOffset, byteOffset + byteLength);\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n   * @param {number} accessorIndex\n   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n   */\n  GLTFParser.prototype.loadAccessor = function (accessorIndex) {\n    var parser = this;\n    var json = this.json;\n\n    var accessorDef = this.json.accessors[accessorIndex];\n\n    if (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n      // Ignore empty accessors, which may be used to declare runtime\n      // information about attributes coming from another source (e.g. Draco\n      // compression extension).\n      return Promise.resolve(null);\n    }\n\n    var pendingBufferViews = [];\n\n    if (accessorDef.bufferView !== undefined) {\n      pendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n    } else {\n      pendingBufferViews.push(null);\n    }\n\n    if (accessorDef.sparse !== undefined) {\n      pendingBufferViews.push(\n        this.getDependency('bufferView', accessorDef.sparse.indices.bufferView)\n      );\n      pendingBufferViews.push(\n        this.getDependency('bufferView', accessorDef.sparse.values.bufferView)\n      );\n    }\n\n    return Promise.all(pendingBufferViews).then(function (bufferViews) {\n      var bufferView = bufferViews[0];\n\n      var itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n      var TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n      // For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n      var elementBytes = TypedArray.BYTES_PER_ELEMENT;\n      var itemBytes = elementBytes * itemSize;\n      var byteOffset = accessorDef.byteOffset || 0;\n      var byteStride =\n            accessorDef.bufferView !== undefined\n              ? json.bufferViews[accessorDef.bufferView].byteStride\n              : undefined;\n      var normalized = accessorDef.normalized === true;\n      var array, bufferAttribute;\n\n      // The buffer is not interleaved if the stride is the item size in bytes.\n      if (byteStride && byteStride !== itemBytes) {\n        // Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n        // This makes sure that IBA.count reflects accessor.count properly\n        var ibSlice = Math.floor(byteOffset / byteStride);\n        var ibCacheKey =\n              'InterleavedBuffer:' +\n              accessorDef.bufferView +\n              ':' +\n              accessorDef.componentType +\n              ':' +\n              ibSlice +\n              ':' +\n              accessorDef.count;\n        var ib = parser.cache.get(ibCacheKey);\n\n        if (!ib) {\n          array = new TypedArray(\n            bufferView,\n            ibSlice * byteStride,\n            (accessorDef.count * byteStride) / elementBytes\n          );\n\n          // Integer parameters to IB/IBA are in array elements, not bytes.\n          ib = new InterleavedBuffer(array, byteStride / elementBytes);\n\n          parser.cache.add(ibCacheKey, ib);\n        }\n\n        bufferAttribute = new InterleavedBufferAttribute(\n          ib,\n          itemSize,\n          (byteOffset % byteStride) / elementBytes,\n          normalized\n        );\n      } else {\n        if (bufferView === null) {\n          array = new TypedArray(accessorDef.count * itemSize);\n        } else {\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n        }\n\n        bufferAttribute = new BufferAttribute(array, itemSize, normalized);\n      }\n\n      // https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n      if (accessorDef.sparse !== undefined) {\n        var itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n        var TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n\n        var byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n        var byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n        var sparseIndices = new TypedArrayIndices(\n          bufferViews[1],\n          byteOffsetIndices,\n          accessorDef.sparse.count * itemSizeIndices\n        );\n        var sparseValues = new TypedArray(\n          bufferViews[2],\n          byteOffsetValues,\n          accessorDef.sparse.count * itemSize\n        );\n\n        if (bufferView !== null) {\n          // Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n          bufferAttribute = new BufferAttribute(\n            bufferAttribute.array.slice(),\n            bufferAttribute.itemSize,\n            bufferAttribute.normalized\n          );\n        }\n\n        for (var i = 0, il = sparseIndices.length; i < il; i++) {\n          var index = sparseIndices[i];\n\n          bufferAttribute.setX(index, sparseValues[i * itemSize]);\n          if (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n          if (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n          if (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n          if (itemSize >= 5)\n            throw new Error('THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n        }\n      }\n\n      return bufferAttribute;\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n   * @param {number} textureIndex\n   * @return {Promise<THREE.Texture>}\n   */\n  GLTFParser.prototype.loadTexture = function (textureIndex) {\n    var parser = this;\n    var json = this.json;\n    var options = this.options;\n    var textureLoader = this.textureLoader;\n\n    var URL = self.URL || self.webkitURL;\n\n    var textureDef = json.textures[textureIndex];\n\n    var textureExtensions = textureDef.extensions || {};\n\n    var source;\n\n    if (textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]) {\n      source = json.images[textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS].source];\n    } else {\n      source = json.images[textureDef.source];\n    }\n\n    var sourceURI = source.uri;\n    var isObjectURL = false;\n\n    if (source.bufferView !== undefined) {\n      // Load binary image data from bufferView, if provided.\n\n      sourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n        isObjectURL = true;\n        var blob = new Blob([bufferView], { type: source.mimeType });\n        sourceURI = URL.createObjectURL(blob);\n        return sourceURI;\n      });\n    }\n\n    return Promise.resolve(sourceURI)\n      .then(function (sourceURI) {\n        // Load Texture resource.\n\n        var loader = options.manager.getHandler(sourceURI);\n\n        if (!loader) {\n          loader = textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]\n            ? parser.extensions[EXTENSIONS.MSFT_TEXTURE_DDS].ddsLoader\n            : textureLoader;\n        }\n\n        return new Promise(function (resolve, reject) {\n          loader.load(resolveURL(sourceURI, options.path), resolve, undefined, reject);\n        });\n      })\n      .then(function (texture) {\n        // Clean up resources and configure Texture.\n\n        if (isObjectURL === true) {\n          URL.revokeObjectURL(sourceURI);\n        }\n\n        texture.flipY = false;\n\n        if (textureDef.name) texture.name = textureDef.name;\n\n        // Ignore unknown mime types, like DDS files.\n        if (source.mimeType in MIME_TYPE_FORMATS) {\n          texture.format = MIME_TYPE_FORMATS[source.mimeType];\n        }\n\n        var samplers = json.samplers || {};\n        var sampler = samplers[textureDef.sampler] || {};\n\n        texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n        texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n        texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n        texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n\n        return texture;\n      });\n  };\n\n  /**\n   * Asynchronously assigns a texture to the given material parameters.\n   * @param {Object} materialParams\n   * @param {string} mapName\n   * @param {Object} mapDef\n   * @return {Promise}\n   */\n  GLTFParser.prototype.assignTexture = function (materialParams, mapName, mapDef) {\n    var parser = this;\n\n    return this.getDependency('texture', mapDef.index).then(function (texture) {\n      if (!texture.isCompressedTexture) {\n        switch (mapName) {\n          case 'aoMap':\n          case 'emissiveMap':\n          case 'metalnessMap':\n          case 'normalMap':\n          case 'roughnessMap':\n            texture.format = RGBFormat;\n            break;\n        }\n      }\n\n      // Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n      // However, we will copy UV set 0 to UV set 1 on demand for aoMap\n      if (\n        mapDef.texCoord !== undefined &&\n        mapDef.texCoord != 0 &&\n        !(mapName === 'aoMap' && mapDef.texCoord == 1)\n      ) {\n        console.warn(\n          'THREE.GLTFLoader: Custom UV set ' +\n          mapDef.texCoord +\n          ' for texture ' +\n          mapName +\n          ' not yet supported.'\n        );\n      }\n\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n        var transform =\n              mapDef.extensions !== undefined\n                ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]\n                : undefined;\n\n        if (transform) {\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(\n            texture,\n            transform\n          );\n        }\n      }\n\n      materialParams[mapName] = texture;\n    });\n  };\n\n  /**\n   * Assigns final material to a Mesh, Line, or Points instance. The instance\n   * already has a material (generated from the glTF material options alone)\n   * but reuse of the same glTF material may require multiple threejs materials\n   * to accomodate different primitive types, defines, etc. New materials will\n   * be created if necessary, and reused from a cache.\n   * @param  {Object3D} mesh Mesh, Line, or Points instance.\n   */\n  GLTFParser.prototype.assignFinalMaterial = function (mesh) {\n    var geometry = mesh.geometry;\n    var material = mesh.material;\n\n    var useVertexTangents = geometry.attributes.tangent !== undefined;\n    var useVertexColors = geometry.attributes.color !== undefined;\n    var useFlatShading = geometry.attributes.normal === undefined;\n    var useSkinning = mesh.isSkinnedMesh === true;\n    var useMorphTargets = Object.keys(geometry.morphAttributes).length > 0;\n    var useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n    if (mesh.isPoints) {\n      var cacheKey = 'PointsMaterial:' + material.uuid;\n\n      var pointsMaterial = this.cache.get(cacheKey);\n\n      if (!pointsMaterial) {\n        pointsMaterial = new PointsMaterial();\n        Material.prototype.copy.call(pointsMaterial, material);\n        pointsMaterial.color.copy(material.color);\n        pointsMaterial.map = material.map;\n        pointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n        this.cache.add(cacheKey, pointsMaterial);\n      }\n\n      material = pointsMaterial;\n    } else if (mesh.isLine) {\n      var cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n      var lineMaterial = this.cache.get(cacheKey);\n\n      if (!lineMaterial) {\n        lineMaterial = new LineBasicMaterial();\n        Material.prototype.copy.call(lineMaterial, material);\n        lineMaterial.color.copy(material.color);\n\n        this.cache.add(cacheKey, lineMaterial);\n      }\n\n      material = lineMaterial;\n    }\n\n    // Clone the material if it will be modified\n    if (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n      var cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n      if (material.isGLTFSpecularGlossinessMaterial) cacheKey += 'specular-glossiness:';\n      if (useSkinning) cacheKey += 'skinning:';\n      if (useVertexTangents) cacheKey += 'vertex-tangents:';\n      if (useVertexColors) cacheKey += 'vertex-colors:';\n      if (useFlatShading) cacheKey += 'flat-shading:';\n      if (useMorphTargets) cacheKey += 'morph-targets:';\n      if (useMorphNormals) cacheKey += 'morph-normals:';\n\n      var cachedMaterial = this.cache.get(cacheKey);\n\n      if (!cachedMaterial) {\n        cachedMaterial = material.clone();\n\n        if (useSkinning) cachedMaterial.skinning = true;\n        if (useVertexTangents) cachedMaterial.vertexTangents = true;\n        if (useVertexColors) cachedMaterial.vertexColors = true;\n        if (useFlatShading) cachedMaterial.flatShading = true;\n        if (useMorphTargets) cachedMaterial.morphTargets = true;\n        if (useMorphNormals) cachedMaterial.morphNormals = true;\n\n        this.cache.add(cacheKey, cachedMaterial);\n      }\n\n      material = cachedMaterial;\n    }\n\n    // workarounds for mesh and geometry\n\n    if (\n      material.aoMap &&\n      geometry.attributes.uv2 === undefined &&\n      geometry.attributes.uv !== undefined\n    ) {\n      geometry.setAttribute('uv2', geometry.attributes.uv);\n    }\n\n    // https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n    if (material.normalScale && !useVertexTangents) {\n      material.normalScale.y = -material.normalScale.y;\n    }\n\n    if (material.clearcoatNormalScale && !useVertexTangents) {\n      material.clearcoatNormalScale.y = -material.clearcoatNormalScale.y;\n    }\n\n    mesh.material = material;\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n   * @param {number} materialIndex\n   * @return {Promise<Material>}\n   */\n  GLTFParser.prototype.loadMaterial = function (materialIndex) {\n    var parser = this;\n    var json = this.json;\n    var extensions = this.extensions;\n    var materialDef = json.materials[materialIndex];\n\n    var materialType;\n    var materialParams = {};\n    var materialExtensions = materialDef.extensions || {};\n\n    var pending = [];\n\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n      var sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n      materialType = sgExtension.getMaterialType();\n      pending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n    } else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n      var kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n      materialType = kmuExtension.getMaterialType();\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n    } else {\n      // Specification:\n      // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n      materialType = MeshStandardMaterial;\n\n      var metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n      materialParams.color = new Color(1.0, 1.0, 1.0);\n      materialParams.opacity = 1.0;\n\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\n        var array = metallicRoughness.baseColorFactor;\n\n        materialParams.color.fromArray(array);\n        materialParams.opacity = array[3];\n      }\n\n      if (metallicRoughness.baseColorTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture)\n        );\n      }\n\n      materialParams.metalness =\n        metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n      materialParams.roughness =\n        metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n      if (metallicRoughness.metallicRoughnessTexture !== undefined) {\n        pending.push(\n          parser.assignTexture(\n            materialParams,\n            'metalnessMap',\n            metallicRoughness.metallicRoughnessTexture\n          )\n        );\n        pending.push(\n          parser.assignTexture(\n            materialParams,\n            'roughnessMap',\n            metallicRoughness.metallicRoughnessTexture\n          )\n        );\n      }\n    }\n\n    if (materialDef.doubleSided === true) {\n      materialParams.side = DoubleSide;\n    }\n\n    var alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n    if (alphaMode === ALPHA_MODES.BLEND) {\n      materialParams.transparent = true;\n\n      // See: https://github.com/mrdoob/three.js/issues/17706\n      materialParams.depthWrite = false;\n    } else {\n      materialParams.transparent = false;\n\n      if (alphaMode === ALPHA_MODES.MASK) {\n        materialParams.alphaTest =\n          materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n      }\n    }\n\n    if (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n\n      materialParams.normalScale = new Vector2(1, 1);\n\n      if (materialDef.normalTexture.scale !== undefined) {\n        materialParams.normalScale.set(\n          materialDef.normalTexture.scale,\n          materialDef.normalTexture.scale\n        );\n      }\n    }\n\n    if (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n      if (materialDef.occlusionTexture.strength !== undefined) {\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n      }\n    }\n\n    if (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n      materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n    }\n\n    if (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n      pending.push(\n        parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture)\n      );\n    }\n\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_CLEARCOAT]) {\n      var clearcoatExtension = extensions[EXTENSIONS.KHR_MATERIALS_CLEARCOAT];\n      materialType = clearcoatExtension.getMaterialType();\n      pending.push(\n        clearcoatExtension.extendParams(materialParams, { extensions: materialExtensions }, parser)\n      );\n    }\n\n    return Promise.all(pending).then(function () {\n      var material;\n\n      if (materialType === GLTFMeshStandardSGMaterial) {\n        material = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(\n          materialParams\n        );\n      } else {\n        material = new materialType(materialParams);\n      }\n\n      if (materialDef.name) material.name = materialDef.name;\n\n      // baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n      if (material.map) material.map.encoding = sRGBEncoding;\n      if (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding;\n\n      assignExtrasToUserData(material, materialDef);\n\n      if (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n\n      return material;\n    });\n  };\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {GLTF.Primitive} primitiveDef\n   * @param {GLTFParser} parser\n   */\n  function computeBounds(geometry, primitiveDef, parser) {\n    var attributes = primitiveDef.attributes;\n\n    var box = new Box3();\n\n    if (attributes.POSITION !== undefined) {\n      var accessor = parser.json.accessors[attributes.POSITION];\n\n      var min = accessor.min;\n      var max = accessor.max;\n\n      // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n      if (min !== undefined && max !== undefined) {\n        box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\n      } else {\n        console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n\n        return;\n      }\n    } else {\n      return;\n    }\n\n    var targets = primitiveDef.targets;\n\n    if (targets !== undefined) {\n      var maxDisplacement = new Vector3();\n      var vector = new Vector3();\n\n      for (var i = 0, il = targets.length; i < il; i++) {\n        var target = targets[i];\n\n        if (target.POSITION !== undefined) {\n          var accessor = parser.json.accessors[target.POSITION];\n          var min = accessor.min;\n          var max = accessor.max;\n\n          // glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n          if (min !== undefined && max !== undefined) {\n            // we need to get max of absolute components because target weight is [-1,1]\n            vector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])));\n            vector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])));\n            vector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])));\n\n            // Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n            // to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n            // are used to implement key-frame animations and as such only two are active at a time - this results in very large\n            // boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n            maxDisplacement.max(vector);\n          } else {\n            console.warn('THREE.GLTFLoader: Missing min/max properties for accessor POSITION.');\n          }\n        }\n      }\n\n      // As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n      box.expandByVector(maxDisplacement);\n    }\n\n    geometry.boundingBox = box;\n\n    var sphere = new Sphere();\n\n    box.getCenter(sphere.center);\n    sphere.radius = box.min.distanceTo(box.max) / 2;\n\n    geometry.boundingSphere = sphere;\n  }\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {GLTF.Primitive} primitiveDef\n   * @param {GLTFParser} parser\n   * @return {Promise<BufferGeometry>}\n   */\n  function addPrimitiveAttributes(geometry, primitiveDef, parser) {\n    var attributes = primitiveDef.attributes;\n\n    var pending = [];\n\n    function assignAttributeAccessor(accessorIndex, attributeName) {\n      return parser.getDependency('accessor', accessorIndex).then(function (accessor) {\n        geometry.setAttribute(attributeName, accessor);\n      });\n    }\n\n    for (var gltfAttributeName in attributes) {\n      var threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\n\n      // Skip attributes already provided by e.g. Draco extension.\n      if (threeAttributeName in geometry.attributes) continue;\n\n      pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n    }\n\n    if (primitiveDef.indices !== undefined && !geometry.index) {\n      var accessor = parser\n        .getDependency('accessor', primitiveDef.indices)\n        .then(function (accessor) {\n          geometry.setIndex(accessor);\n        });\n\n      pending.push(accessor);\n    }\n\n    assignExtrasToUserData(geometry, primitiveDef);\n\n    computeBounds(geometry, primitiveDef, parser);\n\n    return Promise.all(pending).then(function () {\n      return primitiveDef.targets !== undefined\n        ? addMorphTargets(geometry, primitiveDef.targets, parser)\n        : geometry;\n    });\n  }\n\n  /**\n   * @param {BufferGeometry} geometry\n   * @param {Number} drawMode\n   * @return {BufferGeometry}\n   */\n  function toTrianglesDrawMode(geometry, drawMode) {\n    var index = geometry.getIndex();\n\n    // generate index if not present\n\n    if (index === null) {\n      var indices = [];\n\n      var position = geometry.getAttribute('position');\n\n      if (position !== undefined) {\n        for (var i = 0; i < position.count; i++) {\n          indices.push(i);\n        }\n\n        geometry.setIndex(indices);\n        index = geometry.getIndex();\n      } else {\n        console.error(\n          'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.'\n        );\n        return geometry;\n      }\n    }\n\n    //\n\n    var numberOfTriangles = index.count - 2;\n    var newIndices = [];\n\n    if (drawMode === TriangleFanDrawMode) {\n      // gl.TRIANGLE_FAN\n\n      for (var i = 1; i <= numberOfTriangles; i++) {\n        newIndices.push(index.getX(0));\n        newIndices.push(index.getX(i));\n        newIndices.push(index.getX(i + 1));\n      }\n    } else {\n      // gl.TRIANGLE_STRIP\n\n      for (var i = 0; i < numberOfTriangles; i++) {\n        if (i % 2 === 0) {\n          newIndices.push(index.getX(i));\n          newIndices.push(index.getX(i + 1));\n          newIndices.push(index.getX(i + 2));\n        } else {\n          newIndices.push(index.getX(i + 2));\n          newIndices.push(index.getX(i + 1));\n          newIndices.push(index.getX(i));\n        }\n      }\n    }\n\n    if (newIndices.length / 3 !== numberOfTriangles) {\n      console.error(\n        'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.'\n      );\n    }\n\n    // build final geometry\n\n    var newGeometry = geometry.clone();\n    newGeometry.setIndex(newIndices);\n\n    return newGeometry;\n  }\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n   *\n   * Creates BufferGeometries from primitives.\n   *\n   * @param {Array<GLTF.Primitive>} primitives\n   * @return {Promise<Array<BufferGeometry>>}\n   */\n  GLTFParser.prototype.loadGeometries = function (primitives) {\n    var parser = this;\n    var extensions = this.extensions;\n    var cache = this.primitiveCache;\n\n    function createDracoPrimitive(primitive) {\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n        .decodePrimitive(primitive, parser)\n        .then(function (geometry) {\n          return addPrimitiveAttributes(geometry, primitive, parser);\n        });\n    }\n\n    var pending = [];\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n      var primitive = primitives[i];\n      var cacheKey = createPrimitiveKey(primitive);\n\n      // See if we've already created this geometry\n      var cached = cache[cacheKey];\n\n      if (cached) {\n        // Use the cached geometry if it exists\n        pending.push(cached.promise);\n      } else {\n        var geometryPromise;\n\n        if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n          // Use DRACO geometry if available\n          geometryPromise = createDracoPrimitive(primitive);\n        } else {\n          // Otherwise create a new geometry\n          geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n        }\n\n        // Cache this geometry\n        cache[cacheKey] = { primitive: primitive, promise: geometryPromise };\n\n        pending.push(geometryPromise);\n      }\n    }\n\n    return Promise.all(pending);\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n   * @param {number} meshIndex\n   * @return {Promise<Group|Mesh|SkinnedMesh>}\n   */\n  GLTFParser.prototype.loadMesh = function (meshIndex) {\n    var parser = this;\n    var json = this.json;\n\n    var meshDef = json.meshes[meshIndex];\n    var primitives = meshDef.primitives;\n\n    var pending = [];\n\n    for (var i = 0, il = primitives.length; i < il; i++) {\n      var material =\n            primitives[i].material === undefined\n              ? createDefaultMaterial(this.cache)\n              : this.getDependency('material', primitives[i].material);\n\n      pending.push(material);\n    }\n\n    pending.push(parser.loadGeometries(primitives));\n\n    return Promise.all(pending).then(function (results) {\n      var materials = results.slice(0, results.length - 1);\n      var geometries = results[results.length - 1];\n\n      var meshes = [];\n\n      for (var i = 0, il = geometries.length; i < il; i++) {\n        var geometry = geometries[i];\n        var primitive = primitives[i];\n\n        // 1. create Mesh\n\n        var mesh;\n\n        var material = materials[i];\n\n        if (\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n          primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n          primitive.mode === undefined\n        ) {\n          // .isSkinnedMesh isn't in glTF spec. See .markDefs()\n          mesh =\n            meshDef.isSkinnedMesh === true\n              ? new SkinnedMesh(geometry, material)\n              : new Mesh(geometry, material);\n\n          if (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n            // we normalize floating point skin weight array to fix malformed assets (see #15319)\n            // it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n            mesh.normalizeSkinWeights();\n          }\n\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n          } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n          }\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n          mesh = new LineSegments(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n          mesh = new Line(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n          mesh = new LineLoop(geometry, material);\n        } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n          mesh = new Points(geometry, material);\n        } else {\n          throw new Error('THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n        }\n\n        if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n          updateMorphTargets(mesh, meshDef);\n        }\n\n        mesh.name = meshDef.name || 'mesh_' + meshIndex;\n\n        if (geometries.length > 1) mesh.name += '_' + i;\n\n        assignExtrasToUserData(mesh, meshDef);\n\n        parser.assignFinalMaterial(mesh);\n\n        meshes.push(mesh);\n      }\n\n      if (meshes.length === 1) {\n        return meshes[0];\n      }\n\n      var group = new Group();\n\n      for (var i = 0, il = meshes.length; i < il; i++) {\n        group.add(meshes[i]);\n      }\n\n      return group;\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n   * @param {number} cameraIndex\n   * @return {Promise<THREE.Camera>}\n   */\n  GLTFParser.prototype.loadCamera = function (cameraIndex) {\n    var camera;\n    var cameraDef = this.json.cameras[cameraIndex];\n    var params = cameraDef[cameraDef.type];\n\n    if (!params) {\n      console.warn('THREE.GLTFLoader: Missing camera parameters.');\n      return;\n    }\n\n    if (cameraDef.type === 'perspective') {\n      camera = new PerspectiveCamera(\n        MathUtils.radToDeg(params.yfov),\n        params.aspectRatio || 1,\n        params.znear || 1,\n        params.zfar || 2e6\n      );\n    } else if (cameraDef.type === 'orthographic') {\n      camera = new OrthographicCamera(\n        -params.xmag,\n        params.xmag,\n        params.ymag,\n        -params.ymag,\n        params.znear,\n        params.zfar\n      );\n    }\n\n    if (cameraDef.name) camera.name = cameraDef.name;\n\n    assignExtrasToUserData(camera, cameraDef);\n\n    return Promise.resolve(camera);\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n   * @param {number} skinIndex\n   * @return {Promise<Object>}\n   */\n  GLTFParser.prototype.loadSkin = function (skinIndex) {\n    var skinDef = this.json.skins[skinIndex];\n\n    var skinEntry = { joints: skinDef.joints };\n\n    if (skinDef.inverseBindMatrices === undefined) {\n      return Promise.resolve(skinEntry);\n    }\n\n    return this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n      skinEntry.inverseBindMatrices = accessor;\n\n      return skinEntry;\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n   * @param {number} animationIndex\n   * @return {Promise<AnimationClip>}\n   */\n  GLTFParser.prototype.loadAnimation = function (animationIndex) {\n    var json = this.json;\n\n    var animationDef = json.animations[animationIndex];\n\n    var pendingNodes = [];\n    var pendingInputAccessors = [];\n    var pendingOutputAccessors = [];\n    var pendingSamplers = [];\n    var pendingTargets = [];\n\n    for (var i = 0, il = animationDef.channels.length; i < il; i++) {\n      var channel = animationDef.channels[i];\n      var sampler = animationDef.samplers[channel.sampler];\n      var target = channel.target;\n      var name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n      var input =\n            animationDef.parameters !== undefined\n              ? animationDef.parameters[sampler.input]\n              : sampler.input;\n      var output =\n            animationDef.parameters !== undefined\n              ? animationDef.parameters[sampler.output]\n              : sampler.output;\n\n      pendingNodes.push(this.getDependency('node', name));\n      pendingInputAccessors.push(this.getDependency('accessor', input));\n      pendingOutputAccessors.push(this.getDependency('accessor', output));\n      pendingSamplers.push(sampler);\n      pendingTargets.push(target);\n    }\n\n    return Promise.all([\n      Promise.all(pendingNodes),\n      Promise.all(pendingInputAccessors),\n      Promise.all(pendingOutputAccessors),\n      Promise.all(pendingSamplers),\n      Promise.all(pendingTargets),\n    ]).then(function (dependencies) {\n      var nodes = dependencies[0];\n      var inputAccessors = dependencies[1];\n      var outputAccessors = dependencies[2];\n      var samplers = dependencies[3];\n      var targets = dependencies[4];\n\n      var tracks = [];\n\n      for (var i = 0, il = nodes.length; i < il; i++) {\n        var node = nodes[i];\n        var inputAccessor = inputAccessors[i];\n        var outputAccessor = outputAccessors[i];\n        var sampler = samplers[i];\n        var target = targets[i];\n\n        if (node === undefined) continue;\n\n        node.updateMatrix();\n        node.matrixAutoUpdate = true;\n\n        var TypedKeyframeTrack;\n\n        switch (PATH_PROPERTIES[target.path]) {\n          case PATH_PROPERTIES.weights:\n            TypedKeyframeTrack = NumberKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.rotation:\n            TypedKeyframeTrack = QuaternionKeyframeTrack;\n            break;\n\n          case PATH_PROPERTIES.position:\n          case PATH_PROPERTIES.scale:\n          default:\n            TypedKeyframeTrack = VectorKeyframeTrack;\n            break;\n        }\n\n        var targetName = node.name ? node.name : node.uuid;\n\n        var interpolation =\n              sampler.interpolation !== undefined\n                ? INTERPOLATION[sampler.interpolation]\n                : InterpolateLinear;\n\n        var targetNames = [];\n\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n          // Node may be a Group (glTF mesh with several primitives) or a Mesh.\n          node.traverse(function (object) {\n            if (object.isMesh === true && object.morphTargetInfluences) {\n              targetNames.push(object.name ? object.name : object.uuid);\n            }\n          });\n        } else {\n          targetNames.push(targetName);\n        }\n\n        var outputArray = outputAccessor.array;\n\n        if (outputAccessor.normalized) {\n          var scale;\n\n          if (outputArray.constructor === Int8Array) {\n            scale = 1 / 127;\n          } else if (outputArray.constructor === Uint8Array) {\n            scale = 1 / 255;\n          } else if (outputArray.constructor == Int16Array) {\n            scale = 1 / 32767;\n          } else if (outputArray.constructor === Uint16Array) {\n            scale = 1 / 65535;\n          } else {\n            throw new Error('THREE.GLTFLoader: Unsupported output accessor component type.');\n          }\n\n          var scaled = new Float32Array(outputArray.length);\n\n          for (var j = 0, jl = outputArray.length; j < jl; j++) {\n            scaled[j] = outputArray[j] * scale;\n          }\n\n          outputArray = scaled;\n        }\n\n        for (var j = 0, jl = targetNames.length; j < jl; j++) {\n          var track = new TypedKeyframeTrack(\n            targetNames[j] + '.' + PATH_PROPERTIES[target.path],\n            inputAccessor.array,\n            outputArray,\n            interpolation\n          );\n\n          // Override interpolation with custom factory method.\n          if (sampler.interpolation === 'CUBICSPLINE') {\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n              // A CUBICSPLINE keyframe in glTF has three output values for each input value,\n              // representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n              // must be divided by three to get the interpolant's sampleSize argument.\n\n              return new GLTFCubicSplineInterpolant(\n                this.times,\n                this.values,\n                this.getValueSize() / 3,\n                result\n              );\n            };\n\n            // Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n          }\n\n          tracks.push(track);\n        }\n      }\n\n      var name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n      return new AnimationClip(name, undefined, tracks);\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n   * @param {number} nodeIndex\n   * @return {Promise<Object3D>}\n   */\n  GLTFParser.prototype.loadNode = function (nodeIndex) {\n    var json = this.json;\n    var extensions = this.extensions;\n    var parser = this;\n\n    var meshReferences = json.meshReferences;\n    var meshUses = json.meshUses;\n\n    var nodeDef = json.nodes[nodeIndex];\n\n    return (function () {\n      var pending = [];\n\n      if (nodeDef.mesh !== undefined) {\n        pending.push(\n          parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n            var node;\n\n            if (meshReferences[nodeDef.mesh] > 1) {\n              var instanceNum = meshUses[nodeDef.mesh]++;\n\n              node = mesh.clone();\n              node.name += '_instance_' + instanceNum;\n            } else {\n              node = mesh;\n            }\n\n            // if weights are provided on the node, override weights on the mesh.\n            if (nodeDef.weights !== undefined) {\n              node.traverse(function (o) {\n                if (!o.isMesh) return;\n\n                for (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n                  o.morphTargetInfluences[i] = nodeDef.weights[i];\n                }\n              });\n            }\n\n            return node;\n          })\n        );\n      }\n\n      if (nodeDef.camera !== undefined) {\n        pending.push(parser.getDependency('camera', nodeDef.camera));\n      }\n\n      if (\n        nodeDef.extensions &&\n        nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL] &&\n        nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light !== undefined\n      ) {\n        pending.push(\n          parser.getDependency('light', nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light)\n        );\n      }\n\n      return Promise.all(pending);\n    })().then(function (objects) {\n      var node;\n\n      // .isBone isn't in glTF spec. See .markDefs\n      if (nodeDef.isBone === true) {\n        node = new Bone();\n      } else if (objects.length > 1) {\n        node = new Group();\n      } else if (objects.length === 1) {\n        node = objects[0];\n      } else {\n        node = new Object3D();\n      }\n\n      if (node !== objects[0]) {\n        for (var i = 0, il = objects.length; i < il; i++) {\n          node.add(objects[i]);\n        }\n      }\n\n      if (nodeDef.name) {\n        node.userData.name = nodeDef.name;\n        node.name = PropertyBinding.sanitizeNodeName(nodeDef.name);\n      }\n\n      assignExtrasToUserData(node, nodeDef);\n\n      if (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n      if (nodeDef.matrix !== undefined) {\n        var matrix = new Matrix4();\n        matrix.fromArray(nodeDef.matrix);\n        node.applyMatrix4(matrix);\n      } else {\n        if (nodeDef.translation !== undefined) {\n          node.position.fromArray(nodeDef.translation);\n        }\n\n        if (nodeDef.rotation !== undefined) {\n          node.quaternion.fromArray(nodeDef.rotation);\n        }\n\n        if (nodeDef.scale !== undefined) {\n          node.scale.fromArray(nodeDef.scale);\n        }\n      }\n\n      return node;\n    });\n  };\n\n  /**\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n   * @param {number} sceneIndex\n   * @return {Promise<Group>}\n   */\n  GLTFParser.prototype.loadScene = (function () {\n    // scene node hierachy builder\n\n    function buildNodeHierachy(nodeId, parentObject, json, parser) {\n      var nodeDef = json.nodes[nodeId];\n\n      return parser\n        .getDependency('node', nodeId)\n        .then(function (node) {\n          if (nodeDef.skin === undefined) return node;\n\n          // build skeleton here as well\n\n          var skinEntry;\n\n          return parser\n            .getDependency('skin', nodeDef.skin)\n            .then(function (skin) {\n              skinEntry = skin;\n\n              var pendingJoints = [];\n\n              for (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n                pendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n              }\n\n              return Promise.all(pendingJoints);\n            })\n            .then(function (jointNodes) {\n              node.traverse(function (mesh) {\n                if (!mesh.isMesh) return;\n\n                var bones = [];\n                var boneInverses = [];\n\n                for (var j = 0, jl = jointNodes.length; j < jl; j++) {\n                  var jointNode = jointNodes[j];\n\n                  if (jointNode) {\n                    bones.push(jointNode);\n\n                    var mat = new Matrix4();\n\n                    if (skinEntry.inverseBindMatrices !== undefined) {\n                      mat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n                    }\n\n                    boneInverses.push(mat);\n                  } else {\n                    console.warn(\n                      'THREE.GLTFLoader: Joint \"%s\" could not be found.',\n                      skinEntry.joints[j]\n                    );\n                  }\n                }\n\n                mesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n              });\n\n              return node;\n            });\n        })\n        .then(function (node) {\n          // build node hierachy\n\n          parentObject.add(node);\n\n          var pending = [];\n\n          if (nodeDef.children) {\n            var children = nodeDef.children;\n\n            for (var i = 0, il = children.length; i < il; i++) {\n              var child = children[i];\n              pending.push(buildNodeHierachy(child, node, json, parser));\n            }\n          }\n\n          return Promise.all(pending);\n        });\n    }\n\n    return function loadScene(sceneIndex) {\n      var json = this.json;\n      var extensions = this.extensions;\n      var sceneDef = this.json.scenes[sceneIndex];\n      var parser = this;\n\n      // Loader returns Group, not Scene.\n      // See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n      var scene = new Group();\n      if (sceneDef.name) scene.name = sceneDef.name;\n\n      assignExtrasToUserData(scene, sceneDef);\n\n      if (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n\n      var nodeIds = sceneDef.nodes || [];\n\n      var pending = [];\n\n      for (var i = 0, il = nodeIds.length; i < il; i++) {\n        pending.push(buildNodeHierachy(nodeIds[i], scene, json, parser));\n      }\n\n      return Promise.all(pending).then(function () {\n        return scene;\n      });\n    };\n  })();\n\n  return GLTFLoader;\n})();\n\nexport { GLTFLoader };\n","import * as THREE from 'three';\nimport random from 'random/dist/cjs/index';\n\nimport Material from '../components/material';\nimport Helpers from '../../utils/helpers';\nimport { BufferGeometryUtils } from '../../utils/bufferGeometryUtils';\nimport { GLTFLoader } from '../loaders/GLTFLoader';\nimport Config from '../../data/config';\n\n// Loads in a single object from the config file\nexport default class Flowers {\n  constructor(scene) {\n    this.scene = scene;\n    this.obj = null;\n    this.ref = null;\n    this.normalRandom = random.normal(0.5,0.1)\n    this.uniformRandom = random.uniform()\n\n    // console.log(this.normalRandom = this.normalRandom.float())\n    // console.log(this.normalRandom = this.normalRandom.float())\n  }\n\n  load() {\n    \n    var group = new THREE.Group();\n    group.scale.multiplyScalar(20);\n\n    const seed = this.uniformRandom();\n    const flowers = this.drawFlowers(seed,4,20)\n    //const flower = this.drawFlower(\"123\")\n    group.add(flowers)\n\n\n    this.scene.add( group );\n    this.ref = group;\n  }\n\n  getMaterial(color) {\n    return new THREE.MeshStandardMaterial({\n      color: color,\n      metalness: 0,\n      roughness: 0.9,\n      side: THREE.DoubleSide,\n    })\n  }\n\n  getPaddelColor(seed=0){\n    const colors =[\n      new THREE.Color( 1, 0, 0 ),\n      new THREE.Color( 1, 0.5, 0 ),\n      new THREE.Color( 1, 0, 0.5 ),\n      new THREE.Color( 0.5, 0.5, 0 ),\n      new THREE.Color( 0.5, 0, 0.5 ),\n      new THREE.Color( 0.2, 0.3, 0.3 )\n    ]\n    const index = Math.floor((seed*colors.length)%colors.length)\n    return colors[index];\n  }\n  getStamColor(seed=0){\n    const colors =[\n      new THREE.Color( 0.2, 0.6, 0 ),\n      new THREE.Color( 0.2, 0.8, 0.6 ),\n      new THREE.Color( 0.1, 0.6, 0 ),\n      new THREE.Color( 0.1, 0.8, 0.2 ),\n      new THREE.Color( 0.1, 0.7, 0 ),\n    ]\n    const index = Math.floor((seed*colors.length)%colors.length)\n    return colors[index];\n  }\n  getLeaveColor(seed=0){\n    const colors =[\n      new THREE.Color( 0.2, 1, 0 ),\n      new THREE.Color( 0.2, 0.8, 0.1 ),\n      new THREE.Color( 0.2, 1, 0 ),\n      new THREE.Color( 0.1, 0.8, 0.2 ),\n      new THREE.Color( 0.2, 0.7, 0 ),\n    ]\n    const index = Math.floor((seed*colors.length)%colors.length)\n    return colors[index];\n  }\n  getHeadColor(seed=0){\n    const colors =[\n      new THREE.Color( 0.5, 0.5, 0 ),\n      new THREE.Color( 0.9, 1, 0.1 ),\n      new THREE.Color( 0.8, 0.7, 0 ),\n    ]\n    const index = Math.floor((seed*colors.length)%colors.length)\n    return colors[index];\n  }\n\n  drawFlowers(seed, width, height){\n    const density = 0.3\n    const flowers = []\n    const flowerDiversity = (width*height)*density\n    console.log({flowerDiversity})\n    for(let i=0; i < flowerDiversity;i++) {\n      const flowerSeed = this.uniformRandom();\n      flowers.push(this.drawFlower(flowerSeed));\n    }\n\n    flowers.sort((a,b)=> {\n      const boundingBoxA = new THREE.Box3().setFromObject( a );\n      const boundingBoxB = new THREE.Box3().setFromObject( b );\n      return boundingBoxA.max.y - boundingBoxB.max.y \n    })\n\n    var group = new THREE.Group();\n    for(let x = -0.9; x<0.9; x=x+density){\n      for(let z = -0.9; z<0.9; z=z+density){\n\n        const scale = 1-((Math.max(Math.abs(x),Math.abs(z))))\n        const flowerIndex=(Math.floor(scale*flowers.length))%flowers.length\n        //console.log({x,z,scale,flowerDiversity, floweerArrayLength:flowers.length,flowerIndex})\n        const flower = flowers[flowerIndex].clone()\n        flower.rotateY(this.uniformRandom()*Math.PI)\n        flower.translateX((x*width/20)+(this.uniformRandom()-0.5))\n        flower.translateZ((z*width/20)+(this.uniformRandom()-0.5))\n\n        flower.rotateX(z*Math.PI/3)\n        flower.rotateZ(-x*Math.PI/3)\n\n        flower.scale.multiplyScalar((scale*(this.uniformRandom()*0.6))+0.4);\n        group.add(flower)\n      }\n    }\n    return group\n  }\n\n  drawFlower(seed){\n    const group = new THREE.Group();\n\n    const stam = this.drawStam(seed)\n    group.add(stam)\n\n    const leave = this.drawLeave(seed)\n    leave.scale.multiplyScalar(2);\n    leave.scale.y = leave.scale.y*1.5;\n    leave.scale.y = leave.scale.x*0.7;\n    leave.scale.z = leave.scale.z*0.7;\n    group.add(leave)\n\n    return group\n  }\n\n  drawStam(seed){\n    const group = new THREE.Group();\n    const start = new THREE.Vector3( 0, 0, 0 );\n    const middle = new THREE.Vector3( 0.4*((this.normalRandom()-1)*2), 3*this.normalRandom(), 0.4*((this.normalRandom()-1)*2) );\n    const end = new THREE.Vector3( 0.4*((this.normalRandom()-1)*2), 1+(3*seed), 0.4*((this.normalRandom()-1)*2) );\n\n    const curve = new THREE.QuadraticBezierCurve3(\n      start,\n      middle,\n      end\n    );\n    \n    const geometry = new THREE.TubeBufferGeometry( curve, 6, 0.01+(0.01*seed), 4, false );\n    const material = this.getMaterial(this.getStamColor(seed));\n    const stam = new THREE.Mesh( geometry, material );\n    group.add(stam)\n\n    const up = group.up;\n\n    //Leaves\n    const leaveGroup = new THREE.Group();\n    const leaveT = 0.2 + (0.5*this.normalRandom())\n    const leavePosition = curve.getPointAt(leaveT)\n    leaveGroup.position.set( leavePosition.x, leavePosition.y, leavePosition.z);\n    const leaveTangent = curve.getTangent(leaveT).normalize();\n    const leaveAxis = new THREE.Vector3( );\n    leaveAxis.crossVectors( up, leaveTangent ).normalize();\n    const leaveRadians = Math.acos( up.dot( leaveTangent ) );\n    leaveGroup.quaternion.setFromAxisAngle( leaveAxis, leaveRadians );\n    const leaveStam = this.drawLeaveStam(seed)\n    leaveGroup.add(leaveStam)\n    if(seed < 0.5){\n      const secondLeaveStam = leaveStam.clone()\n      secondLeaveStam.rotateY(Math.PI+(this.normalRandom()))\n      secondLeaveStam.scale.multiplyScalar(1+(this.normalRandom()*0.4));\n      leaveGroup.add(secondLeaveStam)\n    }\n\n    group.add(leaveGroup)\n\n    // Head\n    const headGroup = new THREE.Group();\n    headGroup.position.set( end.x, end.y, end.z);\n    const tangent = curve.getTangent(1).normalize();\n    \n    const axis = new THREE.Vector3( );\n    axis.crossVectors( up, tangent ).normalize();\n    const radians = Math.acos( up.dot( tangent ) );\n    headGroup.quaternion.setFromAxisAngle( axis, radians );\n    const head = this.drawHead(seed)\n    headGroup.add(head)\n    group.add(headGroup)\n\n    return group\n  }\n\n  drawLeaveStam(seed) {\n\n    const group = new THREE.Group();\n    const start = new THREE.Vector3( 0, 0, 0 );\n    const middle = new THREE.Vector3( 0.05*(this.normalRandom()), 0.05*this.normalRandom(), 0.05*(this.normalRandom()) );\n    const end = new THREE.Vector3( 0.1*(this.normalRandom()), 0.2*seed, 0.1*(this.normalRandom()) );\n\n    const curve = new THREE.QuadraticBezierCurve3(\n      start,\n      middle,\n      end\n    );\n    \n    const geometry = new THREE.TubeBufferGeometry( curve, 3, 0.02*seed, 4, false );\n    const material = this.getMaterial(this.getStamColor(seed));\n    const stam = new THREE.Mesh( geometry, material );\n    group.add(stam)\n\n    const leaveGroup = new THREE.Group();\n    // Leave\n    leaveGroup.position.set( end.x, end.y, end.z);\n    const tangent = curve.getTangent(1).normalize();\n    const axis = new THREE.Vector3( );\n    axis.crossVectors( leaveGroup.up, tangent ).normalize();\n    const radians = Math.acos( leaveGroup.up.dot( tangent ) );\n    leaveGroup.quaternion.setFromAxisAngle( axis, radians );\n    const leave = this.drawLeave(seed)\n    leave.rotateY(Math.PI*5/4)\n    leave.scale.multiplyScalar(1+(seed*2));\n    leaveGroup.add(leave)\n\n    group.add(leaveGroup)\n\n\n    return group\n  }\n\n  drawLeave(seed) {\n\n    const resolution = 4;\n\n    const seed1 = this.normalRandom()\n    const seed2 = this.normalRandom()\n    const seed3 = this.normalRandom()\n\n    const baseCP0 = new THREE.Vector3( 0, 0, 0 )\n    const baseCP1 = new THREE.Vector3( 0.4*seed1 , 0.5*seed2, 0.4*seed3 )\n    const baseCP2 = new THREE.Vector3( 0, (seed+seed2)/2, 0 )\n    const sideCP0 = baseCP0.clone();\n    const sideCP1 = new THREE.Vector3( -0.5*seed2, 0.5*seed3, 0.5*seed1 );\n    const sideCP2 = baseCP2.clone();\n    const baseCurve = new THREE.QuadraticBezierCurve3(\n      baseCP0,\n      baseCP1,\n      baseCP2\n    );\n\n    const sideCurve = new THREE.QuadraticBezierCurve3(\n      sideCP0,\n      sideCP1,\n      sideCP2\n    );\n\n    let combinedVertices = []\n    const baseVertices = baseCurve.getPoints(resolution)\n    const sideVertices = sideCurve.getPoints(resolution)\n\n    combinedVertices = [...baseVertices, ...sideVertices].map(e => [e.x,e.y,e.z]).flat()\n    const indices =[]\n    for(let i = 0; i<resolution; i++){\n      indices.push(i)\n      indices.push(i+resolution)\n      indices.push(i+1+resolution)\n\n      indices.push(i)\n      indices.push(i+1+resolution)\n      indices.push(i+1)\n    }\n\n    const geometry = new THREE.BufferGeometry();\n    const vertices = new Float32Array( combinedVertices );\n    geometry.setAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n    geometry.setIndex(indices)\n    geometry.computeVertexNormals()\n    \n    const material = this.getMaterial(this.getLeaveColor(seed));\n    const leave = new THREE.Mesh( geometry, material );\n    const target = baseCP1.clone().add(sideCP1)\n    leave.lookAt( target );\n    //leave.rotateY((Math.PI/8))\n\n    return leave\n  }\n\n  drawHead(seed){\n    const group = new THREE.Group();\n    const radius = 0.1*seed\n    const geometry = new THREE.DodecahedronBufferGeometry(radius);\n    const material = this.getMaterial(this.getLeaveColor(seed));\n    const base = new THREE.Mesh( geometry, material );\n    base.translateY(-radius)\n    group.add(base)\n\n    const tinyLeaveCount = 4 + 10*this.normalRandom()\n    const tinyLeave = this.drawLeave(seed)\n    const tinyLeaveGeometry = tinyLeave.geometry;\n    tinyLeaveGeometry.rotateX(Math.PI*3/5)\n    let mergedGeometry = tinyLeaveGeometry.clone();\n    for(let i = 0; i < tinyLeaveCount; i++) {\n      const subTinyLeaveGeometry = tinyLeaveGeometry.clone()\n      subTinyLeaveGeometry.rotateY((Math.PI/(tinyLeaveCount))*i*2)\n      mergedGeometry = BufferGeometryUtils.mergeBufferGeometries([mergedGeometry,subTinyLeaveGeometry])\n    }\n\n    const tinyLeafMaterial = this.getMaterial(this.getLeaveColor(seed));\n    const tinyLeafs= new THREE.Mesh( mergedGeometry, tinyLeafMaterial );\n    tinyLeafs.scale.multiplyScalar(seed*0.8);\n    group.add(tinyLeafs)\n\n    const paddelGroup = new THREE.Group();\n    paddelGroup.translateY(radius)\n    const paddleCoreGeometry = new THREE.DodecahedronBufferGeometry(radius);\n    const paddleCoreMaterial = this.getMaterial(this.getHeadColor(seed));\n    const paddleCore = new THREE.Mesh( paddleCoreGeometry, paddleCoreMaterial );\n    paddelGroup.add(paddleCore)\n    paddelGroup.translateY(-radius)\n\n    const paddels = this.drawPaddles(seed)\n    paddelGroup.add(paddels)\n\n    group.add(paddelGroup)\n\n\n    return group\n  }\n\n  drawPaddles(seed) {\n    const group = new THREE.Group();\n\n    const resolution = 4;\n\n    const seed1 = this.uniformRandom()\n    const seed2 = this.uniformRandom()\n    const seed3 = this.uniformRandom()\n\n    const baseCP0 = new THREE.Vector3( 0, 0, 0 )\n    const baseCP1 = new THREE.Vector3( (0.4*seed3)+0.2 , 0.5*seed1, (0.4*seed3)+0.2 )\n    const baseCP2 = new THREE.Vector3( 0, seed2+0.2, 0 )\n\n    const sideCP0 = baseCP0.clone();\n    const sideCP1 = new THREE.Vector3( -((0.4*seed3)+0.2), 0.5*seed1, (0.4*seed3)+0.2 );\n    const sideCP2 = baseCP2.clone();\n\n    const baseCurve = new THREE.QuadraticBezierCurve3(\n      baseCP0,\n      baseCP1,\n      baseCP2\n    );\n\n    const sideCurve = new THREE.QuadraticBezierCurve3(\n      sideCP0,\n      sideCP1,\n      sideCP2\n    );\n\n    let combinedVertices = []\n    const baseVertices = baseCurve.getPoints(resolution)\n    const sideVertices = sideCurve.getPoints(resolution)\n\n    combinedVertices = [...baseVertices, ...sideVertices].map(e => [e.x,e.y,e.z]).flat()\n    const indices =[]\n    for(let i = 0; i<resolution; i++){\n      indices.push(i)\n      indices.push(i+resolution)\n      indices.push(i+1+resolution)\n\n      indices.push(i)\n      indices.push(i+1+resolution)\n      indices.push(i+1)\n    }\n\n    const geometry = new THREE.BufferGeometry();\n    const vertices = new Float32Array( combinedVertices );\n    geometry.setAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n    geometry.setIndex(indices);\n    geometry.computeVertexNormals()\n    geometry.rotateX(Math.PI/3)\n\n    const padddelSeed = this.uniformRandom()\n    const paddelCount = 5 + (8*padddelSeed)\n\n    let mergedGeometry = geometry;\n\n    for(let i = 1; i < paddelCount; i++) {\n      const subPaddelGeometry = geometry.clone()\n      subPaddelGeometry.rotateY((Math.PI/(paddelCount))*i*2)\n      mergedGeometry = BufferGeometryUtils.mergeBufferGeometries([mergedGeometry,subPaddelGeometry])\n    }\n\n\n    const material = this.getMaterial(this.getPaddelColor(seed));\n    const leaves = new THREE.Mesh( mergedGeometry, material );\n    // const target = baseCP1.clone().add(sideCP1)\n    // leaves.lookAt( target );\n\n    group.add(leaves)\n\n    return group\n  }\n\n  unload() {\n    this.scene.remove(this.ref);\n  }\n}\n","const ALIAS = {\n  'left'\t\t: 37,\n  'up'\t\t  : 38,\n  'right'\t\t: 39,\n  'down'\t\t: 40,\n  'space'\t\t: 32,\n  'tab'\t\t  : 9,\n  'escape'\t: 27\n};\n\nexport default class Keyboard {\n  constructor(domElement) {\n    this.domElement = domElement || document;\n    this.keyCodes = {};\n\n    // bind keyEvents\n    this.domElement.addEventListener('keydown', (event) => this.onKeyChange(event), false);\n    this.domElement.addEventListener('keyup', (event) => this.onKeyChange(event), false);\n\n    // bind window blur\n    window.addEventListener('blur', () => this.onBlur, false);\n  }\n\n  destroy() {\n    this.domElement.removeEventListener('keydown', (event) => this.onKeyChange(event), false);\n    this.domElement.removeEventListener('keyup', (event) => this.onKeyChange(event), false);\n\n    // unbind window blur event\n    window.removeEventListener('blur', () => this.onBlur, false);\n  }\n\n  onBlur() {\n    for(const prop in this.keyCodes)\n      this.keyCodes[prop] = false;\n  }\n\n  onKeyChange(event) {\n    // log to debug\n    //console.log('onKeyChange', event, event.keyCode, event.shiftKey, event.ctrlKey, event.altKey, event.metaKey)\n\n    // update this.keyCodes\n    const keyCode = event.keyCode;\n    this.keyCodes[keyCode] = event.type === 'keydown';\n  }\n\n  pressed(keyDesc) {\n    const keys = keyDesc.split('+');\n    for(let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      let pressed = false;\n      if(Object.keys(ALIAS).indexOf(key) != -1) {\n        pressed = this.keyCodes[ALIAS[key]];\n      } else {\n        pressed = this.keyCodes[key.toUpperCase().charCodeAt(0)];\n      }\n      if(!pressed)\n        return false;\n    }\n\n    return true;\n  }\n\n  eventMatches(event, keyDesc) {\n    const aliases = ALIAS;\n    const aliasKeys = Object.keys(aliases);\n    const keys = keyDesc.split('+');\n    // log to debug\n    // console.log('eventMatches', event, event.keyCode, event.shiftKey, event.ctrlKey, event.altKey, event.metaKey)\n    for(let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      let pressed = false;\n      if(key === 'shift') {\n        pressed = event.shiftKey ? true : false;\n      } else if(key === 'ctrl') {\n        pressed = event.ctrlKey ? true : false;\n      } else if(key === 'alt') {\n        pressed = event.altKey ? true : false;\n      } else if(key === 'meta') {\n        pressed = event.metaKey ? true : false;\n      } else if(aliasKeys.indexOf(key) !== -1) {\n        pressed = event.keyCode === aliases[key];\n      } else if(event.keyCode === key.toUpperCase().charCodeAt(0)) {\n        pressed = true;\n      }\n      if(!pressed)\n        return false;\n    }\n\n    return true;\n  }\n}\n","import Keyboard from '../../utils/keyboard';\nimport Helpers from '../../utils/helpers';\nimport Config from '../../data/config';\n\n// Manages all input interactions\nexport default class Interaction {\n  constructor(renderer, scene, camera, controls) {\n    // Properties\n    this.renderer = renderer;\n    this.scene = scene;\n    this.camera = camera;\n    this.controls = controls;\n\n    this.timeout = null;\n\n    // Instantiate keyboard helper\n    this.keyboard = new Keyboard();\n\n    // Listeners\n    // Mouse events\n    this.renderer.domElement.addEventListener('mousemove', (event) => Helpers.throttle(this.onMouseMove(event), 250), false);\n    this.renderer.domElement.addEventListener('mouseleave', (event) => this.onMouseLeave(event), false);\n    this.renderer.domElement.addEventListener('mouseover', (event) => this.onMouseOver(event), false);\n\n    // Keyboard events\n    this.keyboard.domElement.addEventListener('keydown', (event) => {\n      // Only once\n      if(event.repeat) {\n        return;\n      }\n\n      if(this.keyboard.eventMatches(event, 'escape')) {\n        console.log('Escape pressed');\n      }\n    });\n  }\n\n  onMouseOver(event) {\n    event.preventDefault();\n\n    Config.isMouseOver = true;\n  }\n\n  onMouseLeave(event) {\n    event.preventDefault();\n\n    Config.isMouseOver = false;\n  }\n\n  onMouseMove(event) {\n    event.preventDefault();\n\n    clearTimeout(this.timeout);\n\n    this.timeout = setTimeout(function() {\n      Config.isMouseMoving = false;\n    }, 200);\n\n    Config.isMouseMoving = true;\n  }\n}\n","import Config from '../../data/config';\n\n// Manages all dat.GUI interactions\nexport default class DatGUI {\n  constructor(main) {\n    this.gui = new dat.GUI();\n\n    this.camera = main.camera.threeCamera;\n    this.controls = main.controls.threeControls;\n    this.light = main.light;\n    this.scene = main.scene;\n\n    this.model = null;\n    this.meshHelper = null;\n  }\n\n  load(main, mesh) {\n    /* Global */\n    //this.gui.close();\n\n    this.model = main.model;\n    this.meshHelper = main.meshHelper;\n\n    /* Camera */\n    const cameraFolder = this.gui.addFolder('Camera');\n    const cameraFOVGui = cameraFolder.add(Config.camera, 'fov', 0, 180).name('Camera FOV');\n    cameraFOVGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.camera.fov = value;\n    });\n    cameraFOVGui.onFinishChange(() => {\n      this.camera.updateProjectionMatrix();\n\n      this.controls.enableRotate = true;\n    });\n    const cameraAspectGui = cameraFolder.add(Config.camera, 'aspect', 0, 4).name('Camera Aspect');\n    cameraAspectGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.camera.aspect = value;\n    });\n    cameraAspectGui.onFinishChange(() => {\n      this.camera.updateProjectionMatrix();\n\n      this.controls.enableRotate = true;\n    });\n    const cameraFogColorGui = cameraFolder.addColor(Config.fog, 'color').name('Fog Color');\n    cameraFogColorGui.onChange((value) => {\n      this.scene.fog.color.setHex(value);\n    });\n    const cameraFogNearGui = cameraFolder.add(Config.fog, 'near', 0.000, 0.010).name('Fog Near');\n    cameraFogNearGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.scene.fog.density = value;\n    });\n    cameraFogNearGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n\n\n    /* Controls */\n    const controlsFolder = this.gui.addFolder('Controls');\n    controlsFolder.add(Config.controls, 'autoRotate').name('Auto Rotate').onChange((value) => {\n      this.controls.autoRotate = value;\n    });\n    const controlsAutoRotateSpeedGui = controlsFolder.add(Config.controls, 'autoRotateSpeed', -1, 1).name('Rotation Speed');\n    controlsAutoRotateSpeedGui.onChange((value) => {\n      this.controls.enableRotate = false;\n      this.controls.autoRotateSpeed = value;\n    });\n    controlsAutoRotateSpeedGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n\n\n    /* Model */\n    const modelFolder = this.gui.addFolder('Model');\n    modelFolder.add(Config.model, 'type', [...Config.model.initialTypes]).name('Select Model').onChange((value) => {\n      if (value) {\n        if (Config.mesh.enableHelper)\n          this.meshHelper.disable();\n\n        Config.model.selected = Config.model.initialTypes.indexOf(value);\n        this.unload();\n        this.model.unload();\n        this.model.load(value);\n      }\n    });\n\n    /* Mesh */\n    const meshFolder = this.gui.addFolder('Mesh');\n    meshFolder.add(Config.mesh, 'enableHelper', true).name('Enable Helpers').onChange((value) => {\n      if(value) {\n        this.meshHelper.enable();\n      } else {\n        this.meshHelper.disable();\n      }\n    });\n    meshFolder.add(Config.mesh, 'translucent', true).name('Translucent').onChange((value) => {\n      if(value) {\n        mesh.material.transparent = true;\n        mesh.material.opacity = 0.5;\n      } else {\n        mesh.material.opacity = 1.0;\n      }\n    });\n    meshFolder.add(Config.mesh, 'wireframe', true).name('Wireframe').onChange((value) => {\n      mesh.material.wireframe = value;\n    });\n\n\n    /* Lights */\n    // Ambient Light\n    const ambientLightFolder = this.gui.addFolder('Ambient Light');\n    ambientLightFolder.add(Config.ambientLight, 'enabled').name('Enabled').onChange((value) => {\n      this.light.ambientLight.visible = value;\n    });\n    ambientLightFolder.addColor(Config.ambientLight, 'color').name('Color').onChange((value) => {\n      this.light.ambientLight.color.setHex(value);\n    });\n\n\n    // Directional Light\n    const directionalLightFolder = this.gui.addFolder('Directional Light');\n    directionalLightFolder.add(Config.directionalLight, 'enabled').name('Enabled').onChange((value) => {\n      this.light.directionalLight.visible = value;\n    });\n    directionalLightFolder.addColor(Config.directionalLight, 'color').name('Color').onChange((value) => {\n      this.light.directionalLight.color.setHex(value);\n    });\n    const directionalLightIntensityGui = directionalLightFolder.add(Config.directionalLight, 'intensity', 0, 2).name('Intensity');\n    directionalLightIntensityGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.intensity = value;\n    });\n    directionalLightIntensityGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const directionalLightPositionXGui = directionalLightFolder.add(Config.directionalLight, 'x', -1000, 1000).name('Position X');\n    directionalLightPositionXGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.position.x = value;\n    });\n    directionalLightPositionXGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const directionalLightPositionYGui = directionalLightFolder.add(Config.directionalLight, 'y', -1000, 1000).name('Position Y');\n    directionalLightPositionYGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.position.y = value;\n    });\n    directionalLightPositionYGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const directionalLightPositionZGui = directionalLightFolder.add(Config.directionalLight, 'z', -1000, 1000).name('Position Z');\n    directionalLightPositionZGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.position.z = value;\n    });\n    directionalLightPositionZGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n\n    // Shadow Map\n    const shadowFolder = this.gui.addFolder('Shadow Map');\n    shadowFolder.add(Config.shadow, 'enabled').name('Enabled').onChange((value) => {\n      this.light.directionalLight.castShadow = value;\n    });\n    shadowFolder.add(Config.shadow, 'helperEnabled').name('Helper Enabled').onChange((value) => {\n      this.light.directionalLightHelper.visible = value;\n    });\n    const shadowNearGui = shadowFolder.add(Config.shadow, 'near', 0, 400).name('Near');\n    shadowNearGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.near = value;\n    });\n    shadowNearGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowFarGui = shadowFolder.add(Config.shadow, 'far', 0, 1200).name('Far');\n    shadowFarGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.far = value;\n    });\n    shadowFarGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowTopGui = shadowFolder.add(Config.shadow, 'top', -400, 400).name('Top');\n    shadowTopGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.top = value;\n    });\n    shadowTopGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowRightGui = shadowFolder.add(Config.shadow, 'right', -400, 400).name('Right');\n    shadowRightGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.right = value;\n    });\n    shadowRightGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowBottomGui = shadowFolder.add(Config.shadow, 'bottom', -400, 400).name('Bottom');\n    shadowBottomGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.bottom = value;\n    });\n    shadowBottomGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowLeftGui = shadowFolder.add(Config.shadow, 'left', -400, 400).name('Left');\n    shadowLeftGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.camera.left = value;\n    });\n    shadowLeftGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n    const shadowBiasGui = shadowFolder.add(Config.shadow, 'bias', -0.000010, 1).name('Bias');\n    shadowBiasGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.directionalLight.shadow.bias = value;\n    });\n    shadowBiasGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n      this.light.directionalLight.shadow.map.dispose();\n      this.light.directionalLight.shadow.map = null;\n      this.light.directionalLightHelper.update();\n    });\n\n\n    // Point Light\n    const pointLightFolder = this.gui.addFolder('Point Light');\n    pointLightFolder.add(Config.pointLight, 'enabled').name('Enabled').onChange((value) => {\n      this.light.pointLight.visible = value;\n    });\n    pointLightFolder.addColor(Config.pointLight, 'color').name('Color').onChange((value) => {\n      this.light.pointLight.color.setHex(value);\n    });\n    const pointLightIntensityGui = pointLightFolder.add(Config.pointLight, 'intensity', 0, 2).name('Intensity');\n    pointLightIntensityGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.pointLight.intensity = value;\n    });\n    pointLightIntensityGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const pointLightDistanceGui = pointLightFolder.add(Config.pointLight, 'distance', 0, 1000).name('Distance');\n    pointLightDistanceGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.pointLight.distance = value;\n    });\n    pointLightDistanceGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const pointLightPositionXGui = pointLightFolder.add(Config.pointLight, 'x', -1000, 1000).name('Position X');\n    pointLightPositionXGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.pointLight.position.x = value;\n    });\n    pointLightPositionXGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const pointLightPositionYGui = pointLightFolder.add(Config.pointLight, 'y', -1000, 1000).name('Position Y');\n    pointLightPositionYGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.pointLight.position.y = value;\n    });\n    pointLightPositionYGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const pointLightPositionZGui = pointLightFolder.add(Config.pointLight, 'z', -1000, 1000).name('Position Z');\n    pointLightPositionZGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.pointLight.position.z = value;\n    });\n    pointLightPositionZGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n\n\n    // Hemi Light\n    const hemiLightFolder = this.gui.addFolder('Hemi Light');\n    hemiLightFolder.add(Config.hemiLight, 'enabled').name('Enabled').onChange((value) => {\n      this.light.hemiLight.visible = value;\n    });\n    hemiLightFolder.addColor(Config.hemiLight, 'color').name('Color').onChange((value) => {\n      this.light.hemiLight.color.setHex(value);\n    });\n    hemiLightFolder.addColor(Config.hemiLight, 'groundColor').name('ground Color').onChange((value) => {\n      this.light.hemiLight.groundColor.setHex(value);\n    });\n    const hemiLightIntensityGui = hemiLightFolder.add(Config.hemiLight, 'intensity', 0, 2).name('Intensity');\n    hemiLightIntensityGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.hemiLight.intensity = value;\n    });\n    hemiLightIntensityGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const hemiLightPositionXGui = hemiLightFolder.add(Config.hemiLight, 'x', -1000, 1000).name('Position X');\n    hemiLightPositionXGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.hemiLight.position.x = value;\n    });\n    hemiLightPositionXGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const hemiLightPositionYGui = hemiLightFolder.add(Config.hemiLight, 'y', -500, 1000).name('Position Y');\n    hemiLightPositionYGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.hemiLight.position.y = value;\n    });\n    hemiLightPositionYGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n    const hemiLightPositionZGui = hemiLightFolder.add(Config.hemiLight, 'z', -1000, 1000).name('Position Z');\n    hemiLightPositionZGui.onChange((value) => {\n      this.controls.enableRotate = false;\n\n      this.light.hemiLight.position.z = value;\n    });\n    hemiLightPositionZGui.onFinishChange(() => {\n      this.controls.enableRotate = true;\n    });\n  }\n\n  unload() {\n    this.gui.destroy();\n    this.gui = new dat.GUI();\n  }\n}\n","// Global imports -\nimport * as THREE from 'three';\nimport TWEEN from '@tweenjs/tween.js';\n\n// Local imports -\n// Components\nimport Renderer from './components/renderer';\nimport Camera from './components/camera';\nimport Light from './components/light';\nimport Controls from './components/controls';\nimport Geometry from './components/geometry';\n\n// Helpers\nimport Stats from './helpers/stats';\nimport MeshHelper from './helpers/meshHelper';\n\n// Model\nimport Texture from './model/texture';\nimport Flowers from './flowers/Flowers';\n\n// Managers\nimport Interaction from './managers/interaction';\nimport DatGUI from './managers/datGUI';\n\n// data\nimport Config from './../data/config';\n// -- End of imports\n\n// This class instantiates and ties all of the components together, starts the loading process and renders the main loop\nexport default class Main {\n  constructor(container) {\n    // Set container property to container element\n    this.container = container;\n\n    // Start Three clock\n    this.clock = new THREE.Clock();\n\n    // Main scene creation\n    this.scene = new THREE.Scene();\n    this.scene.fog = new THREE.FogExp2(Config.fog.color, Config.fog.near);\n\n    // Get Device Pixel Ratio first for retina\n    if(window.devicePixelRatio) {\n      Config.dpr = window.devicePixelRatio;\n    }\n\n    // Main renderer constructor\n    this.renderer = new Renderer(this.scene, container);\n\n    // Components instantiations\n    this.camera = new Camera(this.renderer.threeRenderer);\n    this.controls = new Controls(this.camera.threeCamera, container);\n    this.light = new Light(this.scene);\n\n    // Create and place lights in scene\n    const lights = ['ambient', 'directional', 'point', 'hemi'];\n    lights.forEach((light) => this.light.place(light));\n\n    // Create and place geo in scene\n    this.geometry = new Geometry(this.scene);\n    this.geometry.make('plane')(150, 150, 10, 10);\n    this.geometry.place([0, -20, 0], [Math.PI / 2, 0, 0]);\n\n    // Set up rStats if dev environment\n    if(Config.isDev && Config.isShowingStats) {\n      this.stats = new Stats(this.renderer);\n      this.stats.setUp();\n    }\n\n    // Set up gui\n    if (Config.isDev) {\n      this.gui = new DatGUI(this)\n    }\n\n    // Instantiate texture class\n    this.texture = new Texture();\n    this.container.querySelector('#loading').style.display = 'none';\n\n    // Start loading the textures and then go on to load the model after the texture Promises have resolved\n    this.texture.load().then(() => {\n      this.manager = new THREE.LoadingManager();\n\n      // Textures loaded, load model\n      // this.model = new Model(this.scene, this.manager, this.texture.textures);\n      // this.model.load(Config.models[Config.model.selected].type);\n\n      this.model = new Flowers(this.scene);\n      this.model.load();\n\n      // onProgress callback\n      this.manager.onProgress = (item, loaded, total) => {\n        console.log(`${item}: ${loaded} ${total}`);\n      };\n\n      new Interaction(this.renderer.threeRenderer, this.scene, this.camera.threeCamera, this.controls.threeControls);\n\n      // Add dat.GUI controls if dev\n      if(Config.isDev) {\n        this.meshHelper = new MeshHelper(this.scene, this.model.obj);\n        if (Config.mesh.enableHelper) this.meshHelper.enable();\n\n        this.gui.load(this, this.model.obj);\n      }\n\n      // Everything is now fully loaded\n      Config.isLoaded = true;\n      this.container.querySelector('#loading').style.display = 'none';\n    });\n\n    // Start render which does not wait for model fully loaded\n    this.render();\n  }\n\n  render() {\n    // Render rStats if Dev\n    if(Config.isDev && Config.isShowingStats) {\n      Stats.start();\n    }\n\n    // Call render function and pass in created scene and camera\n    this.renderer.render(this.scene, this.camera.threeCamera);\n\n    // rStats has finished determining render call now\n    if(Config.isDev && Config.isShowingStats) {\n      Stats.end();\n    }\n\n    // Delta time is sometimes needed for certain updates\n    //const delta = this.clock.getDelta();\n\n    // Call any vendor or module frame updates here\n    TWEEN.update();\n    this.controls.threeControls.update();\n\n    // RAF\n    requestAnimationFrame(this.render.bind(this)); // Bind the main class instead of window object\n  }\n}\n","import Config from './data/config';\nimport Detector from './utils/detector';\nimport Main from './app/main';\n\n// Styles\nimport './../css/app.scss';\n\n// Check environment and set the Config helper\nif(__ENV__ === 'dev') {\n  console.log('----- RUNNING IN DEV ENVIRONMENT! -----');\n\n  Config.isDev = true;\n}\n\nfunction init() {\n  // Check for webGL capabilities\n  if(!Detector.webgl) {\n    Detector.addGetWebGLMessage();\n  } else {\n    const container = document.getElementById('appContainer');\n    new Main(container);\n  }\n}\n\ninit();\n","module.exports = function (THREE) {\n  var MOUSE = THREE.MOUSE;\n  if (!MOUSE) MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n  /*global THREE, console */\n\n  function OrbitConstraint(object) {\n    this.object = object;\n\n    // \"target\" sets the location of focus, where the object orbits around\n    // and where it pans with respect to.\n    this.target = new THREE.Vector3();\n\n    // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    // Limits to how far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0;\n    this.maxZoom = Infinity;\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0; // radians\n    this.maxPolarAngle = Math.PI; // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity; // radians\n    this.maxAzimuthAngle = Infinity; // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false;\n    this.dampingFactor = 0.25;\n\n    ////////////\n    // internals\n\n    var scope = this;\n\n    var EPS = 0.000001;\n\n    // Current position in spherical coordinate system.\n    var theta;\n    var phi;\n\n    // Pending changes\n    var phiDelta = 0;\n    var thetaDelta = 0;\n    var scale = 1;\n    var panOffset = new THREE.Vector3();\n    var zoomChanged = false;\n\n    // API\n\n    this.getPolarAngle = function () {\n      return phi;\n    };\n\n    this.getAzimuthalAngle = function () {\n      return theta;\n    };\n\n    this.rotateLeft = function (angle) {\n      thetaDelta -= angle;\n    };\n\n    this.rotateUp = function (angle) {\n      phiDelta -= angle;\n    };\n\n    // pass in distance in world space to move left\n    this.panLeft = (function () {\n      var v = new THREE.Vector3();\n\n      return function panLeft(distance) {\n        var te = this.object.matrix.elements;\n\n        // get X column of matrix\n        v.set(te[0], te[1], te[2]);\n        v.multiplyScalar(-distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    // pass in distance in world space to move up\n    this.panUp = (function () {\n      var v = new THREE.Vector3();\n\n      return function panUp(distance) {\n        var te = this.object.matrix.elements;\n\n        // get Y column of matrix\n        v.set(te[4], te[5], te[6]);\n        v.multiplyScalar(distance);\n\n        panOffset.add(v);\n      };\n    })();\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    this.pan = function (deltaX, deltaY, screenWidth, screenHeight) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        var offset = position.clone().sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        scope.panLeft((2 * deltaX * targetDistance) / screenHeight);\n        scope.panUp((2 * deltaY * targetDistance) / screenHeight);\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        // orthographic\n        scope.panLeft((deltaX * (scope.object.right - scope.object.left)) / screenWidth);\n        scope.panUp((deltaY * (scope.object.top - scope.object.bottom)) / screenHeight);\n      } else {\n        // camera neither orthographic or perspective\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'\n        );\n      }\n    };\n\n    this.dollyIn = function (dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale /= dollyScale;\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(\n          this.minZoom,\n          Math.min(this.maxZoom, this.object.zoom * dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n      }\n    };\n\n    this.dollyOut = function (dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale *= dollyScale;\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(\n          this.minZoom,\n          Math.min(this.maxZoom, this.object.zoom / dollyScale)\n        );\n        scope.object.updateProjectionMatrix();\n        zoomChanged = true;\n      } else {\n        console.warn(\n          'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'\n        );\n      }\n    };\n\n    this.update = (function () {\n      var offset = new THREE.Vector3();\n\n      // so camera.up is the orbit axis\n      var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\n      var quatInverse = quat.clone().inverse();\n\n      var lastPosition = new THREE.Vector3();\n      var lastQuaternion = new THREE.Quaternion();\n\n      return function () {\n        var position = this.object.position;\n\n        offset.copy(position).sub(this.target);\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat);\n\n        // angle from z-axis around y-axis\n\n        theta = Math.atan2(offset.x, offset.z);\n\n        // angle from y-axis\n\n        phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y);\n\n        theta += thetaDelta;\n        phi += phiDelta;\n\n        // restrict theta to be between desired limits\n        theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta));\n\n        // restrict phi to be between desired limits\n        phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi));\n\n        // restrict phi to be betwee EPS and PI-EPS\n        phi = Math.max(EPS, Math.min(Math.PI - EPS, phi));\n\n        var radius = offset.length() * scale;\n\n        // restrict radius to be between desired limits\n        radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius));\n\n        // move target to panned location\n        this.target.add(panOffset);\n\n        offset.x = radius * Math.sin(phi) * Math.sin(theta);\n        offset.y = radius * Math.cos(phi);\n        offset.z = radius * Math.sin(phi) * Math.cos(theta);\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse);\n\n        position.copy(this.target).add(offset);\n\n        this.object.lookAt(this.target);\n\n        if (this.enableDamping === true) {\n          thetaDelta *= 1 - this.dampingFactor;\n          phiDelta *= 1 - this.dampingFactor;\n        } else {\n          thetaDelta = 0;\n          phiDelta = 0;\n        }\n\n        scale = 1;\n        panOffset.set(0, 0, 0);\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(this.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS\n        ) {\n          lastPosition.copy(this.object.position);\n          lastQuaternion.copy(this.object.quaternion);\n          zoomChanged = false;\n\n          return true;\n        }\n\n        return false;\n      };\n    })();\n  }\n\n  // This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n  // the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n  // supported.\n  //\n  //    Orbit - left mouse / touch: one finger move\n  //    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n  //    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n  function OrbitControls(object, domElement) {\n    var constraint = new OrbitConstraint(object);\n\n    this.domElement = domElement !== undefined ? domElement : document;\n\n    // API\n\n    Object.defineProperty(this, 'constraint', {\n      get: function () {\n        return constraint;\n      },\n    });\n\n    this.getPolarAngle = function () {\n      return constraint.getPolarAngle();\n    };\n\n    this.getAzimuthalAngle = function () {\n      return constraint.getAzimuthalAngle();\n    };\n\n    // Set to false to disable this control\n    this.enabled = true;\n\n    // center is old, deprecated; use \"target\" instead\n    this.center = this.target;\n\n    // This option actually enables dollying in and out; left as \"zoom\" for\n    // backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true;\n    this.zoomSpeed = 1.0;\n\n    // Set to false to disable rotating\n    this.enableRotate = true;\n    this.rotateSpeed = 1.0;\n\n    // Set to false to disable panning\n    this.enablePan = true;\n    this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false;\n    this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n    // Set to false to disable use of the keys\n    this.enableKeys = true;\n\n    // The four arrow keys\n    this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n    // Mouse buttons\n    this.mouseButtons = {\n      ORBIT: THREE.MOUSE.LEFT,\n      ZOOM: THREE.MOUSE.MIDDLE,\n      PAN: THREE.MOUSE.RIGHT,\n    };\n\n    ////////////\n    // internals\n\n    var scope = this;\n\n    var rotateStart = new THREE.Vector2();\n    var rotateEnd = new THREE.Vector2();\n    var rotateDelta = new THREE.Vector2();\n\n    var panStart = new THREE.Vector2();\n    var panEnd = new THREE.Vector2();\n    var panDelta = new THREE.Vector2();\n\n    var dollyStart = new THREE.Vector2();\n    var dollyEnd = new THREE.Vector2();\n    var dollyDelta = new THREE.Vector2();\n\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_DOLLY: 4,\n      TOUCH_PAN: 5,\n    };\n\n    var state = STATE.NONE;\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.zoom0 = this.object.zoom;\n\n    // events\n\n    var changeEvent = { type: 'change' };\n    var startEvent = { type: 'start' };\n    var endEvent = { type: 'end' };\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    function pan(deltaX, deltaY) {\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      constraint.pan(deltaX, deltaY, element.clientWidth, element.clientHeight);\n    }\n\n    this.update = function () {\n      if (this.autoRotate && state === STATE.NONE) {\n        constraint.rotateLeft(getAutoRotationAngle());\n      }\n\n      if (constraint.update() === true) {\n        this.dispatchEvent(changeEvent);\n      }\n    };\n\n    this.reset = function () {\n      state = STATE.NONE;\n\n      this.target.copy(this.target0);\n      this.object.position.copy(this.position0);\n      this.object.zoom = this.zoom0;\n\n      this.object.updateProjectionMatrix();\n      this.dispatchEvent(changeEvent);\n\n      this.update();\n    };\n\n    function getAutoRotationAngle() {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed);\n    }\n\n    function onMouseDown(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      if (event.button === scope.mouseButtons.ORBIT) {\n        if (scope.enableRotate === false) return;\n\n        state = STATE.ROTATE;\n\n        rotateStart.set(event.clientX, event.clientY);\n      } else if (event.button === scope.mouseButtons.ZOOM) {\n        if (scope.enableZoom === false) return;\n\n        state = STATE.DOLLY;\n\n        dollyStart.set(event.clientX, event.clientY);\n      } else if (event.button === scope.mouseButtons.PAN) {\n        if (scope.enablePan === false) return;\n\n        state = STATE.PAN;\n\n        panStart.set(event.clientX, event.clientY);\n      }\n\n      if (state !== STATE.NONE) {\n        document.addEventListener('mousemove', onMouseMove, false);\n        document.addEventListener('mouseup', onMouseUp, false);\n        scope.dispatchEvent(startEvent);\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (state === STATE.ROTATE) {\n        if (scope.enableRotate === false) return;\n\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n\n        // rotating across whole screen goes 360 degrees around\n        constraint.rotateLeft(\n          ((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed\n        );\n\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        constraint.rotateUp(\n          ((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed\n        );\n\n        rotateStart.copy(rotateEnd);\n      } else if (state === STATE.DOLLY) {\n        if (scope.enableZoom === false) return;\n\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          constraint.dollyIn(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          constraint.dollyOut(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n      } else if (state === STATE.PAN) {\n        if (scope.enablePan === false) return;\n\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n\n        pan(panDelta.x, panDelta.y);\n\n        panStart.copy(panEnd);\n      }\n\n      if (state !== STATE.NONE) scope.update();\n    }\n\n    function onMouseUp(/* event */) {\n      if (scope.enabled === false) return;\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n      scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n    }\n\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var delta = 0;\n\n      if (event.wheelDelta !== undefined) {\n        // WebKit / Opera / Explorer 9\n\n        delta = event.wheelDelta;\n      } else if (event.detail !== undefined) {\n        // Firefox\n\n        delta = -event.detail;\n      }\n\n      if (delta > 0) {\n        constraint.dollyOut(getZoomScale());\n      } else if (delta < 0) {\n        constraint.dollyIn(getZoomScale());\n      }\n\n      scope.update();\n      scope.dispatchEvent(startEvent);\n      scope.dispatchEvent(endEvent);\n    }\n\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false)\n        return;\n\n      switch (event.keyCode) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed);\n          scope.update();\n          break;\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0);\n          scope.update();\n          break;\n      }\n    }\n\n    function touchstart(event) {\n      if (scope.enabled === false) return;\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n\n          state = STATE.TOUCH_ROTATE;\n\n          rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return;\n\n          state = STATE.TOUCH_DOLLY;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n          dollyStart.set(0, distance);\n          break;\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return;\n\n          state = STATE.TOUCH_PAN;\n\n          panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n\n      if (state !== STATE.NONE) scope.dispatchEvent(startEvent);\n    }\n\n    function touchmove(event) {\n      if (scope.enabled === false) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return;\n          if (state !== STATE.TOUCH_ROTATE) return;\n\n          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          rotateDelta.subVectors(rotateEnd, rotateStart);\n\n          // rotating across whole screen goes 360 degrees around\n          constraint.rotateLeft(\n            ((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed\n          );\n          // rotating up and down along whole screen attempts to go 360, but limited to 180\n          constraint.rotateUp(\n            ((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed\n          );\n\n          rotateStart.copy(rotateEnd);\n\n          scope.update();\n          break;\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return;\n          if (state !== STATE.TOUCH_DOLLY) return;\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX;\n          var dy = event.touches[0].pageY - event.touches[1].pageY;\n          var distance = Math.sqrt(dx * dx + dy * dy);\n\n          dollyEnd.set(0, distance);\n          dollyDelta.subVectors(dollyEnd, dollyStart);\n\n          if (dollyDelta.y > 0) {\n            constraint.dollyOut(getZoomScale());\n          } else if (dollyDelta.y < 0) {\n            constraint.dollyIn(getZoomScale());\n          }\n\n          dollyStart.copy(dollyEnd);\n\n          scope.update();\n          break;\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return;\n          if (state !== STATE.TOUCH_PAN) return;\n\n          panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n          panDelta.subVectors(panEnd, panStart);\n\n          pan(panDelta.x, panDelta.y);\n\n          panStart.copy(panEnd);\n\n          scope.update();\n          break;\n\n        default:\n          state = STATE.NONE;\n      }\n    }\n\n    function touchend(/* event */) {\n      if (scope.enabled === false) return;\n\n      scope.dispatchEvent(endEvent);\n      state = STATE.NONE;\n    }\n\n    function contextmenu(event) {\n      event.preventDefault();\n    }\n\n    this.dispose = function () {\n      this.domElement.removeEventListener('contextmenu', contextmenu, false);\n      this.domElement.removeEventListener('mousedown', onMouseDown, false);\n      this.domElement.removeEventListener('mousewheel', onMouseWheel, false);\n      this.domElement.removeEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\n      this.domElement.removeEventListener('touchstart', touchstart, false);\n      this.domElement.removeEventListener('touchend', touchend, false);\n      this.domElement.removeEventListener('touchmove', touchmove, false);\n\n      document.removeEventListener('mousemove', onMouseMove, false);\n      document.removeEventListener('mouseup', onMouseUp, false);\n\n      window.removeEventListener('keydown', onKeyDown, false);\n    };\n\n    this.domElement.addEventListener('contextmenu', contextmenu, false);\n\n    this.domElement.addEventListener('mousedown', onMouseDown, false);\n    this.domElement.addEventListener('mousewheel', onMouseWheel, false);\n    this.domElement.addEventListener('MozMousePixelScroll', onMouseWheel, false); // firefox\n\n    this.domElement.addEventListener('touchstart', touchstart, false);\n    this.domElement.addEventListener('touchend', touchend, false);\n    this.domElement.addEventListener('touchmove', touchmove, false);\n\n    window.addEventListener('keydown', onKeyDown, false);\n\n    // force an update at start\n    this.update();\n  }\n\n  OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n  OrbitControls.prototype.constructor = OrbitControls;\n\n  Object.defineProperties(OrbitControls.prototype, {\n    object: {\n      get: function () {\n        return this.constraint.object;\n      },\n    },\n\n    target: {\n      get: function () {\n        return this.constraint.target;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: target is now immutable. Use target.set() instead.');\n        this.constraint.target.copy(value);\n      },\n    },\n\n    minDistance: {\n      get: function () {\n        return this.constraint.minDistance;\n      },\n\n      set: function (value) {\n        this.constraint.minDistance = value;\n      },\n    },\n\n    maxDistance: {\n      get: function () {\n        return this.constraint.maxDistance;\n      },\n\n      set: function (value) {\n        this.constraint.maxDistance = value;\n      },\n    },\n\n    minZoom: {\n      get: function () {\n        return this.constraint.minZoom;\n      },\n\n      set: function (value) {\n        this.constraint.minZoom = value;\n      },\n    },\n\n    maxZoom: {\n      get: function () {\n        return this.constraint.maxZoom;\n      },\n\n      set: function (value) {\n        this.constraint.maxZoom = value;\n      },\n    },\n\n    minPolarAngle: {\n      get: function () {\n        return this.constraint.minPolarAngle;\n      },\n\n      set: function (value) {\n        this.constraint.minPolarAngle = value;\n      },\n    },\n\n    maxPolarAngle: {\n      get: function () {\n        return this.constraint.maxPolarAngle;\n      },\n\n      set: function (value) {\n        this.constraint.maxPolarAngle = value;\n      },\n    },\n\n    minAzimuthAngle: {\n      get: function () {\n        return this.constraint.minAzimuthAngle;\n      },\n\n      set: function (value) {\n        this.constraint.minAzimuthAngle = value;\n      },\n    },\n\n    maxAzimuthAngle: {\n      get: function () {\n        return this.constraint.maxAzimuthAngle;\n      },\n\n      set: function (value) {\n        this.constraint.maxAzimuthAngle = value;\n      },\n    },\n\n    enableDamping: {\n      get: function () {\n        return this.constraint.enableDamping;\n      },\n\n      set: function (value) {\n        this.constraint.enableDamping = value;\n      },\n    },\n\n    dampingFactor: {\n      get: function () {\n        return this.constraint.dampingFactor;\n      },\n\n      set: function (value) {\n        this.constraint.dampingFactor = value;\n      },\n    },\n\n    // backward compatibility\n\n    noZoom: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        return !this.enableZoom;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        this.enableZoom = !value;\n      },\n    },\n\n    noRotate: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        return !this.enableRotate;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'\n        );\n        this.enableRotate = !value;\n      },\n    },\n\n    noPan: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        return !this.enablePan;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        this.enablePan = !value;\n      },\n    },\n\n    noKeys: {\n      get: function () {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        return !this.enableKeys;\n      },\n\n      set: function (value) {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        this.enableKeys = !value;\n      },\n    },\n\n    staticMoving: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        return !this.constraint.enableDamping;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'\n        );\n        this.constraint.enableDamping = !value;\n      },\n    },\n\n    dynamicDampingFactor: {\n      get: function () {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        return this.constraint.dampingFactor;\n      },\n\n      set: function (value) {\n        console.warn(\n          'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'\n        );\n        this.constraint.dampingFactor = value;\n      },\n    },\n  });\n\n  return OrbitControls;\n};\n"],"names":["isDev","isShowingStats","isLoaded","isTweening","isRotating","isMouseMoving","isMouseOver","maxAnisotropy","dpr","easing","TWEEN","duration","model","selected","initialTypes","type","models","path","scale","texture","imageFiles","name","image","mesh","enableHelper","wireframe","translucent","material","color","emissive","fog","near","camera","fov","far","aspect","posX","posY","posZ","controls","autoRotate","autoRotateSpeed","rotateSpeed","zoomSpeed","minDistance","maxDistance","minPolarAngle","Math","PI","maxPolarAngle","minAzimuthAngle","Infinity","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","target","x","y","z","ambientLight","enabled","directionalLight","intensity","shadow","helperEnabled","bias","mapWidth","mapHeight","top","right","bottom","left","pointLight","distance","hemiLight","groundColor","canvas","window","CanvasRenderingContext2D","webgl","document","createElement","WebGLRenderingContext","getContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","id","style","fontFamily","fontSize","fontWeight","textAlign","background","padding","width","margin","this","innerHTML","join","addGetWebGLMessage","parameters","parent","undefined","body","appendChild","Renderer","scene","container","threeRenderer","THREE","antialias","setClearColor","setPixelRatio","devicePixelRatio","domElement","shadowMap","Config","capabilities","getMaxAnisotropy","updateSize","addEventListener","setSize","offsetWidth","offsetHeight","render","Camera","renderer","height","threeCamera","position","set","updateProjectionMatrix","Light","init","visible","castShadow","mapSize","directionalLightHelper","lightName","add","Controls","orbitControls","OrbitControls","threeControls","Material","basic","side","standard","shading","roughness","metalness","wire","rS","bS","glS","tS","Geometry","geo","widthSegments","heightSegments","radius","rotation","receiveShadow","Stats","start","tick","frame","end","update","BrowserStats","glStats","threeStats","rStats","CSSPath","userTimingAPI","values","caption","over","average","avgMs","fps","below","calls","raf","rstats","groups","fractions","base","steps","plugins","_v1","Vector3","_v2","_normalMatrix","Matrix3","_keys","VertexNormalsHelper","object","size","hex","nNormals","objGeometry","geometry","isGeometry","faces","length","isBufferGeometry","attributes","normal","count","BufferGeometry","positions","Float32BufferAttribute","setAttribute","LineSegments","LineBasicMaterial","toneMapped","matrixAutoUpdate","prototype","Object","create","constructor","idx","updateMatrixWorld","getNormalMatrix","matrixWorld","vertices","i","l","face","j","jl","vertexNormals","vertex","copy","applyMatrix4","applyMatrix3","normalize","multiplyScalar","setXYZ","objPos","objNorm","getX","getY","getZ","needsUpdate","MeshHelper","wireLine","depthTest","opacity","transparent","edges","edgesLine","vertexHelper","boxHelper","remove","Helpers","fn","threshhold","scope","last","deferTimer","context","now","Date","args","arguments","clearTimeout","setTimeout","apply","xhr","lengthComputable","percentComplete","loaded","total","console","log","round","error","value","replace","setHex","vertexColors","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","materialKey","textures","key","Texture","loader","promiseArray","setPath","forEach","imageFile","push","Promise","resolve","reject","load","anisotropy","modelOBJ","logProgress","Error","then","keys","reason","BufferGeometryUtils","computeTangents","index","uv","indices","array","normals","uvs","nVertices","tangent","BufferAttribute","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","Vector2","uvB","uvC","sdir","tdir","il","group","handleTriangle","w","t","test","tmp","tmp2","n","n2","handleVertex","a","b","c","fromArray","sub","r","isFinite","addScaledVector","v","dot","crossVectors","mergeBufferGeometries","geometries","useGroups","isIndexed","attributesUsed","Set","morphAttributesUsed","morphAttributes","morphTargetsRelative","mergedGeometry","offset","attributesCount","has","userData","mergedUserData","addGroup","indexOffset","mergedIndex","setIndex","mergedAttribute","mergeBufferAttributes","numMorphTargets","morphAttributesToMerge","mergedMorphAttribute","TypedArray","itemSize","normalized","arrayLength","attribute","isInterleavedBufferAttribute","interleaveAttributes","stride","interleavedBuffer","InterleavedBuffer","res","getters","setters","iba","InterleavedBufferAttribute","k","estimateBytesUsed","mem","attr","getAttribute","BYTES_PER_ELEMENT","getIndex","mergeVertices","tolerance","max","Number","EPSILON","hashToIndex","vertexCount","nextIndex","attributeNames","attrArrays","morphAttrsArrays","newIndices","morphAttr","Array","fill","map","decimalShift","log10","shiftMultiplier","pow","hash","newarray","newMorphArrays","getterFunc","m","ml","result","clone","oldAttribute","buffer","oldMorphAttribute","morphAttribute","toTrianglesDrawMode","drawMode","TrianglesDrawMode","warn","TriangleFanDrawMode","TriangleStripDrawMode","numberOfTriangles","newGeometry","clearGroups","GLTFLoader","manager","Loader","dracoLoader","ddsLoader","GLTFRegistry","objects","get","removeAll","assign","url","onLoad","onProgress","onError","resourcePath","LoaderUtils","itemStart","_onError","itemError","itemEnd","FileLoader","setResponseType","crossOrigin","setWithCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_CLEARCOAT","GLTFMaterialsClearcoatExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","indexOf","GLTFParser","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","Color","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","angle","penumbra","decay","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","parser","pending","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","baseColorTexture","assignTexture","all","MeshPhysicalMaterial","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","preload","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","defineProperties","defines","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","decodeDracoFile","extendTexture","transform","repeat","texCoord","source","copySampleValue_","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","Int8Array","Int16Array","Uint16Array","Uint32Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","ClampToEdgeWrapping","MirroredRepeatWrapping","RepeatWrapping","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","meshDef","morphTargetInfluences","targetNames","morphTargetDictionary","createAttributesKey","attributesKey","sort","options","cache","primitiveCache","textureLoader","TextureLoader","setCrossOrigin","fileLoader","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","box","Box3","min","targets","maxDisplacement","vector","setX","abs","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","morphNormals","addMorphTargets","markDefs","getDependencies","dependencies","scenes","animations","cameras","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","bufferViewDef","bufferViews","sparse","pendingBufferViews","bufferAttribute","elementBytes","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureIndex","URL","self","webkitURL","textureDef","textureExtensions","sourceURI","images","isObjectURL","blob","mimeType","createObjectURL","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","assignFinalMaterial","useVertexTangents","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","sizeAttenuation","isLine","lineMaterial","cachedMaterial","skinning","vertexTangents","flatShading","morphTargets","uv2","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","clearcoatExtension","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","mode","cached","promise","meshIndex","FrontSide","results","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","Line","LineLoop","Points","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","input","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","o","light","Bone","Object3D","PropertyBinding","matrix","Matrix4","quaternion","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","Skeleton","children","child","sceneIndex","sceneDef","nodeIds","Flowers","obj","ref","normalRandom","random","uniformRandom","seed","flowers","drawFlowers","colors","flowerDiversity","flowerSeed","drawFlower","boundingBoxA","setFromObject","boundingBoxB","flower","rotateY","translateX","translateZ","rotateX","rotateZ","stam","drawStam","leave","drawLeave","middle","curve","getMaterial","getStamColor","up","leaveGroup","leaveT","leavePosition","getPointAt","leaveTangent","getTangent","leaveAxis","leaveRadians","acos","setFromAxisAngle","leaveStam","drawLeaveStam","secondLeaveStam","headGroup","axis","radians","head","drawHead","combinedVertices","seed1","seed2","seed3","baseCP0","baseCP1","baseCP2","sideCP0","sideCP1","sideCP2","baseCurve","sideCurve","baseVertices","getPoints","sideVertices","flat","computeVertexNormals","getLeaveColor","lookAt","translateY","tinyLeaveCount","tinyLeaveGeometry","subTinyLeaveGeometry","tinyLeafMaterial","tinyLeafs","paddelGroup","paddleCoreGeometry","paddleCoreMaterial","getHeadColor","paddleCore","paddels","drawPaddles","paddelCount","subPaddelGeometry","getPaddelColor","leaves","ALIAS","Keyboard","keyCodes","event","onKeyChange","onBlur","removeEventListener","prop","keyCode","keyDesc","split","pressed","toUpperCase","charCodeAt","aliases","aliasKeys","shiftKey","ctrlKey","altKey","metaKey","Interaction","timeout","keyboard","throttle","onMouseMove","onMouseLeave","onMouseOver","eventMatches","preventDefault","DatGUI","main","gui","dat","GUI","meshHelper","cameraFolder","addFolder","cameraFOVGui","onChange","enableRotate","onFinishChange","cameraAspectGui","addColor","cameraFogNearGui","density","controlsFolder","controlsAutoRotateSpeedGui","disable","unload","meshFolder","enable","ambientLightFolder","directionalLightFolder","directionalLightIntensityGui","directionalLightPositionXGui","directionalLightPositionYGui","directionalLightPositionZGui","shadowFolder","shadowNearGui","dispose","shadowFarGui","shadowTopGui","shadowRightGui","shadowBottomGui","shadowLeftGui","shadowBiasGui","pointLightFolder","pointLightIntensityGui","pointLightDistanceGui","pointLightPositionXGui","pointLightPositionYGui","pointLightPositionZGui","hemiLightFolder","hemiLightIntensityGui","hemiLightPositionXGui","hemiLightPositionYGui","hemiLightPositionZGui","destroy","Main","clock","place","make","stats","setUp","querySelector","display","item","requestAnimationFrame","Detector","getElementById","module","exports","MOUSE","OrbitConstraint","minZoom","maxZoom","theta","phi","quat","quatInverse","lastPosition","lastQuaternion","EPS","phiDelta","thetaDelta","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","rotateUp","panLeft","te","elements","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","targetDistance","tan","dollyIn","dollyScale","zoom","dollyOut","Quaternion","setFromUnitVectors","inverse","applyQuaternion","atan2","sqrt","sin","cos","distanceToSquared","constraint","defineProperty","enablePan","keyPanSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","ZOOM","MIDDLE","PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","STATE","state","target0","position0","zoom0","changeEvent","startEvent","endEvent","clientWidth","clientHeight","getZoomScale","onMouseDown","button","clientX","clientY","onMouseUp","dispatchEvent","subVectors","onMouseWheel","stopPropagation","delta","wheelDelta","detail","onKeyDown","touchstart","touches","pageX","pageY","dx","dy","touchmove","touchend","contextmenu","reset","EventDispatcher","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor"],"sourceRoot":""}